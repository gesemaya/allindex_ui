import{aj as rs,ak as ur,al as ne,am as Sy,an as e_,ao as t_,ap as Nc,aq as ma,ar as Cy,T as r_,as as mi,at as Ay,au as xy,av as Q,aw as Dy,ax as fc,ay as Ny,az as Ly,aA as By,aB as ql,aC as Fy,aD as My,aE as jy,aF as zl,aG as Gy,aH as Vy,aI as Jn,aJ as Kl,aK as Hy,aL as Uy,aM as i_,aN as Nr,aO as $y,aP as ky,aQ as un,aR as Nt,aS as er,aT as Ei,aU as cr,aV as qy,aW as ln,aX as n_,aY as zy,aZ as Ky,a_ as Wy,a$ as s_,b0 as Yy,b1 as a_,b2 as o_,b3 as _n,b4 as pc,b5 as fa,b6 as pn,b7 as Jy,b8 as pa,b9 as Xy,ba as Zy,bb as Qy,bc as ua,bd as eE,be as tE,bf as Xo,bg as Wl,bh as rE,bi as iE,bj as nE,bk as Yl,bl as sE,bm as aE,bn as oE,bo as cE,bp as uE,bq as lE,br as hE,bs as zn,bt as c_,bu as Zo,bv as _E,bw as fE,_ as pE}from"./main-33163c51.js";import{e as wr,$ as Lc}from"./events-cfbc34f7.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[r]="c416f9af-bb69-48b5-85de-211c15190328",o._sentryDebugIdIdentifier="sentry-dbid-c416f9af-bb69-48b5-85de-211c15190328")}catch{}})();var va={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dc=function(o,r){return dc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},dc(o,r)};function dE(o,r){dc(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var gc=function(){return gc=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},gc.apply(this,arguments)};function gE(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function yE(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var f=o.length-1;f>=0;f--)(h=o[f])&&(c=(s<3?h(c):s>3?h(r,t,c):h(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function EE(o,r){return function(t,n){r(t,n,o)}}function mE(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function vE(o,r,t,n){function s(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function f(P){try{g(n.next(P))}catch(F){h(F)}}function m(P){try{g(n.throw(P))}catch(F){h(F)}}function g(P){P.done?c(P.value):s(P.value).then(f,m)}g((n=n.apply(o,r||[])).next())})}function RE(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(g){return function(P){return m([g,P])}}function m(g){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=g[0]&2?s.return:g[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,g[1])).done)return c;switch(s=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,s=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=r.call(o,t)}catch(P){g=[6,P],s=0}finally{n=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function TE(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function OE(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function yc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function u_(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],h;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(h)throw h.error}}return c}function bE(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(u_(arguments[r]));return o}function IE(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],h=0,f=c.length;h<f;h++,s++)n[s]=c[h];return n}function Xn(o){return this instanceof Xn?(this.v=o,this):new Xn(o)}function wE(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(C){n[C]&&(s[C]=function(G){return new Promise(function(B,z){c.push([C,G,B,z])>1||f(C,G)})})}function f(C,G){try{m(n[C](G))}catch(B){F(c[0][3],B)}}function m(C){C.value instanceof Xn?Promise.resolve(C.value.v).then(g,P):F(c[0][2],C)}function g(C){f("next",C)}function P(C){f("throw",C)}function F(C,G){C(G),c.shift(),c.length&&f(c[0][0],c[0][1])}}function PE(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(h){return(t=!t)?{value:Xn(o[s](h)),done:s==="return"}:c?c(h):h}:c}}function SE(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof yc=="function"?yc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(h){return new Promise(function(f,m){h=o[c](h),s(f,m,h.done,h.value)})}}function s(c,h,f,m){Promise.resolve(m).then(function(g){c({value:g,done:f})},h)}}function CE(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function AE(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function xE(o){return o&&o.__esModule?o:{default:o}}function DE(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function NE(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const LE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return gc},__asyncDelegator:PE,__asyncGenerator:wE,__asyncValues:SE,__await:Xn,__awaiter:vE,__classPrivateFieldGet:DE,__classPrivateFieldSet:NE,__createBinding:TE,__decorate:yE,__exportStar:OE,__extends:dE,__generator:RE,__importDefault:xE,__importStar:AE,__makeTemplateObject:CE,__metadata:mE,__param:EE,__read:u_,__rest:gE,__spread:bE,__spreadArrays:IE,__values:yc},Symbol.toStringTag,{value:"Module"})),l_=rs(LE);var is={};Object.defineProperty(is,"__esModule",{value:!0});function BE(o){if(typeof o!="string")throw new Error(`Cannot safe json parse value of type ${typeof o}`);try{return JSON.parse(o)}catch{return o}}is.safeJsonParse=BE;function FE(o){return typeof o=="string"?o:JSON.stringify(o,(r,t)=>typeof t>"u"?null:t)}is.safeJsonStringify=FE;var Fn={exports:{}},Jl;function ME(){return Jl||(Jl=1,function(){let o;function r(){}o=r,o.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},o.prototype.setItem=function(t,n){this[t]=String(n)},o.prototype.removeItem=function(t){delete this[t]},o.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},o.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},o.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ur<"u"&&ur.localStorage?Fn.exports=ur.localStorage:typeof window<"u"&&window.localStorage?Fn.exports=window.localStorage:Fn.exports=new r}()),Fn.exports}var Qo={},Mn={},Xl;function jE(){if(Xl)return Mn;Xl=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.IKeyValueStorage=void 0;class o{}return Mn.IKeyValueStorage=o,Mn}var jn={},Zl;function GE(){if(Zl)return jn;Zl=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.parseEntry=void 0;const o=is;function r(t){var n;return[t[0],o.safeJsonParse((n=t[1])!==null&&n!==void 0?n:"")]}return jn.parseEntry=r,jn}var Ql;function VE(){return Ql||(Ql=1,function(o){Object.defineProperty(o,"__esModule",{value:!0});const r=l_;r.__exportStar(jE(),o),r.__exportStar(GE(),o)}(Qo)),Qo}Object.defineProperty(va,"__esModule",{value:!0});va.KeyValueStorage=void 0;const hn=l_,eh=is,HE=hn.__importDefault(ME()),UE=VE();class h_{constructor(){this.localStorage=HE.default}getKeys(){return hn.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return hn.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(UE.parseEntry)})}getItem(r){return hn.__awaiter(this,void 0,void 0,function*(){const t=this.localStorage.getItem(r);if(t!==null)return eh.safeJsonParse(t)})}setItem(r,t){return hn.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(r,eh.safeJsonStringify(t))})}removeItem(r){return hn.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(r)})}}va.KeyValueStorage=h_;var $E=va.default=h_,dn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ec=function(o,r){return Ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},Ec(o,r)};function kE(o,r){Ec(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var mc=function(){return mc=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},mc.apply(this,arguments)};function qE(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function zE(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var f=o.length-1;f>=0;f--)(h=o[f])&&(c=(s<3?h(c):s>3?h(r,t,c):h(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function KE(o,r){return function(t,n){r(t,n,o)}}function WE(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function YE(o,r,t,n){function s(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function f(P){try{g(n.next(P))}catch(F){h(F)}}function m(P){try{g(n.throw(P))}catch(F){h(F)}}function g(P){P.done?c(P.value):s(P.value).then(f,m)}g((n=n.apply(o,r||[])).next())})}function JE(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(g){return function(P){return m([g,P])}}function m(g){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=g[0]&2?s.return:g[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,g[1])).done)return c;switch(s=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,s=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=r.call(o,t)}catch(P){g=[6,P],s=0}finally{n=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function XE(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function ZE(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function vc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],h;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(h)throw h.error}}return c}function QE(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(__(arguments[r]));return o}function em(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],h=0,f=c.length;h<f;h++,s++)n[s]=c[h];return n}function Zn(o){return this instanceof Zn?(this.v=o,this):new Zn(o)}function tm(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(C){n[C]&&(s[C]=function(G){return new Promise(function(B,z){c.push([C,G,B,z])>1||f(C,G)})})}function f(C,G){try{m(n[C](G))}catch(B){F(c[0][3],B)}}function m(C){C.value instanceof Zn?Promise.resolve(C.value.v).then(g,P):F(c[0][2],C)}function g(C){f("next",C)}function P(C){f("throw",C)}function F(C,G){C(G),c.shift(),c.length&&f(c[0][0],c[0][1])}}function rm(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(h){return(t=!t)?{value:Zn(o[s](h)),done:s==="return"}:c?c(h):h}:c}}function im(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof vc=="function"?vc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(h){return new Promise(function(f,m){h=o[c](h),s(f,m,h.done,h.value)})}}function s(c,h,f,m){Promise.resolve(m).then(function(g){c({value:g,done:f})},h)}}function nm(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function sm(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function am(o){return o&&o.__esModule?o:{default:o}}function om(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function cm(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const um=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return mc},__asyncDelegator:rm,__asyncGenerator:tm,__asyncValues:im,__await:Zn,__awaiter:YE,__classPrivateFieldGet:om,__classPrivateFieldSet:cm,__createBinding:XE,__decorate:zE,__exportStar:ZE,__extends:kE,__generator:JE,__importDefault:am,__importStar:sm,__makeTemplateObject:nm,__metadata:WE,__param:KE,__read:__,__rest:qE,__spread:QE,__spreadArrays:em,__values:vc},Symbol.toStringTag,{value:"Module"})),Ra=rs(um);var Gn={},ec={},Vn={};let Gi=class{};const lm=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Gi},Symbol.toStringTag,{value:"Module"})),hm=rs(lm);var th;function _m(){if(th)return Vn;th=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.IHeartBeat=void 0;const o=hm;class r extends o.IEvents{constructor(n){super()}}return Vn.IHeartBeat=r,Vn}var rh;function f_(){return rh||(rh=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),Ra.__exportStar(_m(),o)}(ec)),ec}var tc={},Mi={},ih;function fm(){if(ih)return Mi;ih=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.HEARTBEAT_EVENTS=Mi.HEARTBEAT_INTERVAL=void 0;const o=ne;return Mi.HEARTBEAT_INTERVAL=o.FIVE_SECONDS,Mi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Mi}var nh;function p_(){return nh||(nh=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),Ra.__exportStar(fm(),o)}(tc)),tc}var sh;function pm(){if(sh)return Gn;sh=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.HeartBeat=void 0;const o=Ra,r=wr,t=ne,n=f_(),s=p_();class c extends n.IHeartBeat{constructor(f){super(f),this.events=new r.EventEmitter,this.interval=s.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||s.HEARTBEAT_INTERVAL}static init(f){return o.__awaiter(this,void 0,void 0,function*(){const m=new c(f);return yield m.init(),m})}init(){return o.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,m){this.events.on(f,m)}once(f,m){this.events.once(f,m)}off(f,m){this.events.off(f,m)}removeListener(f,m){this.events.removeListener(f,m)}initialize(){return o.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(s.HEARTBEAT_EVENTS.pulse)}}return Gn.HeartBeat=c,Gn}(function(o){Object.defineProperty(o,"__esModule",{value:!0});const r=Ra;r.__exportStar(pm(),o),r.__exportStar(f_(),o),r.__exportStar(p_(),o)})(dn);var Ae={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rc=function(o,r){return Rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},Rc(o,r)};function dm(o,r){Rc(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Tc=function(){return Tc=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},Tc.apply(this,arguments)};function gm(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function ym(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var f=o.length-1;f>=0;f--)(h=o[f])&&(c=(s<3?h(c):s>3?h(r,t,c):h(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function Em(o,r){return function(t,n){r(t,n,o)}}function mm(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function vm(o,r,t,n){function s(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function f(P){try{g(n.next(P))}catch(F){h(F)}}function m(P){try{g(n.throw(P))}catch(F){h(F)}}function g(P){P.done?c(P.value):s(P.value).then(f,m)}g((n=n.apply(o,r||[])).next())})}function Rm(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(g){return function(P){return m([g,P])}}function m(g){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=g[0]&2?s.return:g[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,g[1])).done)return c;switch(s=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,s=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=r.call(o,t)}catch(P){g=[6,P],s=0}finally{n=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Tm(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function Om(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function Oc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function d_(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],h;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(h)throw h.error}}return c}function bm(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(d_(arguments[r]));return o}function Im(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],h=0,f=c.length;h<f;h++,s++)n[s]=c[h];return n}function Qn(o){return this instanceof Qn?(this.v=o,this):new Qn(o)}function wm(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(C){n[C]&&(s[C]=function(G){return new Promise(function(B,z){c.push([C,G,B,z])>1||f(C,G)})})}function f(C,G){try{m(n[C](G))}catch(B){F(c[0][3],B)}}function m(C){C.value instanceof Qn?Promise.resolve(C.value.v).then(g,P):F(c[0][2],C)}function g(C){f("next",C)}function P(C){f("throw",C)}function F(C,G){C(G),c.shift(),c.length&&f(c[0][0],c[0][1])}}function Pm(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(h){return(t=!t)?{value:Qn(o[s](h)),done:s==="return"}:c?c(h):h}:c}}function Sm(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof Oc=="function"?Oc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(h){return new Promise(function(f,m){h=o[c](h),s(f,m,h.done,h.value)})}}function s(c,h,f,m){Promise.resolve(m).then(function(g){c({value:g,done:f})},h)}}function Cm(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function Am(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function xm(o){return o&&o.__esModule?o:{default:o}}function Dm(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function Nm(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const Lm=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Tc},__asyncDelegator:Pm,__asyncGenerator:wm,__asyncValues:Sm,__await:Qn,__awaiter:vm,__classPrivateFieldGet:Dm,__classPrivateFieldSet:Nm,__createBinding:Tm,__decorate:ym,__exportStar:Om,__extends:dm,__generator:Rm,__importDefault:xm,__importStar:Am,__makeTemplateObject:Cm,__metadata:mm,__param:Em,__read:d_,__rest:gm,__spread:bm,__spreadArrays:Im,__values:Oc},Symbol.toStringTag,{value:"Module"})),Bm=rs(Lm);var rc,ah;function Fm(){if(ah)return rc;ah=1;function o(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}rc=r;function r(t,n,s){var c=s&&s.stringify||o,h=1;if(typeof t=="object"&&t!==null){var f=n.length+h;if(f===1)return t;var m=new Array(f);m[0]=c(t);for(var g=1;g<f;g++)m[g]=c(n[g]);return m.join(" ")}if(typeof t!="string")return t;var P=n.length;if(P===0)return t;for(var F="",C=1-h,G=-1,B=t&&t.length||0,z=0;z<B;){if(t.charCodeAt(z)===37&&z+1<B){switch(G=G>-1?G:0,t.charCodeAt(z+1)){case 100:case 102:if(C>=P||n[C]==null)break;G<z&&(F+=t.slice(G,z)),F+=Number(n[C]),G=z+2,z++;break;case 105:if(C>=P||n[C]==null)break;G<z&&(F+=t.slice(G,z)),F+=Math.floor(Number(n[C])),G=z+2,z++;break;case 79:case 111:case 106:if(C>=P||n[C]===void 0)break;G<z&&(F+=t.slice(G,z));var ie=typeof n[C];if(ie==="string"){F+="'"+n[C]+"'",G=z+2,z++;break}if(ie==="function"){F+=n[C].name||"<anonymous>",G=z+2,z++;break}F+=c(n[C]),G=z+2,z++;break;case 115:if(C>=P)break;G<z&&(F+=t.slice(G,z)),F+=String(n[C]),G=z+2,z++;break;case 37:G<z&&(F+=t.slice(G,z)),F+="%",G=z+2,z++,C--;break}++C}++z}return G===-1?t:(G<B&&(F+=t.slice(G)),F)}return rc}var ic,oh;function Mm(){if(oh)return ic;oh=1;const o=Fm();ic=s;const r=he().console||{},t={mapHttpRequest:B,mapHttpResponse:B,wrapRequestSerializer:z,wrapResponseSerializer:z,wrapErrorSerializer:z,req:B,res:B,err:C};function n(N,H){return Array.isArray(N)?N.filter(function(ge){return ge!=="!stdSerializers.err"}):N===!0?Object.keys(H):!1}function s(N){N=N||{},N.browser=N.browser||{};const H=N.browser.transmit;if(H&&typeof H.send!="function")throw Error("pino: transmit option must have a send function");const W=N.browser.write||r;N.browser.write&&(N.browser.asObject=!0);const ge=N.serializers||{},re=n(N.browser.serialize,ge);let ue=N.browser.serialize;Array.isArray(N.browser.serialize)&&N.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ue=!1);const xe=["error","fatal","warn","info","debug","trace"];typeof W=="function"&&(W.error=W.fatal=W.warn=W.info=W.debug=W.trace=W),N.enabled===!1&&(N.level="silent");const Ve=N.level||"info",E=Object.create(W);E.log||(E.log=ie),Object.defineProperty(E,"levelVal",{get:X}),Object.defineProperty(E,"level",{get:ce,set:q});const O={transmit:H,serialize:re,asObject:N.browser.asObject,levels:xe,timestamp:G(N)};E.levels=s.levels,E.level=Ve,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=ie,E.serializers=ge,E._serialize=re,E._stdErrSerialize=ue,E.child=U,H&&(E._logEvent=F());function X(){return this.level==="silent"?1/0:this.levels.values[this.level]}function ce(){return this._level}function q(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,c(O,E,"error","log"),c(O,E,"fatal","error"),c(O,E,"warn","error"),c(O,E,"info","log"),c(O,E,"debug","log"),c(O,E,"trace","log")}function U(k,K){if(!k)throw new Error("missing bindings for child Pino");K=K||{},re&&k.serializers&&(K.serializers=k.serializers);const Ye=K.serializers;if(re&&Ye){var $e=Object.assign({},ge,Ye),Br=N.browser.serialize===!0?Object.keys($e):re;delete k.serializers,m([k],Br,$e,this._stdErrSerialize)}function Oe(Ot){this._childLevel=(Ot._childLevel|0)+1,this.error=g(Ot,k,"error"),this.fatal=g(Ot,k,"fatal"),this.warn=g(Ot,k,"warn"),this.info=g(Ot,k,"info"),this.debug=g(Ot,k,"debug"),this.trace=g(Ot,k,"trace"),$e&&(this.serializers=$e,this._serialize=Br),H&&(this._logEvent=F([].concat(Ot._logEvent.bindings,k)))}return Oe.prototype=this,new Oe(this)}return E}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:Te,epochTime:de,unixTime:fe,isoTime:le});function c(N,H,W,ge){const re=Object.getPrototypeOf(H);H[W]=H.levelVal>H.levels.values[W]?ie:re[W]?re[W]:r[W]||r[ge]||ie,h(N,H,W)}function h(N,H,W){!N.transmit&&H[W]===ie||(H[W]=function(ge){return function(){const ue=N.timestamp(),xe=new Array(arguments.length),Ve=Object.getPrototypeOf&&Object.getPrototypeOf(this)===r?r:this;for(var E=0;E<xe.length;E++)xe[E]=arguments[E];if(N.serialize&&!N.asObject&&m(xe,this._serialize,this.serializers,this._stdErrSerialize),N.asObject?ge.call(Ve,f(this,W,xe,ue)):ge.apply(Ve,xe),N.transmit){const O=N.transmit.level||H.level,X=s.levels.values[O],ce=s.levels.values[W];if(ce<X)return;P(this,{ts:ue,methodLevel:W,methodValue:ce,transmitLevel:O,transmitValue:s.levels.values[N.transmit.level||H.level],send:N.transmit.send,val:H.levelVal},xe)}}}(H[W]))}function f(N,H,W,ge){N._serialize&&m(W,N._serialize,N.serializers,N._stdErrSerialize);const re=W.slice();let ue=re[0];const xe={};ge&&(xe.time=ge),xe.level=s.levels.values[H];let Ve=(N._childLevel|0)+1;if(Ve<1&&(Ve=1),ue!==null&&typeof ue=="object"){for(;Ve--&&typeof re[0]=="object";)Object.assign(xe,re.shift());ue=re.length?o(re.shift(),re):void 0}else typeof ue=="string"&&(ue=o(re.shift(),re));return ue!==void 0&&(xe.msg=ue),xe}function m(N,H,W,ge){for(const re in N)if(ge&&N[re]instanceof Error)N[re]=s.stdSerializers.err(N[re]);else if(typeof N[re]=="object"&&!Array.isArray(N[re]))for(const ue in N[re])H&&H.indexOf(ue)>-1&&ue in W&&(N[re][ue]=W[ue](N[re][ue]))}function g(N,H,W){return function(){const ge=new Array(1+arguments.length);ge[0]=H;for(var re=1;re<ge.length;re++)ge[re]=arguments[re-1];return N[W].apply(this,ge)}}function P(N,H,W){const ge=H.send,re=H.ts,ue=H.methodLevel,xe=H.methodValue,Ve=H.val,E=N._logEvent.bindings;m(W,N._serialize||Object.keys(N.serializers),N.serializers,N._stdErrSerialize===void 0?!0:N._stdErrSerialize),N._logEvent.ts=re,N._logEvent.messages=W.filter(function(O){return E.indexOf(O)===-1}),N._logEvent.level.label=ue,N._logEvent.level.value=xe,ge(ue,N._logEvent,Ve),N._logEvent=F(E)}function F(N){return{ts:0,messages:[],bindings:N||[],level:{label:"",value:0}}}function C(N){const H={type:N.constructor.name,msg:N.message,stack:N.stack};for(const W in N)H[W]===void 0&&(H[W]=N[W]);return H}function G(N){return typeof N.timestamp=="function"?N.timestamp:N.timestamp===!1?Te:de}function B(){return{}}function z(N){return N}function ie(){}function Te(){return!1}function de(){return Date.now()}function fe(){return Math.round(Date.now()/1e3)}function le(){return new Date(Date.now()).toISOString()}function he(){function N(H){return typeof H<"u"&&H}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return N(self)||N(window)||N(this)||{}}}return ic}var ji={},ch;function g_(){return ch||(ch=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.PINO_CUSTOM_CONTEXT_KEY=ji.PINO_LOGGER_DEFAULTS=void 0,ji.PINO_LOGGER_DEFAULTS={level:"info"},ji.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ji}var Qt={},uh;function jm(){if(uh)return Qt;uh=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.generateChildLogger=Qt.formatChildLoggerContext=Qt.getLoggerContext=Qt.setBrowserLoggerContext=Qt.getBrowserLoggerContext=Qt.getDefaultLoggerOptions=void 0;const o=g_();function r(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||o.PINO_LOGGER_DEFAULTS.level})}Qt.getDefaultLoggerOptions=r;function t(f,m=o.PINO_CUSTOM_CONTEXT_KEY){return f[m]||""}Qt.getBrowserLoggerContext=t;function n(f,m,g=o.PINO_CUSTOM_CONTEXT_KEY){return f[g]=m,f}Qt.setBrowserLoggerContext=n;function s(f,m=o.PINO_CUSTOM_CONTEXT_KEY){let g="";return typeof f.bindings>"u"?g=t(f,m):g=f.bindings().context||"",g}Qt.getLoggerContext=s;function c(f,m,g=o.PINO_CUSTOM_CONTEXT_KEY){const P=s(f,g);return P.trim()?`${P}/${m}`:m}Qt.formatChildLoggerContext=c;function h(f,m,g=o.PINO_CUSTOM_CONTEXT_KEY){const P=c(f,m,g),F=f.child({context:P});return n(F,P,g)}return Qt.generateChildLogger=h,Qt}(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.pino=void 0;const r=Bm,t=r.__importDefault(Mm());Object.defineProperty(o,"pino",{enumerable:!0,get:function(){return t.default}}),r.__exportStar(g_(),o),r.__exportStar(jm(),o)})(Ae);class Gm extends Gi{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}}class Vm extends Gi{constructor(r,t){super(),this.core=r,this.logger=t,this.records=new Map}}class Hm{constructor(r,t){this.logger=r,this.core=t}}let Um=class extends Gi{constructor(r,t){super(),this.relayer=r,this.logger=t}},$m=class extends Gi{constructor(r){super()}},km=class{constructor(r,t,n,s){this.core=r,this.logger=t,this.name=n}};class qm extends Gi{constructor(r,t){super(),this.relayer=r,this.logger=t}}let zm=class extends Gi{constructor(r,t){super(),this.core=r,this.logger=t}},Km=class{constructor(r,t){this.projectId=r,this.logger=t}},Wm=class{constructor(r){this.opts=r,this.protocol="wc",this.version=2}},Ym=class{constructor(r){this.client=r}};const Jm=o=>JSON.stringify(o,(r,t)=>typeof t=="bigint"?t.toString()+"n":t),Xm=o=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=o.replace(r,'$1"$2n"$3');return JSON.parse(t,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Bc(o){if(typeof o!="string")throw new Error(`Cannot safe json parse value of type ${typeof o}`);try{return Xm(o)}catch{return o}}function es(o){return typeof o=="string"?o:Jm(o)||""}var Fc={},y_={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var r=Sy,t=e_;o.DIGEST_LENGTH=64,o.BLOCK_SIZE=128;var n=function(){function f(){this.digestLength=o.DIGEST_LENGTH,this.blockSize=o.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(m,g){if(g===void 0&&(g=m.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var P=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<o.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=m[P++],g--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(P=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,m,P,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=m[P++],g--;return this},f.prototype.finish=function(m){if(!this._finished){var g=this._bytesHashed,P=this._bufferLength,F=g/536870912|0,C=g<<3,G=g%128<112?128:256;this._buffer[P]=128;for(var B=P+1;B<G-8;B++)this._buffer[B]=0;r.writeUint32BE(F,this._buffer,G-8),r.writeUint32BE(C,this._buffer,G-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,G),this._finished=!0}for(var B=0;B<this.digestLength/8;B++)r.writeUint32BE(this._stateHi[B],m,B*8),r.writeUint32BE(this._stateLo[B],m,B*8+4);return this},f.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(m){return this._stateHi.set(m.stateHi),this._stateLo.set(m.stateLo),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(m){t.wipe(m.stateHi),t.wipe(m.stateLo),m.buffer&&t.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},f}();o.SHA512=n;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,m,g,P,F,C,G){for(var B=g[0],z=g[1],ie=g[2],Te=g[3],de=g[4],fe=g[5],le=g[6],he=g[7],N=P[0],H=P[1],W=P[2],ge=P[3],re=P[4],ue=P[5],xe=P[6],Ve=P[7],E,O,X,ce,q,U,k,K;G>=128;){for(var Ye=0;Ye<16;Ye++){var $e=8*Ye+C;f[Ye]=r.readUint32BE(F,$e),m[Ye]=r.readUint32BE(F,$e+4)}for(var Ye=0;Ye<80;Ye++){var Br=B,Oe=z,Ot=ie,D=Te,x=de,S=fe,l=le,T=he,ee=N,_e=H,ve=W,De=ge,Le=re,we=ue,bt=xe,yt=Ve;if(E=he,O=Ve,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=(de>>>14|re<<32-14)^(de>>>18|re<<32-18)^(re>>>41-32|de<<32-(41-32)),O=(re>>>14|de<<32-14)^(re>>>18|de<<32-18)^(de>>>41-32|re<<32-(41-32)),q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,E=de&fe^~de&le,O=re&ue^~re&xe,q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,E=s[Ye*2],O=s[Ye*2+1],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,E=f[Ye%16],O=m[Ye%16],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,X=k&65535|K<<16,ce=q&65535|U<<16,E=X,O=ce,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=(B>>>28|N<<32-28)^(N>>>34-32|B<<32-(34-32))^(N>>>39-32|B<<32-(39-32)),O=(N>>>28|B<<32-28)^(B>>>34-32|N<<32-(34-32))^(B>>>39-32|N<<32-(39-32)),q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,E=B&z^B&ie^z&ie,O=N&H^N&W^H&W,q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,T=k&65535|K<<16,yt=q&65535|U<<16,E=D,O=De,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=X,O=ce,q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,D=k&65535|K<<16,De=q&65535|U<<16,z=Br,ie=Oe,Te=Ot,de=D,fe=x,le=S,he=l,B=T,H=ee,W=_e,ge=ve,re=De,ue=Le,xe=we,Ve=bt,N=yt,Ye%16===15)for(var $e=0;$e<16;$e++)E=f[$e],O=m[$e],q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=f[($e+9)%16],O=m[($e+9)%16],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,X=f[($e+1)%16],ce=m[($e+1)%16],E=(X>>>1|ce<<32-1)^(X>>>8|ce<<32-8)^X>>>7,O=(ce>>>1|X<<32-1)^(ce>>>8|X<<32-8)^(ce>>>7|X<<32-7),q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,X=f[($e+14)%16],ce=m[($e+14)%16],E=(X>>>19|ce<<32-19)^(ce>>>61-32|X<<32-(61-32))^X>>>6,O=(ce>>>19|X<<32-19)^(X>>>61-32|ce<<32-(61-32))^(ce>>>6|X<<32-6),q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,f[$e]=k&65535|K<<16,m[$e]=q&65535|U<<16}E=B,O=N,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[0],O=P[0],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[0]=B=k&65535|K<<16,P[0]=N=q&65535|U<<16,E=z,O=H,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[1],O=P[1],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[1]=z=k&65535|K<<16,P[1]=H=q&65535|U<<16,E=ie,O=W,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[2],O=P[2],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[2]=ie=k&65535|K<<16,P[2]=W=q&65535|U<<16,E=Te,O=ge,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[3],O=P[3],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[3]=Te=k&65535|K<<16,P[3]=ge=q&65535|U<<16,E=de,O=re,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[4],O=P[4],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[4]=de=k&65535|K<<16,P[4]=re=q&65535|U<<16,E=fe,O=ue,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[5],O=P[5],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[5]=fe=k&65535|K<<16,P[5]=ue=q&65535|U<<16,E=le,O=xe,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[6],O=P[6],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[6]=le=k&65535|K<<16,P[6]=xe=q&65535|U<<16,E=he,O=Ve,q=O&65535,U=O>>>16,k=E&65535,K=E>>>16,E=g[7],O=P[7],q+=O&65535,U+=O>>>16,k+=E&65535,K+=E>>>16,U+=q>>>16,k+=U>>>16,K+=k>>>16,g[7]=he=k&65535|K<<16,P[7]=Ve=q&65535|U<<16,C+=128,G-=128}return C}function h(f){var m=new n;m.update(f);var g=m.digest();return m.clean(),g}o.hash=h})(y_);(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.convertSecretKeyToX25519=o.convertPublicKeyToX25519=o.verify=o.sign=o.extractPublicKeyFromSecretKey=o.generateKeyPair=o.generateKeyPairFromSeed=o.SEED_LENGTH=o.SECRET_KEY_LENGTH=o.PUBLIC_KEY_LENGTH=o.SIGNATURE_LENGTH=void 0;const r=t_,t=y_,n=e_;o.SIGNATURE_LENGTH=64,o.PUBLIC_KEY_LENGTH=32,o.SECRET_KEY_LENGTH=64,o.SEED_LENGTH=32;function s(D){const x=new Float64Array(16);if(D)for(let S=0;S<D.length;S++)x[S]=D[S];return x}const c=new Uint8Array(32);c[0]=9;const h=s(),f=s([1]),m=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),P=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),F=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),C=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function G(D,x){for(let S=0;S<16;S++)D[S]=x[S]|0}function B(D){let x=1;for(let S=0;S<16;S++){let l=D[S]+x+65535;x=Math.floor(l/65536),D[S]=l-x*65536}D[0]+=x-1+37*(x-1)}function z(D,x,S){const l=~(S-1);for(let T=0;T<16;T++){const ee=l&(D[T]^x[T]);D[T]^=ee,x[T]^=ee}}function ie(D,x){const S=s(),l=s();for(let T=0;T<16;T++)l[T]=x[T];B(l),B(l),B(l);for(let T=0;T<2;T++){S[0]=l[0]-65517;for(let _e=1;_e<15;_e++)S[_e]=l[_e]-65535-(S[_e-1]>>16&1),S[_e-1]&=65535;S[15]=l[15]-32767-(S[14]>>16&1);const ee=S[15]>>16&1;S[14]&=65535,z(l,S,1-ee)}for(let T=0;T<16;T++)D[2*T]=l[T]&255,D[2*T+1]=l[T]>>8}function Te(D,x){let S=0;for(let l=0;l<32;l++)S|=D[l]^x[l];return(1&S-1>>>8)-1}function de(D,x){const S=new Uint8Array(32),l=new Uint8Array(32);return ie(S,D),ie(l,x),Te(S,l)}function fe(D){const x=new Uint8Array(32);return ie(x,D),x[0]&1}function le(D,x){for(let S=0;S<16;S++)D[S]=x[2*S]+(x[2*S+1]<<8);D[15]&=32767}function he(D,x,S){for(let l=0;l<16;l++)D[l]=x[l]+S[l]}function N(D,x,S){for(let l=0;l<16;l++)D[l]=x[l]-S[l]}function H(D,x,S){let l,T,ee=0,_e=0,ve=0,De=0,Le=0,we=0,bt=0,yt=0,st=0,Fe=0,Xe=0,Ze=0,at=0,He=0,Qe=0,Ne=0,ke=0,ut=0,je=0,It=0,Lt=0,Vt=0,Ht=0,Mt=0,Kt=0,tr=0,Fr=0,Wt=0,kr=0,oi=0,Oi=0,lt=S[0],rt=S[1],ht=S[2],_t=S[3],ot=S[4],it=S[5],wt=S[6],Pt=S[7],ft=S[8],St=S[9],pt=S[10],Et=S[11],dt=S[12],Je=S[13],Ct=S[14],At=S[15];l=x[0],ee+=l*lt,_e+=l*rt,ve+=l*ht,De+=l*_t,Le+=l*ot,we+=l*it,bt+=l*wt,yt+=l*Pt,st+=l*ft,Fe+=l*St,Xe+=l*pt,Ze+=l*Et,at+=l*dt,He+=l*Je,Qe+=l*Ct,Ne+=l*At,l=x[1],_e+=l*lt,ve+=l*rt,De+=l*ht,Le+=l*_t,we+=l*ot,bt+=l*it,yt+=l*wt,st+=l*Pt,Fe+=l*ft,Xe+=l*St,Ze+=l*pt,at+=l*Et,He+=l*dt,Qe+=l*Je,Ne+=l*Ct,ke+=l*At,l=x[2],ve+=l*lt,De+=l*rt,Le+=l*ht,we+=l*_t,bt+=l*ot,yt+=l*it,st+=l*wt,Fe+=l*Pt,Xe+=l*ft,Ze+=l*St,at+=l*pt,He+=l*Et,Qe+=l*dt,Ne+=l*Je,ke+=l*Ct,ut+=l*At,l=x[3],De+=l*lt,Le+=l*rt,we+=l*ht,bt+=l*_t,yt+=l*ot,st+=l*it,Fe+=l*wt,Xe+=l*Pt,Ze+=l*ft,at+=l*St,He+=l*pt,Qe+=l*Et,Ne+=l*dt,ke+=l*Je,ut+=l*Ct,je+=l*At,l=x[4],Le+=l*lt,we+=l*rt,bt+=l*ht,yt+=l*_t,st+=l*ot,Fe+=l*it,Xe+=l*wt,Ze+=l*Pt,at+=l*ft,He+=l*St,Qe+=l*pt,Ne+=l*Et,ke+=l*dt,ut+=l*Je,je+=l*Ct,It+=l*At,l=x[5],we+=l*lt,bt+=l*rt,yt+=l*ht,st+=l*_t,Fe+=l*ot,Xe+=l*it,Ze+=l*wt,at+=l*Pt,He+=l*ft,Qe+=l*St,Ne+=l*pt,ke+=l*Et,ut+=l*dt,je+=l*Je,It+=l*Ct,Lt+=l*At,l=x[6],bt+=l*lt,yt+=l*rt,st+=l*ht,Fe+=l*_t,Xe+=l*ot,Ze+=l*it,at+=l*wt,He+=l*Pt,Qe+=l*ft,Ne+=l*St,ke+=l*pt,ut+=l*Et,je+=l*dt,It+=l*Je,Lt+=l*Ct,Vt+=l*At,l=x[7],yt+=l*lt,st+=l*rt,Fe+=l*ht,Xe+=l*_t,Ze+=l*ot,at+=l*it,He+=l*wt,Qe+=l*Pt,Ne+=l*ft,ke+=l*St,ut+=l*pt,je+=l*Et,It+=l*dt,Lt+=l*Je,Vt+=l*Ct,Ht+=l*At,l=x[8],st+=l*lt,Fe+=l*rt,Xe+=l*ht,Ze+=l*_t,at+=l*ot,He+=l*it,Qe+=l*wt,Ne+=l*Pt,ke+=l*ft,ut+=l*St,je+=l*pt,It+=l*Et,Lt+=l*dt,Vt+=l*Je,Ht+=l*Ct,Mt+=l*At,l=x[9],Fe+=l*lt,Xe+=l*rt,Ze+=l*ht,at+=l*_t,He+=l*ot,Qe+=l*it,Ne+=l*wt,ke+=l*Pt,ut+=l*ft,je+=l*St,It+=l*pt,Lt+=l*Et,Vt+=l*dt,Ht+=l*Je,Mt+=l*Ct,Kt+=l*At,l=x[10],Xe+=l*lt,Ze+=l*rt,at+=l*ht,He+=l*_t,Qe+=l*ot,Ne+=l*it,ke+=l*wt,ut+=l*Pt,je+=l*ft,It+=l*St,Lt+=l*pt,Vt+=l*Et,Ht+=l*dt,Mt+=l*Je,Kt+=l*Ct,tr+=l*At,l=x[11],Ze+=l*lt,at+=l*rt,He+=l*ht,Qe+=l*_t,Ne+=l*ot,ke+=l*it,ut+=l*wt,je+=l*Pt,It+=l*ft,Lt+=l*St,Vt+=l*pt,Ht+=l*Et,Mt+=l*dt,Kt+=l*Je,tr+=l*Ct,Fr+=l*At,l=x[12],at+=l*lt,He+=l*rt,Qe+=l*ht,Ne+=l*_t,ke+=l*ot,ut+=l*it,je+=l*wt,It+=l*Pt,Lt+=l*ft,Vt+=l*St,Ht+=l*pt,Mt+=l*Et,Kt+=l*dt,tr+=l*Je,Fr+=l*Ct,Wt+=l*At,l=x[13],He+=l*lt,Qe+=l*rt,Ne+=l*ht,ke+=l*_t,ut+=l*ot,je+=l*it,It+=l*wt,Lt+=l*Pt,Vt+=l*ft,Ht+=l*St,Mt+=l*pt,Kt+=l*Et,tr+=l*dt,Fr+=l*Je,Wt+=l*Ct,kr+=l*At,l=x[14],Qe+=l*lt,Ne+=l*rt,ke+=l*ht,ut+=l*_t,je+=l*ot,It+=l*it,Lt+=l*wt,Vt+=l*Pt,Ht+=l*ft,Mt+=l*St,Kt+=l*pt,tr+=l*Et,Fr+=l*dt,Wt+=l*Je,kr+=l*Ct,oi+=l*At,l=x[15],Ne+=l*lt,ke+=l*rt,ut+=l*ht,je+=l*_t,It+=l*ot,Lt+=l*it,Vt+=l*wt,Ht+=l*Pt,Mt+=l*ft,Kt+=l*St,tr+=l*pt,Fr+=l*Et,Wt+=l*dt,kr+=l*Je,oi+=l*Ct,Oi+=l*At,ee+=38*ke,_e+=38*ut,ve+=38*je,De+=38*It,Le+=38*Lt,we+=38*Vt,bt+=38*Ht,yt+=38*Mt,st+=38*Kt,Fe+=38*tr,Xe+=38*Fr,Ze+=38*Wt,at+=38*kr,He+=38*oi,Qe+=38*Oi,T=1,l=ee+T+65535,T=Math.floor(l/65536),ee=l-T*65536,l=_e+T+65535,T=Math.floor(l/65536),_e=l-T*65536,l=ve+T+65535,T=Math.floor(l/65536),ve=l-T*65536,l=De+T+65535,T=Math.floor(l/65536),De=l-T*65536,l=Le+T+65535,T=Math.floor(l/65536),Le=l-T*65536,l=we+T+65535,T=Math.floor(l/65536),we=l-T*65536,l=bt+T+65535,T=Math.floor(l/65536),bt=l-T*65536,l=yt+T+65535,T=Math.floor(l/65536),yt=l-T*65536,l=st+T+65535,T=Math.floor(l/65536),st=l-T*65536,l=Fe+T+65535,T=Math.floor(l/65536),Fe=l-T*65536,l=Xe+T+65535,T=Math.floor(l/65536),Xe=l-T*65536,l=Ze+T+65535,T=Math.floor(l/65536),Ze=l-T*65536,l=at+T+65535,T=Math.floor(l/65536),at=l-T*65536,l=He+T+65535,T=Math.floor(l/65536),He=l-T*65536,l=Qe+T+65535,T=Math.floor(l/65536),Qe=l-T*65536,l=Ne+T+65535,T=Math.floor(l/65536),Ne=l-T*65536,ee+=T-1+37*(T-1),T=1,l=ee+T+65535,T=Math.floor(l/65536),ee=l-T*65536,l=_e+T+65535,T=Math.floor(l/65536),_e=l-T*65536,l=ve+T+65535,T=Math.floor(l/65536),ve=l-T*65536,l=De+T+65535,T=Math.floor(l/65536),De=l-T*65536,l=Le+T+65535,T=Math.floor(l/65536),Le=l-T*65536,l=we+T+65535,T=Math.floor(l/65536),we=l-T*65536,l=bt+T+65535,T=Math.floor(l/65536),bt=l-T*65536,l=yt+T+65535,T=Math.floor(l/65536),yt=l-T*65536,l=st+T+65535,T=Math.floor(l/65536),st=l-T*65536,l=Fe+T+65535,T=Math.floor(l/65536),Fe=l-T*65536,l=Xe+T+65535,T=Math.floor(l/65536),Xe=l-T*65536,l=Ze+T+65535,T=Math.floor(l/65536),Ze=l-T*65536,l=at+T+65535,T=Math.floor(l/65536),at=l-T*65536,l=He+T+65535,T=Math.floor(l/65536),He=l-T*65536,l=Qe+T+65535,T=Math.floor(l/65536),Qe=l-T*65536,l=Ne+T+65535,T=Math.floor(l/65536),Ne=l-T*65536,ee+=T-1+37*(T-1),D[0]=ee,D[1]=_e,D[2]=ve,D[3]=De,D[4]=Le,D[5]=we,D[6]=bt,D[7]=yt,D[8]=st,D[9]=Fe,D[10]=Xe,D[11]=Ze,D[12]=at,D[13]=He,D[14]=Qe,D[15]=Ne}function W(D,x){H(D,x,x)}function ge(D,x){const S=s();let l;for(l=0;l<16;l++)S[l]=x[l];for(l=253;l>=0;l--)W(S,S),l!==2&&l!==4&&H(S,S,x);for(l=0;l<16;l++)D[l]=S[l]}function re(D,x){const S=s();let l;for(l=0;l<16;l++)S[l]=x[l];for(l=250;l>=0;l--)W(S,S),l!==1&&H(S,S,x);for(l=0;l<16;l++)D[l]=S[l]}function ue(D,x){const S=s(),l=s(),T=s(),ee=s(),_e=s(),ve=s(),De=s(),Le=s(),we=s();N(S,D[1],D[0]),N(we,x[1],x[0]),H(S,S,we),he(l,D[0],D[1]),he(we,x[0],x[1]),H(l,l,we),H(T,D[3],x[3]),H(T,T,g),H(ee,D[2],x[2]),he(ee,ee,ee),N(_e,l,S),N(ve,ee,T),he(De,ee,T),he(Le,l,S),H(D[0],_e,ve),H(D[1],Le,De),H(D[2],De,ve),H(D[3],_e,Le)}function xe(D,x,S){for(let l=0;l<4;l++)z(D[l],x[l],S)}function Ve(D,x){const S=s(),l=s(),T=s();ge(T,x[2]),H(S,x[0],T),H(l,x[1],T),ie(D,l),D[31]^=fe(S)<<7}function E(D,x,S){G(D[0],h),G(D[1],f),G(D[2],f),G(D[3],h);for(let l=255;l>=0;--l){const T=S[l/8|0]>>(l&7)&1;xe(D,x,T),ue(x,D),ue(D,D),xe(D,x,T)}}function O(D,x){const S=[s(),s(),s(),s()];G(S[0],P),G(S[1],F),G(S[2],f),H(S[3],P,F),E(D,S,x)}function X(D){if(D.length!==o.SEED_LENGTH)throw new Error(`ed25519: seed must be ${o.SEED_LENGTH} bytes`);const x=(0,t.hash)(D);x[0]&=248,x[31]&=127,x[31]|=64;const S=new Uint8Array(32),l=[s(),s(),s(),s()];O(l,x),Ve(S,l);const T=new Uint8Array(64);return T.set(D),T.set(S,32),{publicKey:S,secretKey:T}}o.generateKeyPairFromSeed=X;function ce(D){const x=(0,r.randomBytes)(32,D),S=X(x);return(0,n.wipe)(x),S}o.generateKeyPair=ce;function q(D){if(D.length!==o.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${o.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(D.subarray(32))}o.extractPublicKeyFromSecretKey=q;const U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k(D,x){let S,l,T,ee;for(l=63;l>=32;--l){for(S=0,T=l-32,ee=l-12;T<ee;++T)x[T]+=S-16*x[l]*U[T-(l-32)],S=Math.floor((x[T]+128)/256),x[T]-=S*256;x[T]+=S,x[l]=0}for(S=0,T=0;T<32;T++)x[T]+=S-(x[31]>>4)*U[T],S=x[T]>>8,x[T]&=255;for(T=0;T<32;T++)x[T]-=S*U[T];for(l=0;l<32;l++)x[l+1]+=x[l]>>8,D[l]=x[l]&255}function K(D){const x=new Float64Array(64);for(let S=0;S<64;S++)x[S]=D[S];for(let S=0;S<64;S++)D[S]=0;k(D,x)}function Ye(D,x){const S=new Float64Array(64),l=[s(),s(),s(),s()],T=(0,t.hash)(D.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const ee=new Uint8Array(64);ee.set(T.subarray(32),32);const _e=new t.SHA512;_e.update(ee.subarray(32)),_e.update(x);const ve=_e.digest();_e.clean(),K(ve),O(l,ve),Ve(ee,l),_e.reset(),_e.update(ee.subarray(0,32)),_e.update(D.subarray(32)),_e.update(x);const De=_e.digest();K(De);for(let Le=0;Le<32;Le++)S[Le]=ve[Le];for(let Le=0;Le<32;Le++)for(let we=0;we<32;we++)S[Le+we]+=De[Le]*T[we];return k(ee.subarray(32),S),ee}o.sign=Ye;function $e(D,x){const S=s(),l=s(),T=s(),ee=s(),_e=s(),ve=s(),De=s();return G(D[2],f),le(D[1],x),W(T,D[1]),H(ee,T,m),N(T,T,D[2]),he(ee,D[2],ee),W(_e,ee),W(ve,_e),H(De,ve,_e),H(S,De,T),H(S,S,ee),re(S,S),H(S,S,T),H(S,S,ee),H(S,S,ee),H(D[0],S,ee),W(l,D[0]),H(l,l,ee),de(l,T)&&H(D[0],D[0],C),W(l,D[0]),H(l,l,ee),de(l,T)?-1:(fe(D[0])===x[31]>>7&&N(D[0],h,D[0]),H(D[3],D[0],D[1]),0)}function Br(D,x,S){const l=new Uint8Array(32),T=[s(),s(),s(),s()],ee=[s(),s(),s(),s()];if(S.length!==o.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${o.SIGNATURE_LENGTH} bytes`);if($e(ee,D))return!1;const _e=new t.SHA512;_e.update(S.subarray(0,32)),_e.update(D),_e.update(x);const ve=_e.digest();return K(ve),E(T,ee,ve),O(ee,S.subarray(32)),ue(T,ee),Ve(l,T),!Te(S,l)}o.verify=Br;function Oe(D){let x=[s(),s(),s(),s()];if($e(x,D))throw new Error("Ed25519: invalid public key");let S=s(),l=s(),T=x[1];he(S,f,T),N(l,f,T),ge(l,l),H(S,S,l);let ee=new Uint8Array(32);return ie(ee,S),ee}o.convertPublicKeyToX25519=Oe;function Ot(D){const x=(0,t.hash)(D.subarray(0,32));x[0]&=248,x[31]&=127,x[31]|=64;const S=new Uint8Array(x.subarray(0,32));return(0,n.wipe)(x),S}o.convertSecretKeyToX25519=Ot})(Fc);const Zm="EdDSA",Qm="JWT",E_=".",m_="base64url",ev="utf8",tv="utf8",rv=":",iv="did",nv="key",lh="base58btc",sv="z",av="K36",ov=32;function ga(o){return ma(Nc(es(o),ev),m_)}function v_(o){const r=Nc(av,lh),t=sv+ma(Cy([r,o]),lh);return[iv,nv,t].join(rv)}function cv(o){return ma(o,m_)}function uv(o){return Nc([ga(o.header),ga(o.payload)].join(E_),tv)}function lv(o){return[ga(o.header),ga(o.payload),cv(o.signature)].join(E_)}function hh(o=t_.randomBytes(ov)){return Fc.generateKeyPairFromSeed(o)}async function hv(o,r,t,n,s=ne.fromMiliseconds(Date.now())){const c={alg:Zm,typ:Qm},h=v_(n.publicKey),f=s+t,m={iss:h,sub:o,aud:r,iat:s,exp:f},g=uv({header:c,payload:m}),P=Fc.sign(n.secretKey,g);return lv({header:c,payload:m,signature:P})}const _v="PARSE_ERROR",fv="INVALID_REQUEST",pv="METHOD_NOT_FOUND",dv="INVALID_PARAMS",R_="INTERNAL_ERROR",Mc="SERVER_ERROR",gv=[-32700,-32600,-32601,-32602,-32603],Yn={[_v]:{code:-32700,message:"Parse error"},[fv]:{code:-32600,message:"Invalid Request"},[pv]:{code:-32601,message:"Method not found"},[dv]:{code:-32602,message:"Invalid params"},[R_]:{code:-32603,message:"Internal error"},[Mc]:{code:-32e3,message:"Server error"}},T_=Mc;function yv(o){return gv.includes(o)}function _h(o){return Object.keys(Yn).includes(o)?Yn[o]:Yn[T_]}function Ev(o){const r=Object.values(Yn).find(t=>t.code===o);return r||Yn[T_]}function O_(o,r,t){return o.message.includes("getaddrinfo ENOTFOUND")||o.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${r}`):o}var b_={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bc=function(o,r){return bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])},bc(o,r)};function mv(o,r){bc(o,r);function t(){this.constructor=o}o.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ic=function(){return Ic=Object.assign||function(r){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(r[c]=t[c])}return r},Ic.apply(this,arguments)};function vv(o,r){var t={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(t[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(o);s<n.length;s++)r.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(o,n[s])&&(t[n[s]]=o[n[s]]);return t}function Rv(o,r,t,n){var s=arguments.length,c=s<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,t):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,r,t,n);else for(var f=o.length-1;f>=0;f--)(h=o[f])&&(c=(s<3?h(c):s>3?h(r,t,c):h(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c}function Tv(o,r){return function(t,n){r(t,n,o)}}function Ov(o,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,r)}function bv(o,r,t,n){function s(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function f(P){try{g(n.next(P))}catch(F){h(F)}}function m(P){try{g(n.throw(P))}catch(F){h(F)}}function g(P){P.done?c(P.value):s(P.value).then(f,m)}g((n=n.apply(o,r||[])).next())})}function Iv(o,r){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,s,c,h;return h={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function f(g){return function(P){return m([g,P])}}function m(g){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(c=g[0]&2?s.return:g[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,g[1])).done)return c;switch(s=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,s=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=r.call(o,t)}catch(P){g=[6,P],s=0}finally{n=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function wv(o,r,t,n){n===void 0&&(n=t),o[n]=r[t]}function Pv(o,r){for(var t in o)t!=="default"&&!r.hasOwnProperty(t)&&(r[t]=o[t])}function wc(o){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&o[r],n=0;if(t)return t.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function I_(o,r){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),s,c=[],h;try{for(;(r===void 0||r-- >0)&&!(s=n.next()).done;)c.push(s.value)}catch(f){h={error:f}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(h)throw h.error}}return c}function Sv(){for(var o=[],r=0;r<arguments.length;r++)o=o.concat(I_(arguments[r]));return o}function Cv(){for(var o=0,r=0,t=arguments.length;r<t;r++)o+=arguments[r].length;for(var n=Array(o),s=0,r=0;r<t;r++)for(var c=arguments[r],h=0,f=c.length;h<f;h++,s++)n[s]=c[h];return n}function ts(o){return this instanceof ts?(this.v=o,this):new ts(o)}function Av(o,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(o,r||[]),s,c=[];return s={},h("next"),h("throw"),h("return"),s[Symbol.asyncIterator]=function(){return this},s;function h(C){n[C]&&(s[C]=function(G){return new Promise(function(B,z){c.push([C,G,B,z])>1||f(C,G)})})}function f(C,G){try{m(n[C](G))}catch(B){F(c[0][3],B)}}function m(C){C.value instanceof ts?Promise.resolve(C.value.v).then(g,P):F(c[0][2],C)}function g(C){f("next",C)}function P(C){f("throw",C)}function F(C,G){C(G),c.shift(),c.length&&f(c[0][0],c[0][1])}}function xv(o){var r,t;return r={},n("next"),n("throw",function(s){throw s}),n("return"),r[Symbol.iterator]=function(){return this},r;function n(s,c){r[s]=o[s]?function(h){return(t=!t)?{value:ts(o[s](h)),done:s==="return"}:c?c(h):h}:c}}function Dv(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=o[Symbol.asyncIterator],t;return r?r.call(o):(o=typeof wc=="function"?wc(o):o[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=o[c]&&function(h){return new Promise(function(f,m){h=o[c](h),s(f,m,h.done,h.value)})}}function s(c,h,f,m){Promise.resolve(m).then(function(g){c({value:g,done:f})},h)}}function Nv(o,r){return Object.defineProperty?Object.defineProperty(o,"raw",{value:r}):o.raw=r,o}function Lv(o){if(o&&o.__esModule)return o;var r={};if(o!=null)for(var t in o)Object.hasOwnProperty.call(o,t)&&(r[t]=o[t]);return r.default=o,r}function Bv(o){return o&&o.__esModule?o:{default:o}}function Fv(o,r){if(!r.has(o))throw new TypeError("attempted to get private field on non-instance");return r.get(o)}function Mv(o,r,t){if(!r.has(o))throw new TypeError("attempted to set private field on non-instance");return r.set(o,t),t}const jv=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Ic},__asyncDelegator:xv,__asyncGenerator:Av,__asyncValues:Dv,__await:ts,__awaiter:bv,__classPrivateFieldGet:Fv,__classPrivateFieldSet:Mv,__createBinding:wv,__decorate:Rv,__exportStar:Pv,__extends:mv,__generator:Iv,__importDefault:Bv,__importStar:Lv,__makeTemplateObject:Nv,__metadata:Ov,__param:Tv,__read:I_,__rest:vv,__spread:Sv,__spreadArrays:Cv,__values:wc},Symbol.toStringTag,{value:"Module"})),Gv=rs(jv);var ri={},fh;function Vv(){if(fh)return ri;fh=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.isBrowserCryptoAvailable=ri.getSubtleCrypto=ri.getBrowerCrypto=void 0;function o(){return(ur===null||ur===void 0?void 0:ur.crypto)||(ur===null||ur===void 0?void 0:ur.msCrypto)||{}}ri.getBrowerCrypto=o;function r(){const n=o();return n.subtle||n.webkitSubtle}ri.getSubtleCrypto=r;function t(){return!!o()&&!!r()}return ri.isBrowserCryptoAvailable=t,ri}var ii={},ph;function Hv(){if(ph)return ii;ph=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.isBrowser=ii.isNode=ii.isReactNative=void 0;function o(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ii.isReactNative=o;function r(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ii.isNode=r;function t(){return!o()&&!r()}return ii.isBrowser=t,ii}(function(o){Object.defineProperty(o,"__esModule",{value:!0});const r=Gv;r.__exportStar(Vv(),o),r.__exportStar(Hv(),o)})(b_);function jc(o=3){const r=Date.now()*Math.pow(10,o),t=Math.floor(Math.random()*Math.pow(10,o));return r+t}function w_(o=6){return BigInt(jc(o))}function fn(o,r,t){return{id:t||jc(),jsonrpc:"2.0",method:o,params:r}}function Gc(o,r){return{id:o,jsonrpc:"2.0",result:r}}function Ta(o,r,t){return{id:o,jsonrpc:"2.0",error:Uv(r,t)}}function Uv(o,r){return typeof o>"u"?_h(R_):(typeof o=="string"&&(o=Object.assign(Object.assign({},_h(Mc)),{message:o})),typeof r<"u"&&(o.data=r),yv(o.code)&&(o=Ev(o.code)),o)}class $v{}class kv extends $v{constructor(){super()}}class qv extends kv{constructor(r){super()}}const zv="^https?:",Kv="^wss?:";function Wv(o){const r=o.match(new RegExp(/^\w+:/,"gi"));if(!(!r||!r.length))return r[0]}function P_(o,r){const t=Wv(o);return typeof t>"u"?!1:new RegExp(r).test(t)}function dh(o){return P_(o,zv)}function gh(o){return P_(o,Kv)}function Yv(o){return new RegExp("wss?://localhost(:d{2,5})?").test(o)}function S_(o){return typeof o=="object"&&"id"in o&&"jsonrpc"in o&&o.jsonrpc==="2.0"}function Vc(o){return S_(o)&&"method"in o}function Oa(o){return S_(o)&&(ai(o)||Lr(o))}function ai(o){return"result"in o}function Lr(o){return"error"in o}class Ri extends qv{constructor(r){super(r),this.events=new wr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async request(r,t){return this.requestStrict(fn(r.method,r.params||[],r.id||w_().toString()),t)}async requestStrict(r,t){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(c){s(c)}this.events.on(`${r.id}`,c=>{Lr(c)?s(c.error):n(c.result)});try{await this.connection.send(r,t)}catch(c){s(c)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),Oa(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&r.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),typeof r=="string"&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Jv=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Xv=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",yh=o=>o.split("?")[0],Eh=10,Zv=Jv();class Qv{constructor(r){if(this.url=r,this.events=new wr.EventEmitter,this.registering=!1,!gh(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),r()},this.socket.close()})}async send(r,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(es(r))}catch(n){this.onError(r.id,n)}}register(r=this.url){if(!gh(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),s(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=r,this.registering=!0,new Promise((t,n)=>{const s=b_.isReactNative()?void 0:{rejectUnauthorized:!Yv(r)},c=new Zv(r,[],s);Xv()?c.onerror=h=>{const f=h;n(this.emitError(f.error))}:c.on("error",h=>{n(this.emitError(h))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(r){r.onmessage=t=>this.onPayload(t),r.onclose=t=>this.onClose(t),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const t=typeof r.data=="string"?Bc(r.data):r.data;this.events.emit("payload",t)}onError(r,t){const n=this.parseError(t),s=n.message||n.toString(),c=Ta(r,s);this.events.emit("payload",c)}parseError(r,t=this.url){return O_(r,yh(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Eh&&this.events.setMaxListeners(Eh)}emitError(r){const t=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${yh(this.url)}`));return this.events.emit("register_error",t),t}}var ya={exports:{}};ya.exports;(function(o,r){var t=200,n="__lodash_hash_undefined__",s=1,c=2,h=9007199254740991,f="[object Arguments]",m="[object Array]",g="[object AsyncFunction]",P="[object Boolean]",F="[object Date]",C="[object Error]",G="[object Function]",B="[object GeneratorFunction]",z="[object Map]",ie="[object Number]",Te="[object Null]",de="[object Object]",fe="[object Promise]",le="[object Proxy]",he="[object RegExp]",N="[object Set]",H="[object String]",W="[object Symbol]",ge="[object Undefined]",re="[object WeakMap]",ue="[object ArrayBuffer]",xe="[object DataView]",Ve="[object Float32Array]",E="[object Float64Array]",O="[object Int8Array]",X="[object Int16Array]",ce="[object Int32Array]",q="[object Uint8Array]",U="[object Uint8ClampedArray]",k="[object Uint16Array]",K="[object Uint32Array]",Ye=/[\\^$.*+?()[\]{}|]/g,$e=/^\[object .+?Constructor\]$/,Br=/^(?:0|[1-9]\d*)$/,Oe={};Oe[Ve]=Oe[E]=Oe[O]=Oe[X]=Oe[ce]=Oe[q]=Oe[U]=Oe[k]=Oe[K]=!0,Oe[f]=Oe[m]=Oe[ue]=Oe[P]=Oe[xe]=Oe[F]=Oe[C]=Oe[G]=Oe[z]=Oe[ie]=Oe[de]=Oe[he]=Oe[N]=Oe[H]=Oe[re]=!1;var Ot=typeof ur=="object"&&ur&&ur.Object===Object&&ur,D=typeof self=="object"&&self&&self.Object===Object&&self,x=Ot||D||Function("return this")(),S=r&&!r.nodeType&&r,l=S&&!0&&o&&!o.nodeType&&o,T=l&&l.exports===S,ee=T&&Ot.process,_e=function(){try{return ee&&ee.binding&&ee.binding("util")}catch{}}(),ve=_e&&_e.isTypedArray;function De(y,b){for(var V=-1,J=y==null?0:y.length,ze=0,ye=[];++V<J;){var et=y[V];b(et,V,y)&&(ye[ze++]=et)}return ye}function Le(y,b){for(var V=-1,J=b.length,ze=y.length;++V<J;)y[ze+V]=b[V];return y}function we(y,b){for(var V=-1,J=y==null?0:y.length;++V<J;)if(b(y[V],V,y))return!0;return!1}function bt(y,b){for(var V=-1,J=Array(y);++V<y;)J[V]=b(V);return J}function yt(y){return function(b){return y(b)}}function st(y,b){return y.has(b)}function Fe(y,b){return y==null?void 0:y[b]}function Xe(y){var b=-1,V=Array(y.size);return y.forEach(function(J,ze){V[++b]=[ze,J]}),V}function Ze(y,b){return function(V){return y(b(V))}}function at(y){var b=-1,V=Array(y.size);return y.forEach(function(J){V[++b]=J}),V}var He=Array.prototype,Qe=Function.prototype,Ne=Object.prototype,ke=x["__core-js_shared__"],ut=Qe.toString,je=Ne.hasOwnProperty,It=function(){var y=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Lt=Ne.toString,Vt=RegExp("^"+ut.call(je).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=T?x.Buffer:void 0,Mt=x.Symbol,Kt=x.Uint8Array,tr=Ne.propertyIsEnumerable,Fr=He.splice,Wt=Mt?Mt.toStringTag:void 0,kr=Object.getOwnPropertySymbols,oi=Ht?Ht.isBuffer:void 0,Oi=Ze(Object.keys,Object),lt=lr(x,"DataView"),rt=lr(x,"Map"),ht=lr(x,"Promise"),_t=lr(x,"Set"),ot=lr(x,"WeakMap"),it=lr(Object,"create"),wt=zr(lt),Pt=zr(rt),ft=zr(ht),St=zr(_t),pt=zr(ot),Et=Mt?Mt.prototype:void 0,dt=Et?Et.valueOf:void 0;function Je(y){var b=-1,V=y==null?0:y.length;for(this.clear();++b<V;){var J=y[b];this.set(J[0],J[1])}}function Ct(){this.__data__=it?it(null):{},this.size=0}function At(y){var b=this.has(y)&&delete this.__data__[y];return this.size-=b?1:0,b}function wa(y){var b=this.__data__;if(it){var V=b[y];return V===n?void 0:V}return je.call(b,y)?b[y]:void 0}function Pa(y){var b=this.__data__;return it?b[y]!==void 0:je.call(b,y)}function Sa(y,b){var V=this.__data__;return this.size+=this.has(y)?0:1,V[y]=it&&b===void 0?n:b,this}Je.prototype.clear=Ct,Je.prototype.delete=At,Je.prototype.get=wa,Je.prototype.has=Pa,Je.prototype.set=Sa;function gr(y){var b=-1,V=y==null?0:y.length;for(this.clear();++b<V;){var J=y[b];this.set(J[0],J[1])}}function Ca(){this.__data__=[],this.size=0}function Aa(y){var b=this.__data__,V=bi(b,y);if(V<0)return!1;var J=b.length-1;return V==J?b.pop():Fr.call(b,V,1),--this.size,!0}function xa(y){var b=this.__data__,V=bi(b,y);return V<0?void 0:b[V][1]}function Da(y){return bi(this.__data__,y)>-1}function Na(y,b){var V=this.__data__,J=bi(V,y);return J<0?(++this.size,V.push([y,b])):V[J][1]=b,this}gr.prototype.clear=Ca,gr.prototype.delete=Aa,gr.prototype.get=xa,gr.prototype.has=Da,gr.prototype.set=Na;function qr(y){var b=-1,V=y==null?0:y.length;for(this.clear();++b<V;){var J=y[b];this.set(J[0],J[1])}}function Ui(){this.size=0,this.__data__={hash:new Je,map:new(rt||gr),string:new Je}}function La(y){var b=ci(this,y).delete(y);return this.size-=b?1:0,b}function $i(y){return ci(this,y).get(y)}function Ba(y){return ci(this,y).has(y)}function Fa(y,b){var V=ci(this,y),J=V.size;return V.set(y,b),this.size+=V.size==J?0:1,this}qr.prototype.clear=Ui,qr.prototype.delete=La,qr.prototype.get=$i,qr.prototype.has=Ba,qr.prototype.set=Fa;function ki(y){var b=-1,V=y==null?0:y.length;for(this.__data__=new qr;++b<V;)this.add(y[b])}function ss(y){return this.__data__.set(y,n),this}function as(y){return this.__data__.has(y)}ki.prototype.add=ki.prototype.push=ss,ki.prototype.has=as;function Pr(y){var b=this.__data__=new gr(y);this.size=b.size}function Ma(){this.__data__=new gr,this.size=0}function ja(y){var b=this.__data__,V=b.delete(y);return this.size=b.size,V}function Ga(y){return this.__data__.get(y)}function Va(y){return this.__data__.has(y)}function os(y,b){var V=this.__data__;if(V instanceof gr){var J=V.__data__;if(!rt||J.length<t-1)return J.push([y,b]),this.size=++V.size,this;V=this.__data__=new qr(J)}return V.set(y,b),this.size=V.size,this}Pr.prototype.clear=Ma,Pr.prototype.delete=ja,Pr.prototype.get=Ga,Pr.prototype.has=Va,Pr.prototype.set=os;function cs(y,b){var V=Ki(y),J=!V&&vs(y),ze=!V&&!J&&mn(y),ye=!V&&!J&&!ze&&Os(y),et=V||J||ze||ye,xt=et?bt(y.length,String):[],Se=xt.length;for(var Ke in y)(b||je.call(y,Ke))&&!(et&&(Ke=="length"||ze&&(Ke=="offset"||Ke=="parent")||ye&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||ds(Ke,Se)))&&xt.push(Ke);return xt}function bi(y,b){for(var V=y.length;V--;)if(ms(y[V][0],b))return V;return-1}function yn(y,b,V){var J=b(y);return Ki(y)?J:Le(J,V(y))}function Ii(y){return y==null?y===void 0?ge:Te:Wt&&Wt in Object(y)?fs(y):$a(y)}function En(y){return Pi(y)&&Ii(y)==f}function wi(y,b,V,J,ze){return y===b?!0:y==null||b==null||!Pi(y)&&!Pi(b)?y!==y&&b!==b:us(y,b,V,J,wi,ze)}function us(y,b,V,J,ze,ye){var et=Ki(y),xt=Ki(b),Se=et?m:Mr(y),Ke=xt?m:Mr(b);Se=Se==f?de:Se,Ke=Ke==f?de:Ke;var mt=Se==de,rr=Ke==de,Dt=Se==Ke;if(Dt&&mn(y)){if(!mn(b))return!1;et=!0,mt=!1}if(Dt&&!mt)return ye||(ye=new Pr),et||Os(y)?qi(y,b,V,J,ze,ye):Ua(y,b,Se,V,J,ze,ye);if(!(V&s)){var tt=mt&&je.call(y,"__wrapped__"),Yt=rr&&je.call(b,"__wrapped__");if(tt||Yt){var Sr=tt?y.value():y,yr=Yt?b.value():b;return ye||(ye=new Pr),ze(Sr,yr,V,J,ye)}}return Dt?(ye||(ye=new Pr),_s(y,b,V,J,ze,ye)):!1}function Ha(y){if(!Ts(y)||ys(y))return!1;var b=Wi(y)?Vt:$e;return b.test(zr(y))}function ls(y){return Pi(y)&&Rs(y.length)&&!!Oe[Ii(y)]}function hs(y){if(!Es(y))return Oi(y);var b=[];for(var V in Object(y))je.call(y,V)&&V!="constructor"&&b.push(V);return b}function qi(y,b,V,J,ze,ye){var et=V&s,xt=y.length,Se=b.length;if(xt!=Se&&!(et&&Se>xt))return!1;var Ke=ye.get(y);if(Ke&&ye.get(b))return Ke==b;var mt=-1,rr=!0,Dt=V&c?new ki:void 0;for(ye.set(y,b),ye.set(b,y);++mt<xt;){var tt=y[mt],Yt=b[mt];if(J)var Sr=et?J(Yt,tt,mt,b,y,ye):J(tt,Yt,mt,y,b,ye);if(Sr!==void 0){if(Sr)continue;rr=!1;break}if(Dt){if(!we(b,function(yr,jr){if(!st(Dt,jr)&&(tt===yr||ze(tt,yr,V,J,ye)))return Dt.push(jr)})){rr=!1;break}}else if(!(tt===Yt||ze(tt,Yt,V,J,ye))){rr=!1;break}}return ye.delete(y),ye.delete(b),rr}function Ua(y,b,V,J,ze,ye,et){switch(V){case xe:if(y.byteLength!=b.byteLength||y.byteOffset!=b.byteOffset)return!1;y=y.buffer,b=b.buffer;case ue:return!(y.byteLength!=b.byteLength||!ye(new Kt(y),new Kt(b)));case P:case F:case ie:return ms(+y,+b);case C:return y.name==b.name&&y.message==b.message;case he:case H:return y==b+"";case z:var xt=Xe;case N:var Se=J&s;if(xt||(xt=at),y.size!=b.size&&!Se)return!1;var Ke=et.get(y);if(Ke)return Ke==b;J|=c,et.set(y,b);var mt=qi(xt(y),xt(b),J,ze,ye,et);return et.delete(y),mt;case W:if(dt)return dt.call(y)==dt.call(b)}return!1}function _s(y,b,V,J,ze,ye){var et=V&s,xt=zi(y),Se=xt.length,Ke=zi(b),mt=Ke.length;if(Se!=mt&&!et)return!1;for(var rr=Se;rr--;){var Dt=xt[rr];if(!(et?Dt in b:je.call(b,Dt)))return!1}var tt=ye.get(y);if(tt&&ye.get(b))return tt==b;var Yt=!0;ye.set(y,b),ye.set(b,y);for(var Sr=et;++rr<Se;){Dt=xt[rr];var yr=y[Dt],jr=b[Dt];if(J)var vn=et?J(jr,yr,Dt,b,y,ye):J(yr,jr,Dt,y,b,ye);if(!(vn===void 0?yr===jr||ze(yr,jr,V,J,ye):vn)){Yt=!1;break}Sr||(Sr=Dt=="constructor")}if(Yt&&!Sr){var Si=y.constructor,jt=b.constructor;Si!=jt&&"constructor"in y&&"constructor"in b&&!(typeof Si=="function"&&Si instanceof Si&&typeof jt=="function"&&jt instanceof jt)&&(Yt=!1)}return ye.delete(y),ye.delete(b),Yt}function zi(y){return yn(y,za,ps)}function ci(y,b){var V=y.__data__;return gs(b)?V[typeof b=="string"?"string":"hash"]:V.map}function lr(y,b){var V=Fe(y,b);return Ha(V)?V:void 0}function fs(y){var b=je.call(y,Wt),V=y[Wt];try{y[Wt]=void 0;var J=!0}catch{}var ze=Lt.call(y);return J&&(b?y[Wt]=V:delete y[Wt]),ze}var ps=kr?function(y){return y==null?[]:(y=Object(y),De(kr(y),function(b){return tr.call(y,b)}))}:qe,Mr=Ii;(lt&&Mr(new lt(new ArrayBuffer(1)))!=xe||rt&&Mr(new rt)!=z||ht&&Mr(ht.resolve())!=fe||_t&&Mr(new _t)!=N||ot&&Mr(new ot)!=re)&&(Mr=function(y){var b=Ii(y),V=b==de?y.constructor:void 0,J=V?zr(V):"";if(J)switch(J){case wt:return xe;case Pt:return z;case ft:return fe;case St:return N;case pt:return re}return b});function ds(y,b){return b=b??h,!!b&&(typeof y=="number"||Br.test(y))&&y>-1&&y%1==0&&y<b}function gs(y){var b=typeof y;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?y!=="__proto__":y===null}function ys(y){return!!It&&It in y}function Es(y){var b=y&&y.constructor,V=typeof b=="function"&&b.prototype||Ne;return y===V}function $a(y){return Lt.call(y)}function zr(y){if(y!=null){try{return ut.call(y)}catch{}try{return y+""}catch{}}return""}function ms(y,b){return y===b||y!==y&&b!==b}var vs=En(function(){return arguments}())?En:function(y){return Pi(y)&&je.call(y,"callee")&&!tr.call(y,"callee")},Ki=Array.isArray;function ka(y){return y!=null&&Rs(y.length)&&!Wi(y)}var mn=oi||Ue;function qa(y,b){return wi(y,b)}function Wi(y){if(!Ts(y))return!1;var b=Ii(y);return b==G||b==B||b==g||b==le}function Rs(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=h}function Ts(y){var b=typeof y;return y!=null&&(b=="object"||b=="function")}function Pi(y){return y!=null&&typeof y=="object"}var Os=ve?yt(ve):ls;function za(y){return ka(y)?cs(y):hs(y)}function qe(){return[]}function Ue(){return!1}o.exports=qa})(ya,ya.exports);var eR=ya.exports;const tR=r_(eR);function rR(o,r){if(o.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<o.length;s++){var c=o.charAt(s),h=c.charCodeAt(0);if(t[h]!==255)throw new TypeError(c+" is ambiguous");t[h]=s}var f=o.length,m=o.charAt(0),g=Math.log(f)/Math.log(256),P=Math.log(256)/Math.log(f);function F(B){if(B instanceof Uint8Array||(ArrayBuffer.isView(B)?B=new Uint8Array(B.buffer,B.byteOffset,B.byteLength):Array.isArray(B)&&(B=Uint8Array.from(B))),!(B instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(B.length===0)return"";for(var z=0,ie=0,Te=0,de=B.length;Te!==de&&B[Te]===0;)Te++,z++;for(var fe=(de-Te)*P+1>>>0,le=new Uint8Array(fe);Te!==de;){for(var he=B[Te],N=0,H=fe-1;(he!==0||N<ie)&&H!==-1;H--,N++)he+=256*le[H]>>>0,le[H]=he%f>>>0,he=he/f>>>0;if(he!==0)throw new Error("Non-zero carry");ie=N,Te++}for(var W=fe-ie;W!==fe&&le[W]===0;)W++;for(var ge=m.repeat(z);W<fe;++W)ge+=o.charAt(le[W]);return ge}function C(B){if(typeof B!="string")throw new TypeError("Expected String");if(B.length===0)return new Uint8Array;var z=0;if(B[z]!==" "){for(var ie=0,Te=0;B[z]===m;)ie++,z++;for(var de=(B.length-z)*g+1>>>0,fe=new Uint8Array(de);B[z];){var le=t[B.charCodeAt(z)];if(le===255)return;for(var he=0,N=de-1;(le!==0||he<Te)&&N!==-1;N--,he++)le+=f*fe[N]>>>0,fe[N]=le%256>>>0,le=le/256>>>0;if(le!==0)throw new Error("Non-zero carry");Te=he,z++}if(B[z]!==" "){for(var H=de-Te;H!==de&&fe[H]===0;)H++;for(var W=new Uint8Array(ie+(de-H)),ge=ie;H!==de;)W[ge++]=fe[H++];return W}}}function G(B){var z=C(B);if(z)return z;throw new Error(`Non-${r} character`)}return{encode:F,decodeUnsafe:C,decode:G}}var iR=rR,nR=iR;const C_=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")},sR=o=>new TextEncoder().encode(o),aR=o=>new TextDecoder().decode(o);class oR{constructor(r,t,n){this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class cR{constructor(r,t,n){if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return A_(this,r)}}class uR{constructor(r){this.decoders=r}or(r){return A_(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const A_=(o,r)=>new uR({...o.decoders||{[o.prefix]:o},...r.decoders||{[r.prefix]:r}});class lR{constructor(r,t,n,s){this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=s,this.encoder=new oR(r,t,n),this.decoder=new cR(r,t,s)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const ba=({name:o,prefix:r,encode:t,decode:n})=>new lR(o,r,t,n),ns=({prefix:o,name:r,alphabet:t})=>{const{encode:n,decode:s}=nR(t,r);return ba({prefix:o,name:r,encode:n,decode:c=>C_(s(c))})},hR=(o,r,t,n)=>{const s={};for(let P=0;P<r.length;++P)s[r[P]]=P;let c=o.length;for(;o[c-1]==="=";)--c;const h=new Uint8Array(c*t/8|0);let f=0,m=0,g=0;for(let P=0;P<c;++P){const F=s[o[P]];if(F===void 0)throw new SyntaxError(`Non-${n} character`);m=m<<t|F,f+=t,f>=8&&(f-=8,h[g++]=255&m>>f)}if(f>=t||255&m<<8-f)throw new SyntaxError("Unexpected end of data");return h},_R=(o,r,t)=>{const n=r[r.length-1]==="=",s=(1<<t)-1;let c="",h=0,f=0;for(let m=0;m<o.length;++m)for(f=f<<8|o[m],h+=8;h>t;)h-=t,c+=r[s&f>>h];if(h&&(c+=r[s&f<<t-h]),n)for(;c.length*t&7;)c+="=";return c},$t=({name:o,prefix:r,bitsPerChar:t,alphabet:n})=>ba({prefix:r,name:o,encode(s){return _R(s,n,t)},decode(s){return hR(s,n,t,o)}}),fR=ba({prefix:"\0",name:"identity",encode:o=>aR(o),decode:o=>sR(o)});var pR=Object.freeze({__proto__:null,identity:fR});const dR=$t({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var gR=Object.freeze({__proto__:null,base2:dR});const yR=$t({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ER=Object.freeze({__proto__:null,base8:yR});const mR=ns({prefix:"9",name:"base10",alphabet:"0123456789"});var vR=Object.freeze({__proto__:null,base10:mR});const RR=$t({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TR=$t({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var OR=Object.freeze({__proto__:null,base16:RR,base16upper:TR});const bR=$t({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IR=$t({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wR=$t({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PR=$t({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SR=$t({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),CR=$t({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),AR=$t({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xR=$t({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),DR=$t({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var NR=Object.freeze({__proto__:null,base32:bR,base32upper:IR,base32pad:wR,base32padupper:PR,base32hex:SR,base32hexupper:CR,base32hexpad:AR,base32hexpadupper:xR,base32z:DR});const LR=ns({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BR=ns({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var FR=Object.freeze({__proto__:null,base36:LR,base36upper:BR});const MR=ns({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jR=ns({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var GR=Object.freeze({__proto__:null,base58btc:MR,base58flickr:jR});const VR=$t({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),HR=$t({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),UR=$t({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$R=$t({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var kR=Object.freeze({__proto__:null,base64:VR,base64pad:HR,base64url:UR,base64urlpad:$R});const x_=Array.from(""),qR=x_.reduce((o,r,t)=>(o[t]=r,o),[]),zR=x_.reduce((o,r,t)=>(o[r.codePointAt(0)]=t,o),[]);function KR(o){return o.reduce((r,t)=>(r+=qR[t],r),"")}function WR(o){const r=[];for(const t of o){const n=zR[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);r.push(n)}return new Uint8Array(r)}const YR=ba({prefix:"",name:"base256emoji",encode:KR,decode:WR});var JR=Object.freeze({__proto__:null,base256emoji:YR}),XR=D_,mh=128,ZR=127,QR=~ZR,eT=Math.pow(2,31);function D_(o,r,t){r=r||[],t=t||0;for(var n=t;o>=eT;)r[t++]=o&255|mh,o/=128;for(;o&QR;)r[t++]=o&255|mh,o>>>=7;return r[t]=o|0,D_.bytes=t-n+1,r}var tT=Pc,rT=128,vh=127;function Pc(o,n){var t=0,n=n||0,s=0,c=n,h,f=o.length;do{if(c>=f)throw Pc.bytes=0,new RangeError("Could not decode varint");h=o[c++],t+=s<28?(h&vh)<<s:(h&vh)*Math.pow(2,s),s+=7}while(h>=rT);return Pc.bytes=c-n,t}var iT=Math.pow(2,7),nT=Math.pow(2,14),sT=Math.pow(2,21),aT=Math.pow(2,28),oT=Math.pow(2,35),cT=Math.pow(2,42),uT=Math.pow(2,49),lT=Math.pow(2,56),hT=Math.pow(2,63),_T=function(o){return o<iT?1:o<nT?2:o<sT?3:o<aT?4:o<oT?5:o<cT?6:o<uT?7:o<lT?8:o<hT?9:10},fT={encode:XR,decode:tT,encodingLength:_T},N_=fT;const Rh=(o,r,t=0)=>(N_.encode(o,r,t),r),Th=o=>N_.encodingLength(o),Sc=(o,r)=>{const t=r.byteLength,n=Th(o),s=n+Th(t),c=new Uint8Array(s+t);return Rh(o,c,0),Rh(t,c,n),c.set(r,s),new pT(o,t,r,c)};class pT{constructor(r,t,n,s){this.code=r,this.size=t,this.digest=n,this.bytes=s}}const L_=({name:o,code:r,encode:t})=>new dT(o,r,t);class dT{constructor(r,t,n){this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?Sc(this.code,t):t.then(n=>Sc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const B_=o=>async r=>new Uint8Array(await crypto.subtle.digest(o,r)),gT=L_({name:"sha2-256",code:18,encode:B_("SHA-256")}),yT=L_({name:"sha2-512",code:19,encode:B_("SHA-512")});var ET=Object.freeze({__proto__:null,sha256:gT,sha512:yT});const F_=0,mT="identity",M_=C_,vT=o=>Sc(F_,M_(o)),RT={code:F_,name:mT,encode:M_,digest:vT};var TT=Object.freeze({__proto__:null,identity:RT});new TextEncoder,new TextDecoder;const Oh={...pR,...gR,...ER,...vR,...OR,...NR,...FR,...GR,...kR,...JR};({...ET,...TT});function j_(o){return globalThis.Buffer!=null?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o}function OT(o=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?j_(globalThis.Buffer.allocUnsafe(o)):new Uint8Array(o)}function G_(o,r,t,n){return{name:o,prefix:r,encoder:{name:o,prefix:r,encode:t},decoder:{decode:n}}}const bh=G_("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),nc=G_("ascii","a",o=>{let r="a";for(let t=0;t<o.length;t++)r+=String.fromCharCode(o[t]);return r},o=>{o=o.substring(1);const r=OT(o.length);for(let t=0;t<o.length;t++)r[t]=o.charCodeAt(t);return r}),bT={utf8:bh,"utf-8":bh,hex:Oh.base16,latin1:nc,ascii:nc,binary:nc,...Oh};function IT(o,r="utf8"){const t=bT[r];if(!t)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?j_(globalThis.Buffer.from(o,"utf-8")):t.decoder.decode(`${t.prefix}${o}`)}const V_="wc",wT=2,Hc="core",vi=`${V_}@2:${Hc}:`,PT={name:Hc,logger:"error"},ST={database:":memory:"},CT="crypto",Ih="client_ed25519_seed",AT=ne.ONE_DAY,xT="keychain",DT="0.3",NT="messages",LT="0.3",BT=ne.SIX_HOURS,FT="publisher",H_="irn",MT="error",U_="wss://relay.walletconnect.com",wh="wss://relay.walletconnect.org",jT="relayer",zt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},GT="_subscription",ni={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},VT=ne.ONE_SECOND,HT="2.10.1",UT=1e4,$T="0.3",kT="WALLETCONNECT_CLIENT_ID",$r={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},qT="subscription",zT="0.3",KT=ne.FIVE_SECONDS*1e3,WT="pairing",YT="0.3",Hn={wc_pairingDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:ne.ONE_DAY,prompt:!1,tag:0}}},Kn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ur={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},JT="history",XT="0.3",ZT="expirer",Ir={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},QT="0.3",sc="verify-api",da="https://verify.walletconnect.com",Ph="https://verify.walletconnect.org";class eO{constructor(r,t){this.core=r,this.logger=t,this.keychain=new Map,this.name=xT,this.version=DT,this.initialized=!1,this.storagePrefix=vi,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()},this.get=n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:c}=Q("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(c)}return s},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=r,this.logger=Ae.generateChildLogger(t,this.name)}get context(){return Ae.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,a_(r))}async getKeyChain(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?o_(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}}class tO{constructor(r,t,n){this.core=r,this.logger=t,this.name=CT,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),c=hh(s);return v_(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=Dy();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const c=await this.getClientSeed(),h=hh(c),f=fc();return await hv(f,s,AT,h)},this.generateSharedKey=(s,c,h)=>{this.isInitialized();const f=this.getPrivateKey(s),m=Ny(f,c);return this.setSymKey(m,h)},this.setSymKey=async(s,c)=>{this.isInitialized();const h=c||Ly(s);return await this.keychain.set(h,s),h},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,c,h)=>{this.isInitialized();const f=By(h),m=es(c);if(ql(f)){const C=f.senderPublicKey,G=f.receiverPublicKey;s=await this.generateSharedKey(C,G)}const g=this.getSymKey(s),{type:P,senderPublicKey:F}=f;return Fy({type:P,symKey:g,message:m,senderPublicKey:F})},this.decode=async(s,c,h)=>{this.isInitialized();const f=My(c,h);if(ql(f)){const m=f.receiverPublicKey,g=f.senderPublicKey;s=await this.generateSharedKey(m,g)}try{const m=this.getSymKey(s),g=jy({symKey:m,encoded:c});return Bc(g)}catch(m){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(m)}},this.getPayloadType=s=>{const c=zl(s);return Gy(c.type)},this.getPayloadSenderPublicKey=s=>{const c=zl(s);return c.senderPublicKey?ma(c.senderPublicKey,Vy):void 0},this.core=r,this.logger=Ae.generateChildLogger(t,this.name),this.keychain=n||new eO(this.core,this.logger)}get context(){return Ae.getLoggerContext(this.logger)}async setPrivateKey(r,t){return await this.keychain.set(r,t),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(Ih)}catch{r=fc(),await this.keychain.set(Ih,r)}return IT(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}}class rO extends Hm{constructor(r,t){super(r,t),this.logger=r,this.core=t,this.messages=new Map,this.name=NT,this.version=LT,this.initialized=!1,this.storagePrefix=vi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,s)=>{this.isInitialized();const c=_n(s);let h=this.messages.get(n);return typeof h>"u"&&(h={}),typeof h[c]<"u"||(h[c]=s,this.messages.set(n,h),await this.persist()),c},this.get=n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s},this.has=(n,s)=>{this.isInitialized();const c=this.get(n),h=_n(s);return typeof c[h]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Ae.generateChildLogger(r,this.name),this.core=t}get context(){return Ae.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,a_(r))}async getRelayerMessages(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?o_(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}}class iO extends Um{constructor(r,t){super(r,t),this.relayer=r,this.logger=t,this.events=new wr.EventEmitter,this.name=FT,this.queue=new Map,this.publishTimeout=ne.toMiliseconds(ne.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,s,c)=>{var h;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:c}});try{const f=(c==null?void 0:c.ttl)||BT,m=pc(c),g=(c==null?void 0:c.prompt)||!1,P=(c==null?void 0:c.tag)||0,F=(c==null?void 0:c.id)||w_().toString(),C={topic:n,message:s,opts:{ttl:f,relay:m,prompt:g,tag:P,id:F}},G=setTimeout(()=>this.queue.set(F,C),this.publishTimeout);try{await await Jn(this.rpcPublish(n,s,f,m,g,P,F),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(F),this.relayer.events.emit(zt.publish,C)}catch(B){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(h=c==null?void 0:c.internal)!=null&&h.throwOnFailedPublish)throw this.removeRequestFromQueue(F),B;return}finally{clearTimeout(G)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.relayer=r,this.logger=Ae.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ae.getLoggerContext(this.logger)}rpcPublish(r,t,n,s,c,h,f){var m,g,P,F;const C={method:fa(s.protocol).publish,params:{topic:r,message:t,ttl:n,prompt:c,tag:h},id:f};return mi((m=C.params)==null?void 0:m.prompt)&&((g=C.params)==null||delete g.prompt),mi((P=C.params)==null?void 0:P.tag)&&((F=C.params)==null||delete F.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:C}),this.relayer.request(C)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{const{topic:t,message:n,opts:s}=r;await this.publish(t,n,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(dn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(zt.connection_stalled);return}this.checkQueue()}),this.relayer.on(zt.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}}class nO{constructor(){this.map=new Map,this.set=(r,t)=>{const n=this.get(r);this.exists(r,t)||this.map.set(r,[...n,t])},this.get=r=>this.map.get(r)||[],this.exists=(r,t)=>this.get(r).includes(t),this.delete=(r,t)=>{if(typeof t>"u"){this.map.delete(r);return}if(!this.map.has(r))return;const n=this.get(r);if(!this.exists(r,t))return;const s=n.filter(c=>c!==t);if(!s.length){this.map.delete(r);return}this.map.set(r,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var sO=Object.defineProperty,aO=Object.defineProperties,oO=Object.getOwnPropertyDescriptors,Sh=Object.getOwnPropertySymbols,cO=Object.prototype.hasOwnProperty,uO=Object.prototype.propertyIsEnumerable,Ch=(o,r,t)=>r in o?sO(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Un=(o,r)=>{for(var t in r||(r={}))cO.call(r,t)&&Ch(o,t,r[t]);if(Sh)for(var t of Sh(r))uO.call(r,t)&&Ch(o,t,r[t]);return o},ac=(o,r)=>aO(o,oO(r));class lO extends qm{constructor(r,t){super(r,t),this.relayer=r,this.logger=t,this.subscriptions=new Map,this.topicMap=new nO,this.events=new wr.EventEmitter,this.name=qT,this.version=zT,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=vi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const c=pc(s),h={topic:n,relay:c};this.pending.set(n,h);const f=await this.rpcSubscribe(n,c);return this.onSubscribe(f,h),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(n,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((s,c)=>{const h=new ne.Watch;h.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(f),h.stop(this.pendingSubscriptionWatchLabel),s(!0)),h.elapsed(this.pendingSubscriptionWatchLabel)>=KT&&(clearInterval(f),h.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=Ae.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ae.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,t){let n=!1;try{n=this.getSubscription(r).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,t){const n=this.topicMap.get(r);await Promise.all(n.map(async s=>await this.unsubscribeById(r,s,t)))}async unsubscribeById(r,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:t,opts:n}});try{const s=pc(n);await this.rpcUnsubscribe(r,t,s);const c=er("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:t,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(r,t){const n={method:fa(t.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Jn(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(zt.connection_stalled)}return _n(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;const t=r[0].relay,n={method:fa(t.protocol).batchSubscribe,params:{topics:r.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Jn(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(zt.connection_stalled)}}rpcUnsubscribe(r,t,n){const s={method:fa(n.protocol).unsubscribe,params:{topic:r,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(r,t){this.setSubscription(r,ac(Un({},t),{id:r})),this.pending.delete(t.topic)}onBatchSubscribe(r){r.length&&r.forEach(t=>{this.setSubscription(t.id,Un({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(r,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,r)&&this.deleteSubscription(t,n),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,t){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:t}),this.addSubscription(r,t))}addSubscription(r,t){this.subscriptions.set(r,Un({},t)),this.topicMap.set(t.topic,r),this.events.emit($r.created,t)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});const t=this.subscriptions.get(r);if(!t){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return t}deleteSubscription(r,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:t});const n=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(n.topic,r),this.events.emit($r.deleted,ac(Un({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit($r.sync)}async reset(){if(this.cached.length){const r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<r;t++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit($r.resubscribed)}async restore(){try{const r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){const{message:t}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;const t=await this.rpcBatchSubscribe(r);pn(t)&&this.onBatchSubscribe(t.map((n,s)=>ac(Un({},r[s]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const r=[];this.pending.forEach(t=>{r.push(t)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(dn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(zt.connect,async()=>{await this.onConnect()}),this.relayer.on(zt.disconnect,()=>{this.onDisconnect()}),this.events.on($r.created,async r=>{const t=$r.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),await this.persist()}),this.events.on($r.deleted,async r=>{const t=$r.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),r())},this.pollingInterval)})}}var hO=Object.defineProperty,Ah=Object.getOwnPropertySymbols,_O=Object.prototype.hasOwnProperty,fO=Object.prototype.propertyIsEnumerable,xh=(o,r,t)=>r in o?hO(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,pO=(o,r)=>{for(var t in r||(r={}))_O.call(r,t)&&xh(o,t,r[t]);if(Ah)for(var t of Ah(r))fO.call(r,t)&&xh(o,t,r[t]);return o};class dO extends $m{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new wr.EventEmitter,this.name=jT,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(zt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(zt.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(ni.payload,this.onPayloadHandler),this.provider.on(ni.connect,this.onConnectHandler),this.provider.on(ni.disconnect,this.onDisconnectHandler),this.provider.on(ni.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?Ae.generateChildLogger(r.logger,this.name):Ae.pino(Ae.getDefaultLoggerOptions({level:r.logger||MT})),this.messages=new rO(this.logger,r.core),this.subscriber=new lO(this,this.logger),this.publisher=new iO(this,this.logger),this.relayUrl=(r==null?void 0:r.relayUrl)||U_,this.projectId=r.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${wh}...`),await this.restartTransport(wh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},UT)}get context(){return Ae.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,t,n){this.isInitialized(),await this.publisher.publish(r,t,n),await this.recordMessageEvent({topic:r,message:t,publishedAt:Date.now()})}async subscribe(r,t){var n;this.isInitialized();let s=((n=this.subscriber.topicMap.get(r))==null?void 0:n[0])||"";return s||(await Promise.all([new Promise(c=>{this.subscriber.once($r.created,h=>{h.topic===r&&c()})}),new Promise(async c=>{s=await this.subscriber.subscribe(r,t),c()})]),s)}async unsubscribe(r,t){this.isInitialized(),await this.subscriber.unsubscribe(r,t)}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Jn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once($r.resubscribed,()=>{t()})}),new Promise(async(t,n)=>{try{await Jn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(s){n(s);return}t()})])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.provider.events.emit(ni.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Kl())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(t=>r.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ri(new Qv(Hy({sdkVersion:HT,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(r){const{topic:t,message:n}=r;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(r){const{topic:t,message:n}=r;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,n);return s&&this.logger.debug(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),Vc(r)){if(!r.method.endsWith(GT))return;const t=r.params,{topic:n,message:s,publishedAt:c}=t.data,h={topic:n,message:s,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(pO({type:"event",event:t.id},h)),this.events.emit(t.id,h),await this.acknowledgePayload(r),await this.onMessageEvent(h)}else Oa(r)&&this.events.emit(zt.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(zt.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){const t=Gc(r.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(ni.payload,this.onPayloadHandler),this.provider.off(ni.connect,this.onConnectHandler),this.provider.off(ni.disconnect,this.onDisconnectHandler),this.provider.off(ni.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(zt.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let r=await Kl();Uy(async t=>{this.initialized&&r!==t&&(r=t,t?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(zt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},ne.toMiliseconds(VT)))}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var gO=Object.defineProperty,Dh=Object.getOwnPropertySymbols,yO=Object.prototype.hasOwnProperty,EO=Object.prototype.propertyIsEnumerable,Nh=(o,r,t)=>r in o?gO(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Lh=(o,r)=>{for(var t in r||(r={}))yO.call(r,t)&&Nh(o,t,r[t]);if(Dh)for(var t of Dh(r))EO.call(r,t)&&Nh(o,t,r[t]);return o};class Ia extends km{constructor(r,t,n,s=vi,c=void 0){super(r,t,n,s),this.core=r,this.logger=t,this.name=n,this.map=new Map,this.version=$T,this.cached=[],this.initialized=!1,this.storagePrefix=vi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(h=>{this.getKey&&h!==null&&!mi(h)?this.map.set(this.getKey(h),h):Ay(h)?this.map.set(h.id,h):xy(h)&&this.map.set(h.topic,h)}),this.cached=[],this.initialized=!0)},this.set=async(h,f)=>{this.isInitialized(),this.map.has(h)?await this.update(h,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:h,value:f}),this.map.set(h,f),await this.persist())},this.get=h=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:h}),this.getData(h)),this.getAll=h=>(this.isInitialized(),h?this.values.filter(f=>Object.keys(h).every(m=>tR(f[m],h[m]))):this.values),this.update=async(h,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:h,update:f});const m=Lh(Lh({},this.getData(h)),f);this.map.set(h,m),await this.persist()},this.delete=async(h,f)=>{this.isInitialized(),this.map.has(h)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:h,reason:f}),this.map.delete(h),await this.persist())},this.logger=Ae.generateChildLogger(t,this.name),this.storagePrefix=s,this.getKey=c}get context(){return Ae.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){const t=this.map.get(r);if(!t){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){const{message:t}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}}class mO{constructor(r,t){this.core=r,this.logger=t,this.name=WT,this.version=YT,this.events=new Lc,this.initialized=!1,this.storagePrefix=vi,this.ignoredPayloadTypes=[i_],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=fc(),s=await this.core.crypto.setSymKey(n),c=Nr(ne.FIVE_MINUTES),h={protocol:H_},f={topic:s,expiry:c,relay:h,active:!1},m=$y({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:h});return await this.pairings.set(s,f),await this.core.relayer.subscribe(s),this.core.expirer.set(s,c),{topic:s,uri:m}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:s,symKey:c,relay:h}=ky(n.uri);let f;if(this.pairings.keys.includes(s)&&(f=this.pairings.get(s),f.active))throw new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(s)||(await this.core.crypto.setSymKey(c,s),await this.core.relayer.subscribe(s,{relay:h}));const m=Nr(ne.FIVE_MINUTES),g={topic:s,relay:h,expiry:m,active:!1};return await this.pairings.set(s,g),this.core.expirer.set(s,m),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Kn.create,g),g},this.activate=async({topic:n})=>{this.isInitialized();const s=Nr(ne.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:s}),this.core.expirer.set(n,s)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:s}=n;if(this.pairings.keys.includes(s)){const c=await this.sendRequest(s,"wc_pairingPing",{}),{done:h,resolve:f,reject:m}=un();this.events.once(Nt("pairing_ping",c),({error:g})=>{g?m(g):f()}),await h()}},this.updateExpiry=async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})},this.updateMetadata=async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",er("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(n,s,c)=>{const h=fn(s,c),f=await this.core.crypto.encode(n,h),m=Hn[s].req;return this.core.history.set(n,h),this.core.relayer.publish(n,f,m),h.id},this.sendResult=async(n,s,c)=>{const h=Gc(n,c),f=await this.core.crypto.encode(s,h),m=await this.core.history.get(s,n),g=Hn[m.request.method].res;await this.core.relayer.publish(s,f,g),await this.core.history.resolve(h)},this.sendError=async(n,s,c)=>{const h=Ta(n,c),f=await this.core.crypto.encode(s,h),m=await this.core.history.get(s,n),g=Hn[m.request.method]?Hn[m.request.method].res:Hn.unregistered_method.res;await this.core.relayer.publish(s,f,g),await this.core.history.resolve(h)},this.deletePairing=async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,er("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(s=>Ei(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=n=>{const{topic:s,payload:c}=n;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(s,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,c);default:return this.onUnknownRpcMethodRequest(s,c)}},this.onRelayEventResponse=async n=>{const{topic:s,payload:c}=n,h=(await this.core.history.get(s,c.id)).request.method;switch(h){case"wc_pairingPing":return this.onPairingPingResponse(s,c);default:return this.onUnknownRpcMethodResponse(h)}},this.onPairingPingRequest=async(n,s)=>{const{id:c}=s;try{this.isValidPing({topic:n}),await this.sendResult(c,n,!0),this.events.emit(Kn.ping,{id:c,topic:n})}catch(h){await this.sendError(c,n,h),this.logger.error(h)}},this.onPairingPingResponse=(n,s)=>{const{id:c}=s;setTimeout(()=>{ai(s)?this.events.emit(Nt("pairing_ping",c),{}):Lr(s)&&this.events.emit(Nt("pairing_ping",c),{error:s.error})},500)},this.onPairingDeleteRequest=async(n,s)=>{const{id:c}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Kn.delete,{id:c,topic:n})}catch(h){await this.sendError(c,n,h),this.logger.error(h)}},this.onUnknownRpcMethodRequest=async(n,s)=>{const{id:c,method:h}=s;try{if(this.registeredMethods.includes(h))return;const f=er("WC_METHOD_UNSUPPORTED",h);await this.sendError(c,n,f),this.logger.error(f)}catch(f){await this.sendError(c,n,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(er("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!cr(n)){const{message:s}=Q("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(s)}if(!qy(n.uri)){const{message:s}=Q("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(s)}},this.isValidPing=async n=>{if(!cr(n)){const{message:c}=Q("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(c)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidDisconnect=async n=>{if(!cr(n)){const{message:c}=Q("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(c)}const{topic:s}=n;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async n=>{if(!ln(n,!1)){const{message:s}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Ei(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=Q("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}},this.core=r,this.logger=Ae.generateChildLogger(t,this.name),this.pairings=new Ia(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ae.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.core.relayer.on(zt.message,async r=>{const{topic:t,message:n}=r;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(t,n);try{Vc(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Oa(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Ir.expired,async r=>{const{topic:t}=n_(r.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Kn.expire,{topic:t}))})}}class vO extends Vm{constructor(r,t){super(r,t),this.core=r,this.logger=t,this.records=new Map,this.events=new wr.EventEmitter,this.name=JT,this.version=XT,this.cached=[],this.initialized=!1,this.storagePrefix=vi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,s,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:c}),this.records.has(s.id))return;const h={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:c,expiry:Nr(ne.THIRTY_DAYS)};this.records.set(h.id,h),this.events.emit(Ur.created,h)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=Lr(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.events.emit(Ur.updated,s))},this.get=async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s)),this.delete=(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(c=>{if(c.topic===n){if(typeof s<"u"&&c.id!==s)return;this.records.delete(c.id),this.events.emit(Ur.deleted,c)}})},this.exists=async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1),this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=Ae.generateChildLogger(t,this.name)}get context(){return Ae.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const r=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:fn(t.request.method,t.request.params,t.id),chainId:t.chainId};return r.push(n)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();const t=this.records.get(r);if(!t){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ur.sync)}async restore(){try{const r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){const{message:t}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(Ur.created,r=>{const t=Ur.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.events.on(Ur.updated,r=>{const t=Ur.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.events.on(Ur.deleted,r=>{const t=Ur.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:r}),this.persist()}),this.core.heartbeat.on(dn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{ne.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}}class RO extends zm{constructor(r,t){super(r,t),this.core=r,this.logger=t,this.expirations=new Map,this.events=new wr.EventEmitter,this.name=ZT,this.version=QT,this.cached=[],this.initialized=!1,this.storagePrefix=vi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(n,s)=>{this.isInitialized();const c=this.formatTarget(n),h={target:c,expiry:s};this.expirations.set(c,h),this.checkExpiry(c,h),this.events.emit(Ir.created,{target:c,expiration:h})},this.get=n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)},this.del=n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),c=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ir.deleted,{target:s,expiration:c})}},this.on=(n,s)=>{this.events.on(n,s)},this.once=(n,s)=>{this.events.once(n,s)},this.off=(n,s)=>{this.events.off(n,s)},this.removeListener=(n,s)=>{this.events.removeListener(n,s)},this.logger=Ae.generateChildLogger(t,this.name)}get context(){return Ae.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if(typeof r=="string")return zy(r);if(typeof r=="number")return Ky(r);const{message:t}=Q("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw new Error(t)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ir.sync)}async restore(){try{const r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){const{message:t}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){const t=this.expirations.get(r);if(!t){const{message:n}=Q("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(r,t){const{expiry:n}=t;ne.toMiliseconds(n)-Date.now()<=0&&this.expire(r,t)}expire(r,t){this.expirations.delete(r),this.events.emit(Ir.expired,{target:r,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,t)=>this.checkExpiry(t,r))}registerEventListeners(){this.core.heartbeat.on(dn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ir.created,r=>{const t=Ir.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()}),this.events.on(Ir.expired,r=>{const t=Ir.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()}),this.events.on(Ir.deleted,r=>{const t=Ir.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:r}),this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}}}class TO extends Km{constructor(r,t){super(r,t),this.projectId=r,this.logger=t,this.name=sc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||Wy()||!s_())return;const s=(n==null?void 0:n.verifyUrl)||da;this.verifyUrl!==s&&this.removeIframe(),this.verifyUrl=s;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Ph;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const s=(n==null?void 0:n.verifyUrl)||da;let c;try{c=await this.fetchAttestation(n.attestationId,s)}catch(h){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${s}`),this.logger.info(h),c=await this.fetchAttestation(n.attestationId,Ph)}return c},this.fetchAttestation=async(n,s)=>{this.logger.info(`resolving attestation: ${n} from url: ${s}`);const c=this.startAbortTimer(ne.ONE_SECOND*2),h=await fetch(`${s}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(c),h.status===200?await h.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var s;try{if(!this.iframe)return;(s=this.iframe.contentWindow)==null||s.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const s=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",s),n())};await Promise.race([new Promise(c=>{if(document.getElementById(sc))return c();window.addEventListener("message",s);const h=document.createElement("iframe");h.id=sc,h.src=`${this.verifyUrl}/${this.projectId}`,h.style.display="none",document.body.append(h),this.iframe=h,n=c}),new Promise((c,h)=>setTimeout(()=>{window.removeEventListener("message",s),h("verify iframe load timeout")},ne.toMiliseconds(ne.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Ae.generateChildLogger(t,this.name),this.verifyUrl=da,this.abortController=new AbortController,this.isDevEnv=Yy()&&{CI_COMMIT_TAG_MESSAGE:"",SAST_EXCLUDED_ANALYZERS:"",CI_SERVER_VERSION_PATCH:"4",FF_USE_WINDOWS_LEGACY_PROCESS_STRATEGY:"true",CI_SERVER_REVISION:"f8f84c53318",HARBOR_USERNAME:"robot$gfxcafe",FF_SCRIPT_SECTIONS:"false",FF_POSIXLY_CORRECT_ESCAPES:"false",CI_COMMIT_SHORT_SHA:"95902008",GITLAB_USER_LOGIN:"jjohnston4",REDIS_CACHE_SERVICE_HOST:"10.33.165.236",DNSCRYPT_PROXY_PORT:"udp://10.33.165.187:53",CODEINTEL_DB_PORT_5432_TCP_PROTO:"tcp",GITLAB_KAS_PORT_8151_TCP_ADDR:"10.33.167.136",GITLAB_KAS_SERVICE_PORT_HTTP_METRICS:"8151",REDIS_STORE_PORT_6379_TCP:"tcp://10.33.162.53:6379",OPENBLOCKS_MONGODB_SERVICE_HOST:"10.33.172.198",DNSCRYPT_PROXY_SERVICE_PORT:"53",REDIS_METRICS_SERVICE_HOST:"10.33.174.118",REDIS_METRICS_PORT_9121_TCP_PORT:"9121",npm_package_devDependencies__types_node:"^18.11.9",npm_package_dependencies_decimal_js:"^10.4.3",npm_package_scripts_cypress_e2e:"yarn run cypress open",npm_config_open_registry:"https://gfx.cafe/api/v4/projects/268/packages/npm/",HARBOR_OCI:"oci://hc.gfx.cafe",HARBOR_REGISTRY_PORT_5000_TCP_PORT:"5000",HARBOR_CORE_PORT_80_TCP_PORT:"80",BLOBSTORE_PORT_9000_TCP_ADDR:"10.33.161.54",SOURCEGRAPH_FRONTEND_INTERNAL_SERVICE_HOST:"10.33.165.173",HARBOR_CHARTMUSEUM_PORT_80_TCP_ADDR:"10.33.169.173",KUBERNETES_SERVICE_PORT:"443",CODEINSIGHTS_DB_SERVICE_HOST:"10.33.175.8",GITLAB_KAS_SERVICE_HOST:"10.33.167.136",REDIS_METRICS_PORT_9121_TCP_PROTO:"tcp",KUBERNETES_PORT:"tcp://10.33.160.1:443",GITLAB_WEBSERVICE_DEFAULT_SERVICE_PORT_HTTP_METRICS_WS:"8083",GITLAB_REGISTRY_SERVICE_PORT_HTTP_REGISTRY:"5000",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_PORT_10254_TCP_ADDR:"10.33.174.94",npm_package_devDependencies_vitest:"^0.25.2",npm_package_dependencies_react_draggable:"^4.4.5",npm_package_dependencies__uniswap_permit2_sdk:"^1.2.0",HARBOR_REGISTRY_PORT_5000_TCP_PROTO:"tcp",LOWCODER_MONGODB_SERVICE_HOST:"10.33.162.202",GITLAB_KAS_PORT_8153_TCP_ADDR:"10.33.167.136",GITLAB_KAS_PORT_8150_TCP_PORT:"8150",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_22_TCP_PORT:"22",HARBOR_CORE_PORT_80_TCP_PROTO:"tcp",CODEINSIGHTS_DB_PORT_5432_TCP_PORT:"5432",npm_package_dependencies_autoprefixer:"^10.4.15",npm_config_version_commit_hooks:"true",npm_config_user_agent:"yarn/1.22.19 npm/? node/v18.17.1 linux x64",NODE_VERSION:"18.17.1",CI_SERVER_PROTOCOL:"https",CI:"true",CI_RUNNER_REVISION:"782e15da",FF_USE_LEGACY_KUBERNETES_EXECUTION_STRATEGY:"false",CI_PROJECT_NAME:"trade",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_22_TCP_PROTO:"tcp",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_80_TCP_ADDR:"10.33.175.199",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_SERVICE_PORT:"10254",REDIS_MASTER_SERVICE_HOST:"10.33.163.86",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_PORT:"tcp://10.33.174.94:10254",GITLAB_GITLAB_SHELL_PORT_22_TCP:"tcp://10.33.162.36:22",GITHUB_PROXY_PORT_80_TCP:"tcp://10.33.168.25:80",GITLAB_KAS_PORT_8151_TCP_PORT:"8151",GITLAB_KAS_PORT_8150_TCP_PROTO:"tcp",CODEINSIGHTS_DB_PORT_5432_TCP_PROTO:"tcp",GITLAB_KAS_PORT_8154_TCP_ADDR:"10.33.167.136",SOURCEGRAPH_FRONTEND_SERVICE_HOST:"10.33.161.104",PGSQL_SERVICE_PORT_PGSQL:"5432",npm_package_devDependencies_isomorphic_ws:"^5.0.0",npm_package_devDependencies__lingui_swc_plugin:"^4.0.4",npm_config_bin_links:"true",npm_config_wrap_output:"",HOSTNAME:"runner-wngtqvjw-project-222-concurrent-0-qqa1dv41",YARN_VERSION:"1.22.19",CI_COMMIT_DESCRIPTION:`
shows modal

See merge request uniswap/trade!616`,CI_JOB_STAGE:"build",CI_PROJECT_DESCRIPTION:"",GITLAB_KAS_PORT_8151_TCP_PROTO:"tcp",HARBOR_CHARTMUSEUM_PORT_80_TCP_PORT:"80",BLOBSTORE_PORT_9000_TCP_PORT:"9000",REPO_UPDATER_SERVICE_PORT_HTTP:"3182",GITLAB_GITLAB_EXPORTER_SERVICE_PORT_HTTP_METRICS:"9168",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_PORT_10254_TCP_PORT:"10254",PRECISE_CODE_INTEL_WORKER_SERVICE_PORT_HTTP:"3188",PRECISE_CODE_INTEL_WORKER_SERVICE_PORT_DEBUG:"6060",DOCKERHUB_MIRROR_SERVICE_HOST:"10.33.174.243",npm_node_execpath:"/usr/local/bin/node",npm_package_devDependencies_vite:"^4.4.9",npm_config_init_version:"1.0.0",npm_config_yarn_offline_mirror_pruning:"true",HARBOR_PROJECT:"ycdwafiorapSxD3R4uev",SAST_IMAGE_SUFFIX:"",CI_SERVER_VERSION:"16.3.4-ee",DOCKERHUB_MIRROR_PORT_5000_TCP:"tcp://10.33.174.243:5000",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_PORT_10254_TCP_PROTO:"tcp",BLOBSTORE_PORT_9000_TCP_PROTO:"tcp",GITLAB_GITLAB_EXPORTER_SERVICE_HOST:"10.33.167.206",GITLAB_KAS_PORT_8153_TCP_PORT:"8153",HARBOR_PORTAL_SERVICE_PORT:"80",HARBOR_PORTAL_PORT:"tcp://10.33.167.51:80",CODEINTEL_DB_SERVICE_PORT:"5432",HARBOR_CHARTMUSEUM_PORT_80_TCP_PROTO:"tcp",CODEINTEL_DB_PORT:"tcp://10.33.166.78:5432",SHLVL:"10",npm_package_dependencies_wagmi:"^1.4.2",npm_package_dependencies__radix_ui_react_tooltip:"^1.0.6",FF_DISABLE_POWERSHELL_STDIN:"false",CI_PROJECT_ROOT_NAMESPACE:"uniswap",GITLAB_KAS_PORT_8154_TCP_PORT:"8154",WORKER_EXECUTORS_SERVICE_PORT:"6996",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_80_TCP_PORT:"80",GITLAB_KAS_PORT_8153_TCP_PROTO:"tcp",WORKER_EXECUTORS_PORT:"tcp://10.33.169.204:6996",HARBOR_REDIS_PORT_6379_TCP:"tcp://10.33.174.245:6379",HOME:"/root",OLDPWD:"/",npm_package_devDependencies__uniswap_sdk_core:"npm:@gfxlabs/uniswap-sdk-core@4.3.6-3",npm_package_devDependencies__babel_plugin_proposal_class_properties:"^7.18.6",npm_package_dependencies_ethers:"^5.7.2",FF_NETWORK_PER_BUILD:"false",CI_JOB_ID:"97800",CI_COMMIT_REF_NAME:"v0.1.36",CI_SERVER_HOST:"gfx.cafe",GITLAB_KAS_PORT_8154_TCP_PROTO:"tcp",OPENBLOCKS_MONGODB_SERVICE_PORT:"27017",SOURCEGRAPH_FRONTEND_PORT_30080_TCP_ADDR:"10.33.161.104",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_80_TCP_PROTO:"tcp",REDIS_METRICS_SERVICE_PORT:"9121",REDIS_METRICS_PORT:"tcp://10.33.174.118:9121",OPENBLOCKS_MONGODB_PORT:"tcp://10.33.172.198:27017",HARBOR_JOBSERVICE_SERVICE_HOST:"10.33.160.250",REDIS_CACHE_SERVICE_PORT:"6379",SYNTECT_SERVER_SERVICE_PORT_HTTP:"9238",PRECISE_CODE_INTEL_WORKER_PORT_6060_TCP_ADDR:"10.33.167.164",REDIS_CACHE_PORT:"tcp://10.33.165.236:6379",npm_package_devDependencies__babel_plugin_syntax_dynamic_import:"^7.8.3",CI_PIPELINE_SOURCE:"push",CI_RUNNER_VERSION:"16.2.0",DS_SCHEMA_MODEL:"15",FF_RESOLVE_FULL_TLS_CHAIN:"true",SOURCEGRAPH_FRONTEND_INTERNAL_SERVICE_PORT:"80",GITLAB_KAS_PORT:"tcp://10.33.167.136:8150",DNSCRYPT_PROXY_PORT_53_UDP_ADDR:"10.33.165.187",GITLAB_KAS_SERVICE_PORT:"8150",SOURCEGRAPH_FRONTEND_INTERNAL_PORT:"tcp://10.33.165.173:80",CODEINSIGHTS_DB_PORT:"tcp://10.33.175.8:5432",BLOBSTORE_SERVICE_HOST:"10.33.161.54",CODEINTEL_DB_PORT_5432_TCP:"tcp://10.33.166.78:5432",CODEINSIGHTS_DB_SERVICE_PORT:"5432",npm_package_dependencies_bunyan:"^1.8.15",npm_package_dependencies__uniswap_v3_periphery:"^1.4.3",npm_package_dependencies__sentry_vite_plugin:"^2.7.1",npm_package_dependencies__sentry_react:"^7.70.0",npm_config_init_license:"MIT",FF_USE_FASTZIP:"false",FF_SKIP_NOOP_BUILD_STAGES:"true",CI_BUILDS_DIR:"/builds",CI_SERVER_VERSION_MAJOR:"16",CI_DEFAULT_BRANCH:"master",LOWCODER_MONGODB_SERVICE_PORT:"27017",HARBOR_REGISTRY_SERVICE_HOST:"10.33.172.67",HARBOR_REGISTRY_PORT_8080_TCP_ADDR:"10.33.172.67",REDIS_CACHE_SERVICE_PORT_REDIS:"6379",LOWCODER_MONGODB_PORT:"tcp://10.33.162.202:27017",REDIS_CACHE_PORT_6379_TCP_ADDR:"10.33.165.236",REDIS_METRICS_PORT_9121_TCP:"tcp://10.33.174.118:9121",REPO_UPDATER_PORT_3182_TCP_ADDR:"10.33.172.31",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_SERVICE_PORT_METRICS:"10254",YARN_WRAP_OUTPUT:"false",npm_package_devDependencies__uniswap_v3_core:"^1.0.1",npm_package_dependencies__uniswap_v3_sdk:"3.10.0",npm_package_scripts_add_locale:"lingui add-locale",npm_package_scripts_prettier_check:"./node_modules/.bin/prettier --check .",npm_config_version_tag_prefix:"v",CI_COMMIT_REF_PROTECTED:"false",CI_TEMPLATE_REGISTRY_HOST:"registry.gitlab.com",CI_SERVER_URL:"https://gfx.cafe",HARBOR_REGISTRY_PORT_5000_TCP:"tcp://10.33.172.67:5000",REDIS_MASTER_PORT:"tcp://10.33.163.86:6379",SOURCEGRAPH_FRONTEND_PORT:"tcp://10.33.161.104:30080",OPENBLOCKS_LOWCODER_NODE_SERVICE_SERVICE_HOST:"10.33.168.36",HARBOR_CORE_PORT_80_TCP:"tcp://10.33.161.119:80",WORKER_SERVICE_PORT_DEBUG:"6060",PRECISE_CODE_INTEL_WORKER_PORT_6060_TCP_PORT:"6060",OPENBLOCKS_MONGODB_PORT_27017_TCP_ADDR:"10.33.172.198",GITLAB_GITLAB_SHELL_SERVICE_PORT_SSH:"22",GITLAB_WEBSERVICE_DEFAULT_PORT_8080_TCP_ADDR:"10.33.162.110",SOURCEGRAPH_FRONTEND_SERVICE_PORT:"30080",GITLAB_WEBSERVICE_DEFAULT_SERVICE_HOST:"10.33.162.110",REDIS_MASTER_SERVICE_PORT:"6379",SOURCEGRAPH_FRONTEND_PORT_30080_TCP_PORT:"30080",GITLAB_REGISTRY_PORT_5000_TCP_ADDR:"10.33.161.225",GITHUB_PROXY_SERVICE_PORT_HTTP:"80",ELASTICSEARCH_PORT_9200_TCP_ADDR:"10.33.166.115",WORKER_SERVICE_PORT_HTTP:"3189",CI_REGISTRY_PASSWORD:"64_hKjxD7fsuENAUohSBvzE",npm_package_devDependencies__wagmi_core:"^1.4.2",npm_package_dependencies_react_icons:"^4.11.0",GITLAB_FEATURES:"description_diffs,send_emails_from_admin_area,repository_size_limit,maintenance_mode,scoped_issue_board,group_ip_restriction,password_complexity,coverage_fuzzing,audit_events,blocked_issues,board_iteration_lists,code_owners,code_review_analytics,contribution_analytics,elastic_search,full_codequality_report,group_activity_analytics,group_bulk_edit,group_webhooks,issuable_default_templates,issue_weights,iterations,ldap_group_sync,member_lock,merge_request_approvers,milestone_charts,multiple_issue_assignees,multiple_ldap_servers,multiple_merge_request_assignees,multiple_merge_request_reviewers,project_merge_request_analytics,protected_refs_for_users,push_rules,repository_mirrors,resource_access_token,seat_link,usage_quotas,visual_review_app,wip_limits,zoekt_code_search,blocked_work_items,adjourned_deletion_for_projects_and_groups,admin_audit_log,auditor_user,blocking_merge_requests,board_assignee_lists,board_milestone_lists,ci_cd_projects,ci_namespace_catalog,ci_secrets_management,cluster_agents_ci_impersonation,cluster_agents_user_impersonation,cluster_deployments,code_owner_approval_required,code_suggestions,commit_committer_check,commit_committer_name_check,compliance_framework,custom_compliance_frameworks,cross_project_pipelines,custom_file_templates,custom_file_templates_for_namespace,custom_project_templates,cycle_analytics_for_groups,cycle_analytics_for_projects,db_load_balancing,default_branch_protection_restriction_in_groups,default_project_deletion_protection,delete_unconfirmed_users,dependency_proxy_for_packages,disable_name_update_for_users,disable_personal_access_tokens,domain_verification,email_additional_text,epics,extended_audit_events,external_authorization_service_api_management,feature_flags_related_issues,feature_flags_code_references,file_locks,geo,generic_alert_fingerprinting,git_two_factor_enforcement,github_integration,group_allowed_email_domains,group_coverage_reports,group_forking_protection,group_milestone_project_releases,group_project_templates,group_repository_analytics,group_saml,group_scoped_ci_variables,group_wikis,ide_schema_config,incident_metric_upload,incident_sla,instance_level_scim,issues_analytics,jira_issues_integration,ldap_group_sync_filter,merge_pipelines,merge_request_performance_metrics,admin_merge_request_approvers_rules,merge_trains,metrics_reports,multiple_alert_http_integrations,multiple_approval_rules,multiple_group_issue_boards,object_storage,microsoft_group_sync,operations_dashboard,package_forwarding,pages_size_limit,productivity_analytics,project_aliases,protected_environments,reject_non_dco_commits,reject_unsigned_commits,remote_development,saml_group_sync,service_accounts,scoped_labels,smartcard_auth,swimlanes,target_branch_rules,type_of_work_analytics,minimal_access_role,unprotection_restrictions,ci_project_subscriptions,incident_timeline_view,oncall_schedules,escalation_policies,export_user_permissions,zentao_issues_integration,coverage_check_approval_rule,issuable_resource_links,group_protected_branches,group_level_merge_checks_setting,oidc_client_groups_claim,disable_deleting_account_for_users,ai_chat,ai_config_chat,ai_features,ai_git_command,ai_tanuki_bot,ai_analyze_ci_job_failure,api_discovery,api_fuzzing,auto_rollback,breach_and_attack_simulation,fill_in_merge_request_template,no_code_automation,cluster_image_scanning,external_status_checks,combined_project_analytics_dashboards,compliance_pipeline_configuration,container_scanning,credentials_inventory,custom_roles,dast,dependency_scanning,devops_adoption,dora4_analytics,enterprise_templates,environment_alerts,evaluate_group_level_compliance_pipeline,explain_code,external_audit_events,generate_description,generate_commit_message,generate_test_file,git_abuse_rate_limit,group_ci_cd_analytics,group_level_compliance_dashboard,group_level_analytics_dashboard,group_level_devops_adoption,incident_management,inline_codequality,insights,instance_level_devops_adoption,issuable_health_status,issues_completed_analytics,jira_vulnerabilities_integration,jira_issue_association_enforcement,kubernetes_cluster_vulnerabilities,license_scanning,okrs,personal_access_token_expiration_policy,product_analytics,project_quality_summary,project_level_analytics_dashboard,prometheus_alerts,quality_management,related_epics,release_evidence_test_artifacts,report_approver_rules,required_ci_templates,requirements,runner_maintenance_note,runner_performance_insights,runner_upgrade_management,runner_upgrade_management_for_namespace,sast,sast_iac,sast_custom_rulesets,sast_fp_reduction,secret_detection,security_configuration_in_ui,security_dashboard,security_on_demand_scans,security_orchestration_policies,security_training,ssh_key_expiration_policy,summarize_mr_changes,summarize_my_mr_code_review,summarize_notes,summarize_submitted_review,stale_runner_cleanup_for_namespace,status_page,suggested_reviewers,subepics,unique_project_download_limit,vulnerability_auto_fix,vulnerability_finding_signatures",CI_PROJECT_ID:"222",CI_REGISTRY_IMAGE:"cr.gfx.cafe/uniswap/trade",GITLAB_KAS_PORT_8150_TCP:"tcp://10.33.167.136:8150",CODEINSIGHTS_DB_PORT_5432_TCP:"tcp://10.33.175.8:5432",GOPROXY_SERVICE_HOST:"10.33.166.109",PRECISE_CODE_INTEL_WORKER_PORT_6060_TCP_PROTO:"tcp",DNSCRYPT_PROXY_PORT_53_UDP_PORT:"53",HARBOR_PORTAL_PORT_80_TCP_ADDR:"10.33.167.51",DOCKERHUB_MIRROR_SERVICE_PORT:"5000",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_22_TCP:"tcp://10.33.175.199:22",SOURCEGRAPH_FRONTEND_PORT_30080_TCP_PROTO:"tcp",REPO_UPDATER_SERVICE_HOST:"10.33.172.31",PRECISE_CODE_INTEL_WORKER_SERVICE_HOST:"10.33.167.164",GOPROXY_PORT_8080_TCP_ADDR:"10.33.166.109",HARBOR_REGISTRY_SERVICE_PORT_HTTP_CONTROLLER:"8080",ELASTICSEARCH_PORT_9300_TCP_ADDR:"10.33.166.115",DOCKERHUB_MIRROR_PORT:"tcp://10.33.174.243:5000",npm_package_devDependencies_eslint_plugin_react_hooks:"^4.6.0",npm_package_dependencies_react_virtual:"^2.10.4",npm_package_dependencies__radix_ui_react_dropdown_menu:"^2.0.5",CI_COMMIT_TAG:"v0.1.36",SECURE_ANALYZERS_PREFIX:"registry.gitlab.com/security-products",GITLAB_CI:"true",CI_COMMIT_SHA:"95902008cb23568b4b5dc9fecec8ce155bd10ea1",GITLAB_KAS_PORT_8151_TCP:"tcp://10.33.167.136:8151",GITLAB_WEBSERVICE_DEFAULT_PORT_8181_TCP_ADDR:"10.33.162.110",GITLAB_GITLAB_EXPORTER_SERVICE_PORT:"9168",GITLAB_GITLAB_EXPORTER_PORT:"tcp://10.33.167.206:9168",LOWCODER_MONGODB_PORT_27017_TCP_ADDR:"10.33.162.202",OPENBLOCKS_LOWCODER_API_SERVICE_SERVICE_HOST:"10.33.164.192",OPENBLOCKS_LOWCODER_FRONTEND_SERVICE_HOST:"10.33.163.92",REPO_UPDATER_PORT_3182_TCP_PORT:"3182",HARBOR_REGISTRY_PORT_8080_TCP_PORT:"8080",REDIS_CACHE_PORT_6379_TCP_PORT:"6379",DNSCRYPT_PROXY_PORT_53_UDP_PROTO:"udp",REDIS_MASTER_PORT_6379_TCP_ADDR:"10.33.163.86",npm_package_description:"## setup",npm_package_devDependencies_vite_plugin_dynamic_import:"^1.2.3",npm_package_devDependencies_tailwindcss:"^3.2.2",npm_package_devDependencies__lingui_cli:"^4.5.0",npm_package_dependencies_react_router_dom:"^6.15.0",npm_package_scripts_knip:"npx knip",CI_CONCURRENT_ID:"0",HARBOR_REGISTRY_PORT_8080_TCP_PROTO:"tcp",GITLAB_WEBSERVICE_DEFAULT_PORT_8080_TCP_PORT:"8080",GITLAB_WEBSERVICE_DEFAULT_PORT_8083_TCP_ADDR:"10.33.162.110",GITLAB_GITLAB_EXPORTER_PORT_9168_TCP_ADDR:"10.33.167.206",GITLAB_GITLAB_PAGES_SERVICE_HOST:"10.33.171.79",WORKER_PORT_6060_TCP_ADDR:"10.33.171.55",BLOBSTORE_PORT_9000_TCP:"tcp://10.33.161.54:9000",GITLAB_REGISTRY_PORT_5000_TCP_PORT:"5000",REDIS_CACHE_PORT_6379_TCP_PROTO:"tcp",ELASTICSEARCH_PORT_9200_TCP_PORT:"9200",WORKER_EXECUTORS_PORT_6996_TCP_ADDR:"10.33.169.204",REPO_UPDATER_PORT_3182_TCP_PROTO:"tcp",OPENBLOCKS_MONGODB_PORT_27017_TCP_PORT:"27017",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_PORT_10254_TCP:"tcp://10.33.174.94:10254",HARBOR_CHARTMUSEUM_PORT_80_TCP:"tcp://10.33.169.173:80",npm_package_readmeFilename:"readme.md",npm_package_devDependencies__types_react_dom:"^18.2.7",npm_package_dependencies_sorted_btree:"^1.8.1",npm_package_dependencies_react_konva:"^18.2.10",npm_package_scripts_DUMMY:"",npm_package_scripts_targz:"tar -zcvf dist.tar.gz -C dist .",CI_REGISTRY_USER:"gitlab-ci-token",CI_SERVER_PORT:"443",FF_DISABLE_UMASK_FOR_DOCKER_EXECUTOR:"false",GITLAB_REGISTRY_PORT_5000_TCP_PROTO:"tcp",HARBOR_PORTAL_PORT_80_TCP_PORT:"80",SOURCEGRAPH_FRONTEND_INTERNAL_PORT_80_TCP_ADDR:"10.33.165.173",GITLAB_WEBSERVICE_DEFAULT_PORT_8080_TCP_PROTO:"tcp",HARBOR_JOBSERVICE_PORT:"tcp://10.33.160.250:80",GOPROXY_PORT_8080_TCP_PORT:"8080",ELASTICSEARCH_PORT_9200_TCP_PROTO:"tcp",GITLAB_KAS_PORT_8153_TCP:"tcp://10.33.167.136:8153",BLOBSTORE_SERVICE_PORT_BLOBSTORE:"9000",GITLAB_GITLAB_PAGES_PORT_8090_TCP_ADDR:"10.33.171.79",SYNTECT_SERVER_SERVICE_HOST:"10.33.162.114",ELASTICSEARCH_PORT_9300_TCP_PORT:"9300",OPENBLOCKS_MONGODB_PORT_27017_TCP_PROTO:"tcp",HARBOR_JOBSERVICE_SERVICE_PORT:"80",npm_package_devDependencies_prettier:"2.7.1",npm_package_devDependencies__wagmi_cli:"^1.5.2",npm_package_devDependencies__vitejs_plugin_react_swc:"^3.4.0",npm_package_scripts_dev:"vite",CI_PROJECT_DIR:"/builds/uniswap/trade",CI_PROJECT_PATH:"uniswap/trade",LOWCODER_MONGODB_PORT_27017_TCP_PORT:"27017",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_80_TCP:"tcp://10.33.175.199:80",GITLAB_KAS_PORT_8154_TCP:"tcp://10.33.167.136:8154",BLOBSTORE_PORT:"tcp://10.33.161.54:9000",GITLAB_WEBSERVICE_DEFAULT_PORT_8181_TCP_PORT:"8181",ELASTICSEARCH_PORT_9300_TCP_PROTO:"tcp",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_443_TCP_ADDR:"10.33.175.199",REDIS_MASTER_PORT_6379_TCP_PORT:"6379",PRECISE_CODE_INTEL_WORKER_PORT_3188_TCP_ADDR:"10.33.167.164",ELASTICSEARCH_SERVICE_HOST:"10.33.166.115",HARBOR_PORTAL_PORT_80_TCP_PROTO:"tcp",GOPROXY_PORT_8080_TCP_PROTO:"tcp",PGSQL_PORT_5432_TCP_ADDR:"10.33.175.130",BLOBSTORE_SERVICE_PORT:"9000",npm_package_devDependencies__vitejs_plugin_react:"^4.0.4",npm_package_devDependencies__babel_preset_typescript:"^7.18.6",npm_package_dependencies_konva:"^9.2.0",npm_package_dependencies_color_rgba:"^2.4.0",npm_package_dependencies__gfxlabs_jsrpc:"1.7.1",npm_package_scripts_prettier_write:"./node_modules/.bin/prettier --write .",npm_package_type:"module",CI_COMMIT_TIMESTAMP:"2023-10-02T21:52:52+00:00",FF_ENABLE_JOB_CLEANUP:"false",CI_PROJECT_NAMESPACE:"uniswap",SCAN_KUBERNETES_MANIFESTS:"false",DS_MAJOR_VERSION:"4",GITLAB_WEBSERVICE_DEFAULT_PORT_8083_TCP_PORT:"8083",WORKER_PORT_6060_TCP_PORT:"6060",GITLAB_WEBSERVICE_DEFAULT_PORT_8181_TCP_PROTO:"tcp",WORKER_EXECUTORS_PORT_6996_TCP_PORT:"6996",HARBOR_REGISTRY_SERVICE_PORT:"5000",GITLAB_GITLAB_EXPORTER_PORT_9168_TCP_PORT:"9168",DOCKERHUB_MIRROR_SERVICE_PORT_WEB:"5000",REDIS_MASTER_PORT_6379_TCP_PROTO:"tcp",OPENBLOCKS_LOWCODER_NODE_SERVICE_SERVICE_PORT_LOWCODER_NODE:"80",HARBOR_REGISTRY_PORT:"tcp://10.33.172.67:5000",LOWCODER_MONGODB_PORT_27017_TCP_PROTO:"tcp",npm_package_devDependencies__babel_preset_react:"^7.18.6",npm_package_dependencies_usehooks_ts:"^2.9.1",npm_package_private:"true",FF_USE_DIRECT_DOWNLOAD:"true",CI_NODE_TOTAL:"1",FF_USE_DYNAMIC_TRACE_FORCE_SEND_INTERVAL:"false",CI_SERVER_NAME:"GitLab",GITLAB_WEBSERVICE_DEFAULT_SERVICE_PORT:"8080",GITLAB_GITLAB_EXPORTER_PORT_9168_TCP_PROTO:"tcp",WORKER_PORT_6060_TCP_PROTO:"tcp",OPENBLOCKS_LOWCODER_NODE_SERVICE_PORT:"tcp://10.33.168.36:80",GITLAB_GITLAB_PAGES_PORT_8090_TCP_PORT:"8090",WORKER_EXECUTORS_PORT_6996_TCP_PROTO:"tcp",PGSQL_SERVICE_HOST:"10.33.175.130",SOURCEGRAPH_FRONTEND_INTERNAL_PORT_80_TCP_PORT:"80",GITHUB_PROXY_SERVICE_HOST:"10.33.168.25",GITLAB_WEBSERVICE_DEFAULT_PORT_8083_TCP_PROTO:"tcp",GITLAB_WEBSERVICE_DEFAULT_PORT:"tcp://10.33.162.110:8080",WORKER_SERVICE_HOST:"10.33.171.55",OPENBLOCKS_LOWCODER_NODE_SERVICE_SERVICE_PORT:"80",CI_JOB_TOKEN:"64_hKjxD7fsuENAUohSBvzE",npm_package_dependencies_react_window:"^1.8.9",npm_config_registry:"https://registry.yarnpkg.com",npm_config__open_registry:"https://gfx.cafe/api/v4/projects/268/packages/npm/",CI_PROJECT_NAMESPACE_ID:"239",CI_PIPELINE_CREATED_AT:"2023-10-02T22:59:13Z",GOPROXY_PORT:"tcp://10.33.166.109:8080",REPO_UPDATER_SERVICE_PORT:"3182",PGSQL_PORT_5432_TCP_PORT:"5432",REPO_UPDATER_PORT:"tcp://10.33.172.31:3182",GITLAB_GITLAB_PAGES_PORT_8090_TCP_PROTO:"tcp",PRECISE_CODE_INTEL_WORKER_SERVICE_PORT:"3188",GOPROXY_SERVICE_PORT:"8080",REDIS_STORE_SERVICE_HOST:"10.33.162.53",PRECISE_CODE_INTEL_WORKER_PORT:"tcp://10.33.167.164:3188",GITLAB_GITLAB_PAGES_METRICS_SERVICE_PORT_HTTP_METRICS:"9235",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_443_TCP_PORT:"443",SOURCEGRAPH_FRONTEND_INTERNAL_PORT_80_TCP_PROTO:"tcp",PRECISE_CODE_INTEL_WORKER_PORT_3188_TCP_PORT:"3188",npm_package_devDependencies__babel_plugin_proposal_private_property_in_object:"^7.21.11",npm_package_devDependencies__babel_core:"^7.20.2",npm_package_dependencies_loglevel:"^1.8.1",npm_package_dependencies__lingui_react:"^4.5.0",npm_package_resolutions_pseudolocale:"1.2.0",RUNNER_TEMP_PROJECT_DIR:"/builds/uniswap/trade.tmp",FF_USE_IMPROVED_URL_MASKING:"false",CI_JOB_NAME_SLUG:"build",CI_CONCURRENT_PROJECT_ID:"0",PGSQL_PORT_5432_TCP_PROTO:"tcp",PRECISE_CODE_INTEL_WORKER_PORT_6060_TCP:"tcp://10.33.167.164:6060",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_443_TCP_PROTO:"tcp",PRECISE_CODE_INTEL_WORKER_PORT_3188_TCP_PROTO:"tcp",OPENBLOCKS_LOWCODER_FRONTEND_SERVICE_PORT:"80",OPENBLOCKS_LOWCODER_API_SERVICE_SERVICE_PORT:"80",OPENBLOCKS_LOWCODER_API_SERVICE_PORT:"tcp://10.33.164.192:80",OPENBLOCKS_LOWCODER_FRONTEND_SERVICE_PORT_LOWCODER:"80",OPENBLOCKS_LOWCODER_FRONTEND_PORT:"tcp://10.33.163.92:80",GITLAB_GITLAB_PAGES_METRICS_SERVICE_HOST:"10.33.171.145",HARBOR_TRIVY_SERVICE_PORT_HTTP_TRIVY:"8080",KUBERNETES_PORT_443_TCP_ADDR:"10.33.160.1",SOURCEGRAPH_FRONTEND_PORT_30080_TCP:"tcp://10.33.161.104:30080",HARBOR_PASSWORD:"SwoN6a9s4X9eIb381s50Vw76qaqsVs2p",npm_package_devDependencies_react_helmet_async:"^1.3.0",npm_package_devDependencies_eslint_plugin_react_refresh:"^0.4.3",npm_package_dependencies_reconnecting_websocket:"^4.4.0",npm_config_ignore_scripts:"",npm_config_version:"1.22.19",FF_KUBERNETES_HONOR_ENTRYPOINT:"false",CI_PIPELINE_URL:"https://gfx.cafe/uniswap/trade/-/pipelines/28473",GITLAB_GITLAB_PAGES_PORT:"tcp://10.33.171.79:8090",SYNTECT_SERVER_PORT_9238_TCP_ADDR:"10.33.162.114",HARBOR_JOBSERVICE_PORT_80_TCP_ADDR:"10.33.160.250",OPENBLOCKS_LOWCODER_API_SERVICE_SERVICE_PORT_LOWCODER_API:"80",DNSCRYPT_PROXY_PORT_53_UDP:"udp://10.33.165.187:53",GITLAB_GITLAB_PAGES_SERVICE_PORT:"8090",PATH:"/tmp/yarn--1696287997023-0.6314120176183391:/builds/uniswap/trade/node_modules/.bin:/usr/local/share/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/tmp/yarn--1696287995896-0.45006513585004027:/builds/uniswap/trade/node_modules/.bin:/usr/local/share/.config/yarn/link/node_modules/.bin:/usr/local/libexec/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/lib/node_modules/npm/bin/node-gyp-bin:/usr/local/bin/node_modules/npm/bin/node-gyp-bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",NODE:"/usr/local/bin/node",CI_SERVER_VERSION_MINOR:"3",CI_RUNNER_DESCRIPTION:"gitlab-gitlab-runner-69b79bd694-nxwn5",CI_JOB_STARTED_AT:"2023-10-02T23:04:36Z",REPO_UPDATER_PORT_3182_TCP:"tcp://10.33.172.31:3182",REDIS_CACHE_PORT_6379_TCP:"tcp://10.33.165.236:6379",SYNTECT_SERVER_SERVICE_PORT:"9238",HARBOR_REGISTRY_PORT_8080_TCP:"tcp://10.33.172.67:8080",GITLAB_GITLAB_SHELL_SERVICE_HOST:"10.33.162.36",ELASTICSEARCH_SERVICE_PORT_TCP_REST_API:"9200",GITLAB_REGISTRY_SERVICE_HOST:"10.33.161.225",SYNTECT_SERVER_PORT:"tcp://10.33.162.114:9238",npm_package_dependencies_serve:"^14.2.0",npm_package_dependencies__lingui_macro:"^4.5.0",npm_package_name:"trade",CI_PROJECT_VISIBILITY:"private",CI_COMMIT_TITLE:"Merge branch 'createPoolTab' into 'master'",HARBOR_HOST:"hc.gfx.cafe",GITLAB_USER_EMAIL:"jjohnston@gfxlabs.io",CI_PROJECT_TITLE:"trade",FF_USE_NEW_BASH_EVAL_STRATEGY:"false",WORKER_PORT_3189_TCP_ADDR:"10.33.171.55",GITLAB_GITLAB_PAGES_METRICS_PORT_9235_TCP_ADDR:"10.33.171.145",KUBERNETES_PORT_443_TCP_PORT:"443",ELASTICSEARCH_PORT_9200_TCP:"tcp://10.33.166.115:9200",OPENBLOCKS_MONGODB_PORT_27017_TCP:"tcp://10.33.172.198:27017",GITLAB_WEBSERVICE_DEFAULT_PORT_8080_TCP:"tcp://10.33.162.110:8080",ELASTICSEARCH_SERVICE_PORT:"9200",ELASTICSEARCH_PORT:"tcp://10.33.166.115:9200",GITLAB_NGINX_INGRESS_CONTROLLER_SERVICE_PORT_HTTP:"80",GITLAB_REGISTRY_PORT_5000_TCP:"tcp://10.33.161.225:5000",HARBOR_CORE_SERVICE_PORT_HTTP_WEB:"80",KUBECONFIG:"/builds/uniswap/trade.tmp/KUBECONFIG",npm_package_devDependencies_vite_plugin_eslint:"^1.8.1",npm_package_devDependencies_change_case:"^4.1.2",npm_package_dependencies_viem:"^1.14.0",npm_package_dependencies__types_bunyan:"^1.8.8",npm_package_scripts_fmt:"yarn prettier:write",CI_SERVER:"yes",GITLAB_NGINX_INGRESS_CONTROLLER_SERVICE_PORT_GITLAB_SHELL:"22",HARBOR_JOBSERVICE_PORT_80_TCP_PORT:"80",CODEINTEL_DB_SERVICE_PORT_PGSQL:"5432",HARBOR_PORTAL_PORT_80_TCP:"tcp://10.33.167.51:80",SYNTECT_SERVER_PORT_9238_TCP_PORT:"9238",GOPROXY_PORT_8080_TCP:"tcp://10.33.166.109:8080",CODEINSIGHTS_DB_SERVICE_PORT_CODEINSIGHTS_DB:"5432",KUBERNETES_PORT_443_TCP_PROTO:"tcp",ELASTICSEARCH_PORT_9300_TCP:"tcp://10.33.166.115:9300",OPENBLOCKS_LOWCODER_NODE_SERVICE_PORT_80_TCP_ADDR:"10.33.168.36",npm_package_dependencies__tanstack_react_table:"^8.10.3",DS_EXCLUDED_PATHS:"spec, test, tests, tmp",CI_PAGES_URL:"https://uniswap.pages.gfx.cafe/trade",FF_CMD_DISABLE_DELAYED_ERROR_LEVEL_EXPANSION:"false",CI_PROJECT_REPOSITORY_LANGUAGES:"tsx,typescript,javascript,css,html",HARBOR_JOBSERVICE_PORT_80_TCP_PROTO:"tcp",HARBOR_JOBSERVICE_SERVICE_PORT_HTTP_JOBSERVICE:"80",PGSQL_PORT:"tcp://10.33.175.130:5432",WORKER_SERVICE_PORT:"3189",HARBOR_CORE_SERVICE_HOST:"10.33.161.119",HARBOR_REDIS_SERVICE_HOST:"10.33.174.245",REDIS_MASTER_PORT_6379_TCP:"tcp://10.33.163.86:6379",PGSQL_SERVICE_PORT:"5432",GOPROXY_SERVICE_PORT_PROXY:"8080",LOWCODER_MONGODB_PORT_27017_TCP:"tcp://10.33.162.202:27017",HARBOR_TRIVY_PORT_8080_TCP_ADDR:"10.33.171.144",HARBOR_TRIVY_SERVICE_HOST:"10.33.171.144",WORKER_PORT:"tcp://10.33.171.55:3189",GITHUB_PROXY_SERVICE_PORT:"80",SYNTECT_SERVER_PORT_9238_TCP_PROTO:"tcp",GITHUB_PROXY_PORT:"tcp://10.33.168.25:80",GITLAB_WEBSERVICE_DEFAULT_PORT_8181_TCP:"tcp://10.33.162.110:8181",npm_package_devDependencies_rollup_plugin_terser:"^7.0.2",npm_package_devDependencies_eslint:"^8.34.0",npm_package_dependencies_react_dom:"^18.2.0",FF_SET_PERMISSIONS_BEFORE_CLEANUP:"true",DS_EXCLUDED_ANALYZERS:"",HARBOR_URL:"https://hc.gfx.cafe",CI_COMMIT_AUTHOR:"Jake Johnston <jjohnston@gfxlabs.io>",GITLAB_GITLAB_EXPORTER_PORT_9168_TCP:"tcp://10.33.167.206:9168",REDIS_STORE_SERVICE_PORT:"6379",REDIS_STORE_PORT:"tcp://10.33.162.53:6379",WORKER_PORT_6060_TCP:"tcp://10.33.171.55:6060",GITLAB_GITLAB_PAGES_METRICS_PORT_9235_TCP_PORT:"9235",WORKER_EXECUTORS_PORT_6996_TCP:"tcp://10.33.169.204:6996",OPENBLOCKS_LOWCODER_API_SERVICE_PORT_80_TCP_ADDR:"10.33.164.192",GITLAB_WEBSERVICE_DEFAULT_PORT_8083_TCP:"tcp://10.33.162.110:8083",WORKER_PORT_3189_TCP_PORT:"3189",OPENBLOCKS_LOWCODER_FRONTEND_PORT_80_TCP_ADDR:"10.33.163.92",npm_lifecycle_script:"yarn lingui && vite build",npm_package_dependencies_ts_node:"^10.9.1",CI_JOB_IMAGE:"node:18.17-alpine",CI_PAGES_DOMAIN:"pages.gfx.cafe",CI_RUNNER_SHORT_TOKEN:"wngtQvJW",GITLAB_KAS_SERVICE_PORT_TCP_KAS_K8S_API:"8154",GITLAB_GITLAB_PAGES_METRICS_SERVICE_PORT:"9235",WORKER_PORT_3189_TCP_PROTO:"tcp",OPENBLOCKS_LOWCODER_NODE_SERVICE_PORT_80_TCP_PORT:"80",GITLAB_GITLAB_PAGES_METRICS_PORT_9235_TCP_PROTO:"tcp",SOURCEGRAPH_FRONTEND_INTERNAL_PORT_80_TCP:"tcp://10.33.165.173:80",GITLAB_WEBSERVICE_DEFAULT_SERVICE_PORT_HTTP_WORKHORSE:"8181",GITLAB_GITLAB_PAGES_METRICS_PORT:"tcp://10.33.171.145:9235",REDIS_MASTER_SERVICE_PORT_TCP_REDIS:"6379",GITLAB_GITLAB_PAGES_PORT_8090_TCP:"tcp://10.33.171.79:8090",npm_package_devDependencies__tailwindcss_typography:"^0.5.9",npm_package_scripts_test:"vitest",npm_package_scripts_cypress_open:"yarn run cypress open",npm_config_version_git_message:"v%s",npm_config_network_concurrency:"64",CI_JOB_TIMEOUT:"3600",CI_PIPELINE_NAME:"",CI_PROJECT_CLASSIFICATION_LABEL:"",GITLAB_KAS_SERVICE_PORT_TCP_KAS_INTERNAL_API:"8153",OPENBLOCKS_LOWCODER_NODE_SERVICE_PORT_80_TCP_PROTO:"tcp",REDIS_STORE_SERVICE_PORT_REDIS:"6379",REDIS_STORE_PORT_6379_TCP_ADDR:"10.33.162.53",GITLAB_NGINX_INGRESS_CONTROLLER_SERVICE_PORT_HTTPS:"443",PRECISE_CODE_INTEL_WORKER_PORT_3188_TCP:"tcp://10.33.167.164:3188",HARBOR_CHARTMUSEUM_SERVICE_HOST:"10.33.169.173",PGSQL_PORT_5432_TCP:"tcp://10.33.175.130:5432",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_443_TCP:"tcp://10.33.175.199:443",HARBOR_TRIVY_PORT_8080_TCP_PORT:"8080",CI_REPOSITORY_URL:"https://gitlab-ci-token:64_hKjxD7fsuENAUohSBvzE@gfx.cafe/uniswap/trade.git",GOPROXY:"http://goproxy.default.svc:8080,https://go.gfx.cafe/,https://proxy.golang.org,direct ",npm_lifecycle_event:"build",npm_package_devDependencies_make_plural:"^7.3.0",npm_package_devDependencies_jsbi:"3.2.4",npm_package_devDependencies__types_react:"^18.0.24",npm_package_version:"0.0.0",CI_RUNNER_ID:"76",CI_API_GRAPHQL_URL:"https://gfx.cafe/api/graphql",FF_USE_POWERSHELL_PATH_RESOLVER:"false",OPENBLOCKS_LOWCODER_FRONTEND_PORT_80_TCP_PORT:"80",DNSCRYPT_PROXY_SERVICE_PORT_DNS_UDP:"53",OPENBLOCKS_LOWCODER_API_SERVICE_PORT_80_TCP_PORT:"80",GITLAB_GITLAB_SHELL_PORT:"tcp://10.33.162.36:22",GITLAB_GITLAB_SHELL_SERVICE_PORT:"22",GITLAB_REGISTRY_SERVICE_PORT:"5000",HARBOR_TRIVY_PORT_8080_TCP_PROTO:"tcp",GITLAB_REGISTRY_PORT:"tcp://10.33.161.225:5000",HARBOR_REGISTRY_SERVICE_PORT_HTTP_REGISTRY:"5000",npm_config_argv:'{"remain":[],"cooked":["run","buildci"],"original":["buildci"]}',npm_package_dependencies_fast_deep_equal:"^3.1.3",npm_package_dependencies__heroicons_react:"^2.0.13",npm_package_scripts_build:"yarn lingui && vite build",GITLAB_USER_NAME:"Jake Johnston",CI_REGISTRY:"cr.gfx.cafe",CI_API_V4_URL:"https://gfx.cafe/api/v4",ELASTICSEARCH_SERVICE_PORT_TCP_TRANSPORT:"9300",WORKER_EXECUTORS_SERVICE_PORT_PROM:"6996",GITLAB_NGINX_INGRESS_CONTROLLER_SERVICE_HOST:"10.33.175.199",OPENBLOCKS_LOWCODER_FRONTEND_PORT_80_TCP_PROTO:"tcp",OPENBLOCKS_LOWCODER_API_SERVICE_PORT_80_TCP_PROTO:"tcp",CI_JOB_JWT_V1:"eyJraWQiOiI5U1lVV0Y2VmFXcm9URFpRMHZZc3FFTDd5cjNpakRfcDg2R25fV3lOdEJBIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJuYW1lc3BhY2VfaWQiOiIyMzkiLCJuYW1lc3BhY2VfcGF0aCI6InVuaXN3YXAiLCJwcm9qZWN0X2lkIjoiMjIyIiwicHJvamVjdF9wYXRoIjoidW5pc3dhcC90cmFkZSIsInVzZXJfaWQiOiI1IiwidXNlcl9sb2dpbiI6Impqb2huc3RvbjQiLCJ1c2VyX2VtYWlsIjoiampvaG5zdG9uQGdmeGxhYnMuaW8iLCJwaXBlbGluZV9pZCI6IjI4NDczIiwicGlwZWxpbmVfc291cmNlIjoicHVzaCIsImpvYl9pZCI6Ijk3ODAwIiwicmVmIjoidjAuMS4zNiIsInJlZl90eXBlIjoidGFnIiwicmVmX3BhdGgiOiJyZWZzL3RhZ3MvdjAuMS4zNiIsInJlZl9wcm90ZWN0ZWQiOiJmYWxzZSIsImp0aSI6IjI4YzgzZDBhLWY2MTQtNDg1Yy1iZWYzLWEwMmRkYTk5ZDAxMyIsImlzcyI6ImdmeC5jYWZlIiwiaWF0IjoxNjk2Mjg3ODc2LCJuYmYiOjE2OTYyODc4NzEsImV4cCI6MTY5NjI5MTQ3Niwic3ViIjoiam9iXzk3ODAwIn0.ttkfZLBoZOTBP90TMRADV6AT1t1QhS78SXnCG498tuJ8PIdzdrYXysKV2I3XTAu9pyezszZwGByIX5o7PHvf7VAVottrGg5v07hBHj5NTlu43eXpiu9bFx4Zka8VR6m_N-XpVtQ3-stICIBEUZ48rauVCiZZBD6dco7zPmKJrJwTImO-DC9hUFufQcDs0M8ZfaWivq6rE2pYLQxlK6LX76grWOS6RQztYkXK2G9SXdzAnpQjAlbsd58E5ni_gg3wzf4SIY31SyW22PDoNc40i48F7Zl-GNVm4_vjdbD84BiC9qY-g-X36T0HAH7v9f3Sd2L8cNIa1ackx7QLP2MkVg",npm_package_devDependencies_cypress:"^12.17.1",npm_package_dependencies__types_color_rgba:"^2.1.0",CI_PIPELINE_IID:"5036",GITLAB_GITLAB_PAGES_SERVICE_PORT_HTTP_GITLAB_PAGES_PROXY:"8090",GITLAB_WEBSERVICE_DEFAULT_SERVICE_PORT_HTTP_WEBSERVICE:"8080",REDIS_STORE_PORT_6379_TCP_PORT:"6379",GITHUB_PROXY_PORT_80_TCP_ADDR:"10.33.168.25",GITLAB_GITLAB_SHELL_PORT_22_TCP_ADDR:"10.33.162.36",CI_JOB_JWT_V2:"eyJraWQiOiI5U1lVV0Y2VmFXcm9URFpRMHZZc3FFTDd5cjNpakRfcDg2R25fV3lOdEJBIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJuYW1lc3BhY2VfaWQiOiIyMzkiLCJuYW1lc3BhY2VfcGF0aCI6InVuaXN3YXAiLCJwcm9qZWN0X2lkIjoiMjIyIiwicHJvamVjdF9wYXRoIjoidW5pc3dhcC90cmFkZSIsInVzZXJfaWQiOiI1IiwidXNlcl9sb2dpbiI6Impqb2huc3RvbjQiLCJ1c2VyX2VtYWlsIjoiampvaG5zdG9uQGdmeGxhYnMuaW8iLCJwaXBlbGluZV9pZCI6IjI4NDczIiwicGlwZWxpbmVfc291cmNlIjoicHVzaCIsImpvYl9pZCI6Ijk3ODAwIiwicmVmIjoidjAuMS4zNiIsInJlZl90eXBlIjoidGFnIiwicmVmX3BhdGgiOiJyZWZzL3RhZ3MvdjAuMS4zNiIsInJlZl9wcm90ZWN0ZWQiOiJmYWxzZSIsInJ1bm5lcl9pZCI6NzYsInJ1bm5lcl9lbnZpcm9ubWVudCI6InNlbGYtaG9zdGVkIiwic2hhIjoiOTU5MDIwMDhjYjIzNTY4YjRiNWRjOWZlY2VjOGNlMTU1YmQxMGVhMSIsInByb2plY3RfdmlzaWJpbGl0eSI6InByaXZhdGUiLCJjaV9jb25maWdfcmVmX3VyaSI6ImdmeC5jYWZlL3VuaXN3YXAvdHJhZGUvLy5naXRsYWItY2kueW1sQHJlZnMvdGFncy92MC4xLjM2IiwiY2lfY29uZmlnX3NoYSI6Ijk1OTAyMDA4Y2IyMzU2OGI0YjVkYzlmZWNlYzhjZTE1NWJkMTBlYTEiLCJqdGkiOiJhOTAzN2UyZS00NWMxLTRjYmItYmVhMy0xYzM2YjU1NGJiMTkiLCJpc3MiOiJodHRwczovL2dmeC5jYWZlIiwiaWF0IjoxNjk2Mjg3ODc2LCJuYmYiOjE2OTYyODc4NzEsImV4cCI6MTY5NjI5MTQ3Niwic3ViIjoicHJvamVjdF9wYXRoOnVuaXN3YXAvdHJhZGU6cmVmX3R5cGU6dGFnOnJlZjp2MC4xLjM2IiwiYXVkIjoiaHR0cHM6Ly9nZnguY2FmZSJ9.Ma5b8m3nsf-TGITvaZEkqHqgavEwxbvR8aWzLTdA7dp_5SWNeIhLWXsREygZe1nq4kViDFb7tRcwFDqA9Xz9BU2WF6J-pzfLEFDRababE-VuGwNc3BrW3xUcvAVJ5BXRe_vclpx5Ve7_AQXncqYl9dK_OzzaiZUkEoCdhN1IMqOB_bnDqSg-azmRmZ-sVEz3c9s8dJ4BnPkwfBuDvLHwyeHLa1O2oqmXA2V07cdLNxz5CPz1WaOpKn3qP6-Mc9bFflvspbxXDZHtR8M5L2nMJ3VCPyVbIWFQmFFLMqt0yxABHqgu3O4ayMSy-iE8MDb2_Y6b-WYYeEUZarMUkRkUPw",npm_package_devDependencies_tiny_invariant:"^1.3.1",npm_package_dependencies__tanstack_react_query:"^4.35.3",npm_package_dependencies__multibase_js:"^0.1.9",npm_config_version_git_tag:"true",npm_config_version_git_sign:"",CI_SERVER_SHELL_SSH_HOST:"gfx.cafe",FF_USE_POD_ACTIVE_DEADLINE_SECONDS:"false",CI_RUNNER_EXECUTABLE_ARCH:"linux/amd64",FF_USE_ADVANCED_POD_SPEC_CONFIGURATION:"false",CI_JOB_URL:"https://gfx.cafe/uniswap/trade/-/jobs/97800",HARBOR_REDIS_SERVICE_PORT:"6379",HARBOR_TRIVY_SERVICE_PORT:"8080",HARBOR_REDIS_PORT:"tcp://10.33.174.245:6379",HARBOR_CORE_SERVICE_PORT:"80",SOURCEGRAPH_FRONTEND_INTERNAL_SERVICE_PORT_HTTP_INTERNAL:"80",HARBOR_TRIVY_PORT:"tcp://10.33.171.144:8080",KUBERNETES_SERVICE_PORT_HTTPS:"443",REDIS_STORE_PORT_6379_TCP_PROTO:"tcp",HARBOR_CORE_PORT:"tcp://10.33.161.119:80",KUBERNETES_PORT_443_TCP:"tcp://10.33.160.1:443",npm_package_dependencies__types_react_window:"^1.8.5",npm_package_scripts_lingui:"lingui extract",npm_config_strict_ssl:"true",SYNTECT_SERVER_PORT_9238_TCP:"tcp://10.33.162.114:9238",HARBOR_JOBSERVICE_PORT_80_TCP:"tcp://10.33.160.250:80",DNSCRYPT_PROXY_SERVICE_HOST:"10.33.165.187",DOCKERHUB_MIRROR_PORT_5000_TCP_ADDR:"10.33.174.243",npm_package_devDependencies_eslint_config_react_app:"^7.0.1",npm_package_devDependencies__lingui_vite_plugin:"^4.5.0",npm_package_scripts_prune_locale:"lingui extract --clean",npm_package_scripts_coverage:"vitest run --coverage",CI_DISPOSABLE_ENVIRONMENT:"true",CI_COMMIT_REF_SLUG:"v0-1-36",GITLAB_KAS_SERVICE_PORT_TCP_KAS_EXTERNAL_API:"8150",GITHUB_PROXY_PORT_80_TCP_PORT:"80",GITLAB_GITLAB_SHELL_PORT_22_TCP_PORT:"22",KUBERNETES_SERVICE_HOST:"10.33.160.1",HARBOR_REDIS_PORT_6379_TCP_ADDR:"10.33.174.245",PWD:"/builds/uniswap/trade",CI_JOB_JWT:"eyJraWQiOiI5U1lVV0Y2VmFXcm9URFpRMHZZc3FFTDd5cjNpakRfcDg2R25fV3lOdEJBIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJuYW1lc3BhY2VfaWQiOiIyMzkiLCJuYW1lc3BhY2VfcGF0aCI6InVuaXN3YXAiLCJwcm9qZWN0X2lkIjoiMjIyIiwicHJvamVjdF9wYXRoIjoidW5pc3dhcC90cmFkZSIsInVzZXJfaWQiOiI1IiwidXNlcl9sb2dpbiI6Impqb2huc3RvbjQiLCJ1c2VyX2VtYWlsIjoiampvaG5zdG9uQGdmeGxhYnMuaW8iLCJwaXBlbGluZV9pZCI6IjI4NDczIiwicGlwZWxpbmVfc291cmNlIjoicHVzaCIsImpvYl9pZCI6Ijk3ODAwIiwicmVmIjoidjAuMS4zNiIsInJlZl90eXBlIjoidGFnIiwicmVmX3BhdGgiOiJyZWZzL3RhZ3MvdjAuMS4zNiIsInJlZl9wcm90ZWN0ZWQiOiJmYWxzZSIsImp0aSI6IjI4YzgzZDBhLWY2MTQtNDg1Yy1iZWYzLWEwMmRkYTk5ZDAxMyIsImlzcyI6ImdmeC5jYWZlIiwiaWF0IjoxNjk2Mjg3ODc2LCJuYmYiOjE2OTYyODc4NzEsImV4cCI6MTY5NjI5MTQ3Niwic3ViIjoiam9iXzk3ODAwIn0.ttkfZLBoZOTBP90TMRADV6AT1t1QhS78SXnCG498tuJ8PIdzdrYXysKV2I3XTAu9pyezszZwGByIX5o7PHvf7VAVottrGg5v07hBHj5NTlu43eXpiu9bFx4Zka8VR6m_N-XpVtQ3-stICIBEUZ48rauVCiZZBD6dco7zPmKJrJwTImO-DC9hUFufQcDs0M8ZfaWivq6rE2pYLQxlK6LX76grWOS6RQztYkXK2G9SXdzAnpQjAlbsd58E5ni_gg3wzf4SIY31SyW22PDoNc40i48F7Zl-GNVm4_vjdbD84BiC9qY-g-X36T0HAH7v9f3Sd2L8cNIa1ackx7QLP2MkVg",npm_execpath:"/opt/yarn-v1.22.19/bin/yarn.js",CI_RUNNER_TAGS:"[]",FF_USE_NEW_SHELL_ESCAPE:"false",FF_SECRET_RESOLVING_FAILS_IF_MISSING:"true",HARBOR_CHARTMUSEUM_SERVICE_PORT:"80",GITLAB_GITLAB_PAGES_METRICS_PORT_9235_TCP:"tcp://10.33.171.145:9235",GITHUB_PROXY_PORT_80_TCP_PROTO:"tcp",GITLAB_GITLAB_SHELL_PORT_22_TCP_PROTO:"tcp",WORKER_PORT_3189_TCP:"tcp://10.33.171.55:3189",HARBOR_CHARTMUSEUM_PORT:"tcp://10.33.169.173:80",npm_package_devDependencies__rollup_plugin_replace:"^5.0.2",npm_package_dependencies_react_ga4:"^2.1.0",npm_package_dependencies__ethersproject_providers:"^5.7.2",CI_PROJECT_PATH_SLUG:"uniswap-trade",CI_CONFIG_PATH:".gitlab-ci.yml",CI_PIPELINE_ID:"28473",CI_SERVER_TLS_CA_FILE:"/builds/uniswap/trade.tmp/CI_SERVER_TLS_CA_FILE",CI_PROJECT_URL:"https://gfx.cafe/uniswap/trade",CI_COMMIT_BEFORE_SHA:"0000000000000000000000000000000000000000",DOCKERHUB_MIRROR_PORT_5000_TCP_PORT:"5000",OPENBLOCKS_LOWCODER_NODE_SERVICE_PORT_80_TCP:"tcp://10.33.168.36:80",GITLAB_NGINX_INGRESS_CONTROLLER_METRICS_SERVICE_HOST:"10.33.174.94",OPENBLOCKS_MONGODB_SERVICE_PORT_MONGODB:"27017",SOURCEGRAPH_FRONTEND_SERVICE_PORT_HTTP:"30080",CODEINTEL_DB_PORT_5432_TCP_ADDR:"10.33.166.78",npm_package_devDependencies_babel_plugin_macros:"^3.1.0",npm_config_save_prefix:"^",npm_config_ignore_optional:"",npm_config_yarn_offline_mirror:"/builds/uniswap/trade/.yarn-cache",CI_COMMIT_MESSAGE:`Merge branch 'createPoolTab' into 'master'

shows modal

See merge request uniswap/trade!616`,REDIS_METRICS_PORT_9121_TCP_ADDR:"10.33.174.118",HARBOR_REDIS_PORT_6379_TCP_PORT:"6379",GITLAB_NGINX_INGRESS_CONTROLLER_SERVICE_PORT:"80",DOCKERHUB_MIRROR_PORT_5000_TCP_PROTO:"tcp",HARBOR_TRIVY_PORT_8080_TCP:"tcp://10.33.171.144:8080",GITLAB_NGINX_INGRESS_CONTROLLER_PORT:"tcp://10.33.175.199:80",npm_package_devDependencies_rollup_plugin_visualizer:"^5.9.2",npm_package_devDependencies_dedent:"^1.5.1",npm_package_dependencies__web3modal_wagmi:"^3.0.2",npm_package_scripts_preview:"yarn build && vite preview",GITLAB_USER_ID:"5",FF_ENABLE_BASH_EXIT_CODE_CHECK:"false",OPENBLOCKS_LOWCODER_API_SERVICE_PORT_80_TCP:"tcp://10.33.164.192:80",CODEINTEL_DB_SERVICE_HOST:"10.33.166.78",HARBOR_REDIS_PORT_6379_TCP_PROTO:"tcp",HARBOR_PORTAL_SERVICE_HOST:"10.33.167.51",HARBOR_CORE_PORT_80_TCP_ADDR:"10.33.161.119",OPENBLOCKS_LOWCODER_FRONTEND_PORT_80_TCP:"tcp://10.33.163.92:80",HARBOR_REGISTRY_PORT_5000_TCP_ADDR:"10.33.172.67",LOWCODER_MONGODB_SERVICE_PORT_MONGODB:"27017",npm_package_devDependencies_knip:"^2.19.11",npm_package_dependencies_typescript:"5.1.6",npm_package_scripts_lint_check:"tsc --noEmit && eslint 'src/**/*.ts{,x}' --cache --max-warnings=0",npm_package_scripts_buildci:"yarn makeconfig && yarn build && yarn targz",npm_package_scripts_makeconfig:"node hack/makeconfig.js > public/config.js",INIT_CWD:"/builds/uniswap/trade",CI_JOB_STATUS:"running",SAST_EXCLUDED_PATHS:"spec, test, tests, tmp",CI_JOB_NAME:"build",CI_SERVER_SHELL_SSH_PORT:"22",CODEINTEL_DB_PORT_5432_TCP_PORT:"5432",GITLAB_NGINX_INGRESS_CONTROLLER_PORT_22_TCP_ADDR:"10.33.175.199",REDIS_METRICS_SERVICE_PORT_HTTP_METRICS:"9121",CODEINSIGHTS_DB_PORT_5432_TCP_ADDR:"10.33.175.8",WORKER_EXECUTORS_SERVICE_HOST:"10.33.169.204",GITLAB_KAS_PORT_8150_TCP_ADDR:"10.33.167.136",npm_package_dependencies_react:"^18.2.0",npm_package_dependencies__tanstack_table_core:"^8.10.3",npm_package_dependencies__gfxlabs_oku:"^1.0.73",npm_package_resolutions__uniswap_sdk_core:"npm:@gfxlabs/uniswap-sdk-core@4.3.6-3",NODE_ENV:"production",SENTRY_PIPELINE:"vite-plugin/2.7.1"}.IS_VITEST}get context(){return Ae.getLoggerContext(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ne.toMiliseconds(r))}}var OO=Object.defineProperty,Bh=Object.getOwnPropertySymbols,bO=Object.prototype.hasOwnProperty,IO=Object.prototype.propertyIsEnumerable,Fh=(o,r,t)=>r in o?OO(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Mh=(o,r)=>{for(var t in r||(r={}))bO.call(r,t)&&Fh(o,t,r[t]);if(Bh)for(var t of Bh(r))IO.call(r,t)&&Fh(o,t,r[t]);return o};class Uc extends Gm{constructor(r){super(r),this.protocol=V_,this.version=wT,this.name=Hc,this.events=new wr.EventEmitter,this.initialized=!1,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.projectId=r==null?void 0:r.projectId,this.relayUrl=(r==null?void 0:r.relayUrl)||U_;const t=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Ae.pino(Ae.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||PT.logger}));this.logger=Ae.generateChildLogger(t,this.name),this.heartbeat=new dn.HeartBeat,this.crypto=new tO(this,this.logger,r==null?void 0:r.keychain),this.history=new vO(this,this.logger),this.expirer=new RO(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new $E(Mh(Mh({},ST),r==null?void 0:r.storageOptions)),this.relayer=new dO({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new mO(this,this.logger),this.verify=new TO(this.projectId||"",this.logger)}static async init(r){const t=new Uc(r);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(kT,n),t}get context(){return Ae.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}}const wO=Uc,$_="wc",k_=2,q_="client",$c=`${$_}@${k_}:${q_}:`,oc={name:q_,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},jh="WALLETCONNECT_DEEPLINK_CHOICE",PO="proposal",z_="Proposal expired",SO="session",la=ne.SEVEN_DAYS,CO="engine",$n={wc_sessionPropose:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1115}}},cc={min:ne.FIVE_MINUTES,max:ne.SEVEN_DAYS},si={idle:"IDLE",active:"ACTIVE"},AO="request",xO=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var DO=Object.defineProperty,NO=Object.defineProperties,LO=Object.getOwnPropertyDescriptors,Gh=Object.getOwnPropertySymbols,BO=Object.prototype.hasOwnProperty,FO=Object.prototype.propertyIsEnumerable,Vh=(o,r,t)=>r in o?DO(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,or=(o,r)=>{for(var t in r||(r={}))BO.call(r,t)&&Vh(o,t,r[t]);if(Gh)for(var t of Gh(r))FO.call(r,t)&&Vh(o,t,r[t]);return o},kn=(o,r)=>NO(o,LO(r));class MO extends Ym{constructor(r){super(r),this.name=CO,this.events=new Lc,this.initialized=!1,this.ignoredPayloadTypes=[i_],this.requestQueue={state:si.idle,queue:[]},this.sessionRequestQueue={state:si.idle,queue:[]},this.requestQueueDelay=ne.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys($n)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const n=kn(or({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:s,requiredNamespaces:c,optionalNamespaces:h,sessionProperties:f,relays:m}=n;let g=s,P,F=!1;if(g&&(F=this.client.core.pairing.pairings.get(g).active),!g||!F){const{topic:fe,uri:le}=await this.client.core.pairing.create();g=fe,P=le}const C=await this.client.core.crypto.generateKeyPair(),G=or({requiredNamespaces:c,optionalNamespaces:h,relays:m??[{protocol:H_}],proposer:{publicKey:C,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:B,resolve:z,done:ie}=un(ne.FIVE_MINUTES,z_);if(this.events.once(Nt("session_connect"),async({error:fe,session:le})=>{if(fe)B(fe);else if(le){le.self.publicKey=C;const he=kn(or({},le),{requiredNamespaces:le.requiredNamespaces,optionalNamespaces:le.optionalNamespaces});await this.client.session.set(le.topic,he),await this.setExpiry(le.topic,le.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:le.peer.metadata}),z(he)}}),!g){const{message:fe}=Q("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(fe)}const Te=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:G}),de=Nr(ne.FIVE_MINUTES);return await this.setProposal(Te,or({id:Te,expiry:de},G)),{uri:P,approval:ie}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:s,namespaces:c,sessionProperties:h}=t,f=this.client.proposal.get(n);let{pairingTopic:m,proposer:g,requiredNamespaces:P,optionalNamespaces:F}=f;m=m||"",pa(P)||(P=Xy(c,"approve()"));const C=await this.client.core.crypto.generateKeyPair(),G=g.publicKey,B=await this.client.core.crypto.generateSharedKey(C,G);m&&n&&(await this.client.core.pairing.updateMetadata({topic:m,metadata:g.metadata}),await this.sendResult({id:n,topic:m,result:{relay:{protocol:s??"irn"},responderPublicKey:C}}),await this.client.proposal.delete(n,er("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}));const z=or({relay:{protocol:s??"irn"},namespaces:c,requiredNamespaces:P,optionalNamespaces:F,pairingTopic:m,controller:{publicKey:C,metadata:this.client.metadata},expiry:Nr(la)},h&&{sessionProperties:h});await this.client.core.relayer.subscribe(B),await this.sendRequest({topic:B,method:"wc_sessionSettle",params:z,throwOnFailedPublish:!0});const ie=kn(or({},z),{topic:B,pairingTopic:m,acknowledged:!1,self:z.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:C});return await this.client.session.set(B,ie),await this.setExpiry(B,Nr(la)),{topic:B,acknowledged:()=>new Promise(Te=>setTimeout(()=>Te(this.client.session.get(B)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:n,reason:s}=t,{pairingTopic:c}=this.client.proposal.get(n);c&&(await this.sendError(n,c,s),await this.client.proposal.delete(n,er("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:s}=t,c=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s}}),{done:h,resolve:f,reject:m}=un();return this.events.once(Nt("session_update",c),({error:g})=>{g?m(g):f()}),await this.client.session.update(n,{namespaces:s}),{acknowledged:h}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,s=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:c,resolve:h,reject:f}=un();return this.events.once(Nt("session_extend",s),({error:m})=>{m?f(m):h()}),await this.setExpiry(n,Nr(la)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:s,topic:c,expiry:h}=t,f=jc(),{done:m,resolve:g,reject:P}=un(h);return this.events.once(Nt("session_request",f),({error:F,result:C})=>{F?P(F):g(C)}),await Promise.all([new Promise(async F=>{await this.sendRequest({clientRpcId:f,topic:c,method:"wc_sessionRequest",params:{request:s,chainId:n},expiry:h,throwOnFailedPublish:!0}).catch(C=>P(C)),this.client.events.emit("session_request_sent",{topic:c,request:s,chainId:n,id:f}),F()}),new Promise(async F=>{const C=await this.client.core.storage.getItem(jh);Zy({id:f,topic:c,wcDeepLink:C}),F()}),m()]).then(F=>F[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:s}=t,{id:c}=s;ai(s)?await this.sendResult({id:c,topic:n,result:s.result,throwOnFailedPublish:!0}):Lr(s)&&await this.sendError(c,n,s.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const s=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:c,resolve:h,reject:f}=un();this.events.once(Nt("session_ping",s),({error:m})=>{m?f(m):h()}),await c()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:s,chainId:c}=t;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;this.client.session.keys.includes(n)?(await this.sendRequest({topic:n,method:"wc_sessionDelete",params:er("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(n=>Qy(n,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(c=>{var h,f;return((h=c.peerMetadata)==null?void 0:h.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(t,n)=>{const{self:s}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,er("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(s.publicKey)&&await this.client.core.crypto.deleteKeyPair(s.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t),this.client.core.storage.removeItem(jh).catch(c=>this.client.logger.warn(c))},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,er("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),s?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),s&&(this.sessionRequestQueue.state=si.idle)},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=$n.wc_sessionRequest.req.ttl,{id:s,topic:c,params:h,verifyContext:f}=t;await this.client.pendingRequest.set(s,{id:s,topic:c,params:h,verifyContext:f}),n&&this.client.core.expirer.set(s,Nr(n))},this.sendRequest=async t=>{const{topic:n,method:s,params:c,expiry:h,relayRpcId:f,clientRpcId:m,throwOnFailedPublish:g}=t,P=fn(s,c,m);if(s_()&&xO.includes(s)){const G=_n(JSON.stringify(P));this.client.core.verify.register({attestationId:G})}const F=await this.client.core.crypto.encode(n,P),C=$n[s].req;return h&&(C.ttl=h),f&&(C.id=f),this.client.core.history.set(n,P),g?(C.internal=kn(or({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,F,C)):this.client.core.relayer.publish(n,F,C).catch(G=>this.client.logger.error(G)),P.id},this.sendResult=async t=>{const{id:n,topic:s,result:c,throwOnFailedPublish:h}=t,f=Gc(n,c),m=await this.client.core.crypto.encode(s,f),g=await this.client.core.history.get(s,n),P=$n[g.request.method].res;h?(P.internal=kn(or({},P.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,m,P)):this.client.core.relayer.publish(s,m,P).catch(F=>this.client.logger.error(F)),await this.client.core.history.resolve(f)},this.sendError=async(t,n,s)=>{const c=Ta(t,s),h=await this.client.core.crypto.encode(n,c),f=await this.client.core.history.get(n,t),m=$n[f.request.method].res;this.client.core.relayer.publish(n,h,m),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach(s=>{Ei(s.expiry)&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Ei(s.expiry)&&n.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession(s)),...n.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===si.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=si.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=si.idle},this.processRequest=t=>{const{topic:n,payload:s}=t,c=s.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(n,s);case"wc_sessionSettle":return this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return this.onSessionExtendRequest(n,s);case"wc_sessionPing":return this.onSessionPingRequest(n,s);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return this.onSessionRequest(n,s);case"wc_sessionEvent":return this.onSessionEventRequest(n,s);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:s}=t,c=(await this.client.core.history.get(n,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:n}=t,{message:s}=Q("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.onSessionProposeRequest=async(t,n)=>{const{params:s,id:c}=n;try{this.isValidConnect(or({},n.params));const h=Nr(ne.FIVE_MINUTES),f=or({id:c,pairingTopic:t,expiry:h},s);await this.setProposal(c,f);const m=_n(JSON.stringify(n)),g=await this.getVerifyContext(m,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:g})}catch(h){await this.sendError(c,t,h),this.client.logger.error(h)}},this.onSessionProposeResponse=async(t,n)=>{const{id:s}=n;if(ai(n)){const{result:c}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const h=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:h});const f=h.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const m=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const g=await this.client.core.crypto.generateSharedKey(f,m);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const P=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:P}),await this.client.core.pairing.activate({topic:t})}else Lr(n)&&(await this.client.proposal.delete(s,er("USER_DISCONNECTED")),this.events.emit(Nt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidSessionSettleRequest(c);const{relay:h,controller:f,expiry:m,namespaces:g,requiredNamespaces:P,optionalNamespaces:F,sessionProperties:C,pairingTopic:G}=n.params,B=or({topic:t,relay:h,expiry:m,namespaces:g,acknowledged:!0,pairingTopic:G,requiredNamespaces:P,optionalNamespaces:F,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},C&&{sessionProperties:C});await this.sendResult({id:n.id,topic:t,result:!0}),this.events.emit(Nt("session_connect"),{session:B}),this.cleanupDuplicatePairings(B)}catch(h){await this.sendError(s,t,h),this.client.logger.error(h)}},this.onSessionSettleResponse=async(t,n)=>{const{id:s}=n;ai(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Nt("session_approve",s),{})):Lr(n)&&(await this.client.session.delete(t,er("USER_DISCONNECTED")),this.events.emit(Nt("session_approve",s),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:s,id:c}=n;try{const h=`${t}_session_update`,f=ua.get(h);if(f&&this.isRequestOutOfSync(f,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(or({topic:t},s)),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:s}),ua.set(h,c)}catch(h){await this.sendError(c,t,h),this.client.logger.error(h)}},this.isRequestOutOfSync=(t,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,n)=>{const{id:s}=n;ai(n)?this.events.emit(Nt("session_update",s),{}):Lr(n)&&this.events.emit(Nt("session_update",s),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:s}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Nr(la)),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,n)=>{const{id:s}=n;ai(n)?this.events.emit(Nt("session_extend",s),{}):Lr(n)&&this.events.emit(Nt("session_extend",s),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:s}=n;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(c){await this.sendError(s,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,n)=>{const{id:s}=n;setTimeout(()=>{ai(n)?this.events.emit(Nt("session_ping",s),{}):Lr(n)&&this.events.emit(Nt("session_ping",s),{error:n.error})},500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(zt.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult({id:s,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:s,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,n)=>{const{id:s,params:c}=n;try{this.isValidRequest(or({topic:t},c));const h=_n(JSON.stringify(fn("wc_sessionRequest",c,s))),f=this.client.session.get(t),m=await this.getVerifyContext(h,f.peer.metadata),g={id:s,topic:t,params:c,verifyContext:m};await this.setPendingSessionRequest(g),this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue()}catch(h){await this.sendError(s,t,h),this.client.logger.error(h)}},this.onSessionRequestResponse=(t,n)=>{const{id:s}=n;ai(n)?this.events.emit(Nt("session_request",s),{result:n.result}):Lr(n)&&this.events.emit(Nt("session_request",s),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:s,params:c}=n;try{const h=`${t}_session_event_${c.event.name}`,f=ua.get(h);if(f&&this.isRequestOutOfSync(f,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(or({topic:t},c)),this.client.events.emit("session_event",{id:s,topic:t,params:c}),ua.set(h,s)}catch(h){await this.sendError(s,t,h),this.client.logger.error(h)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=si.idle,this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===si.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=si.active,this.client.events.emit("session_request",t)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=t=>{if(t.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);n&&this.onSessionProposeRequest(t.topic,fn("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer},n.id))},this.isValidConnect=async t=>{if(!cr(t)){const{message:m}=Q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(m)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:h,relays:f}=t;if(mi(n)||await this.isValidPairingTopic(n),!eE(f,!0)){const{message:m}=Q("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(m)}!mi(s)&&pa(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!mi(c)&&pa(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),mi(h)||this.validateSessionProps(h,"sessionProperties")},this.validateNamespaces=(t,n)=>{const s=tE(t,"connect()",n);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!cr(t))throw new Error(Q("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:s,relayProtocol:c,sessionProperties:h}=t;await this.isValidProposalId(n);const f=this.client.proposal.get(n),m=Xo(s,"approve()");if(m)throw new Error(m.message);const g=Wl(f.requiredNamespaces,s,"approve()");if(g)throw new Error(g.message);if(!ln(c,!0)){const{message:P}=Q("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(P)}mi(h)||this.validateSessionProps(h,"sessionProperties")},this.isValidReject=async t=>{if(!cr(t)){const{message:c}=Q("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:n,reason:s}=t;if(await this.isValidProposalId(n),!rE(s)){const{message:c}=Q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!cr(t)){const{message:g}=Q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:n,controller:s,namespaces:c,expiry:h}=t;if(!iE(n)){const{message:g}=Q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const f=nE(s,"onSessionSettleRequest()");if(f)throw new Error(f.message);const m=Xo(c,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(Ei(h)){const{message:g}=Q("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!cr(t)){const{message:m}=Q("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(m)}const{topic:n,namespaces:s}=t;await this.isValidSessionTopic(n);const c=this.client.session.get(n),h=Xo(s,"update()");if(h)throw new Error(h.message);const f=Wl(c.requiredNamespaces,s,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!cr(t)){const{message:s}=Q("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!cr(t)){const{message:m}=Q("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(m)}const{topic:n,request:s,chainId:c,expiry:h}=t;await this.isValidSessionTopic(n);const{namespaces:f}=this.client.session.get(n);if(!Yl(f,c)){const{message:m}=Q("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(m)}if(!sE(s)){const{message:m}=Q("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(m)}if(!aE(f,c,s.method)){const{message:m}=Q("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(m)}if(h&&!oE(h,cc)){const{message:m}=Q("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${cc.min} and ${cc.max}`);throw new Error(m)}},this.isValidRespond=async t=>{if(!cr(t)){const{message:c}=Q("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:n,response:s}=t;if(await this.isValidSessionTopic(n),!cE(s)){const{message:c}=Q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!cr(t)){const{message:s}=Q("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!cr(t)){const{message:f}=Q("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:n,event:s,chainId:c}=t;await this.isValidSessionTopic(n);const{namespaces:h}=this.client.session.get(n);if(!Yl(h,c)){const{message:f}=Q("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!uE(s)){const{message:f}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(f)}if(!lE(h,c,s.name)){const{message:f}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!cr(t)){const{message:s}=Q("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const s={verified:{verifyUrl:n.verifyUrl||da,validation:"UNKNOWN",origin:n.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});c&&(s.verified.origin=c.origin,s.verified.isScam=c.isScam,s.verified.validation=c.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(s)}`),s},this.validateSessionProps=(t,n)=>{Object.values(t).forEach(s=>{if(!ln(s,!1)){const{message:c}=Q("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:r}=Q("NOT_INITIALIZED",this.name);throw new Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(zt.message,async r=>{const{topic:t,message:n}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const s=await this.client.core.crypto.decode(t,n);try{Vc(s)?(this.client.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Oa(s)?(await this.client.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.client.core.history.delete(t,s.id)):this.onRelayEventUnknownPayload({topic:t,payload:s})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(Ir.expired,async r=>{const{topic:t,id:n}=n_(r.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Q("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Kn.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!ln(r,!1)){const{message:t}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:t}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(t)}if(Ei(this.client.core.pairing.pairings.get(r).expiry)){const{message:t}=Q("EXPIRED",`pairing topic: ${r}`);throw new Error(t)}}async isValidSessionTopic(r){if(!ln(r,!1)){const{message:t}=Q("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(t)}if(!this.client.session.keys.includes(r)){const{message:t}=Q("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(t)}if(Ei(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:t}=Q("EXPIRED",`session topic: ${r}`);throw new Error(t)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if(ln(r,!1)){const{message:t}=Q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(t)}else{const{message:t}=Q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(t)}}async isValidProposalId(r){if(!hE(r)){const{message:t}=Q("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(t)}if(!this.client.proposal.keys.includes(r)){const{message:t}=Q("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(t)}if(Ei(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:t}=Q("EXPIRED",`proposal id: ${r}`);throw new Error(t)}}}class jO extends Ia{constructor(r,t){super(r,t,PO,$c),this.core=r,this.logger=t}}class GO extends Ia{constructor(r,t){super(r,t,SO,$c),this.core=r,this.logger=t}}class VO extends Ia{constructor(r,t){super(r,t,AO,$c,n=>n.id),this.core=r,this.logger=t}}let HO=class K_ extends Wm{constructor(r){super(r),this.protocol=$_,this.version=k_,this.name=oc.name,this.events=new wr.EventEmitter,this.on=(n,s)=>this.events.on(n,s),this.once=(n,s)=>this.events.once(n,s),this.off=(n,s)=>this.events.off(n,s),this.removeListener=(n,s)=>this.events.removeListener(n,s),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}},this.update=async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}},this.request=async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}},this.find=n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(r==null?void 0:r.name)||oc.name,this.metadata=(r==null?void 0:r.metadata)||Jy();const t=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Ae.pino(Ae.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||oc.logger}));this.core=(r==null?void 0:r.core)||new wO(r),this.logger=Ae.generateChildLogger(t,this.name),this.session=new GO(this.core,this.logger),this.proposal=new jO(this.core,this.logger),this.pendingRequest=new VO(this.core,this.logger),this.engine=new MO(this)}static async init(r){const t=new K_(r);return await t.initialize(),t}get context(){return Ae.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}};var Cc={exports:{}};(function(o,r){var t=typeof self<"u"?self:ur,n=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(h){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function m(E){return E&&DataView.prototype.isPrototypeOf(E)}if(f.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],P=ArrayBuffer.isView||function(E){return E&&g.indexOf(Object.prototype.toString.call(E))>-1};function F(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function C(E){return typeof E!="string"&&(E=String(E)),E}function G(E){var O={next:function(){var X=E.shift();return{done:X===void 0,value:X}}};return f.iterable&&(O[Symbol.iterator]=function(){return O}),O}function B(E){this.map={},E instanceof B?E.forEach(function(O,X){this.append(X,O)},this):Array.isArray(E)?E.forEach(function(O){this.append(O[0],O[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(O){this.append(O,E[O])},this)}B.prototype.append=function(E,O){E=F(E),O=C(O);var X=this.map[E];this.map[E]=X?X+", "+O:O},B.prototype.delete=function(E){delete this.map[F(E)]},B.prototype.get=function(E){return E=F(E),this.has(E)?this.map[E]:null},B.prototype.has=function(E){return this.map.hasOwnProperty(F(E))},B.prototype.set=function(E,O){this.map[F(E)]=C(O)},B.prototype.forEach=function(E,O){for(var X in this.map)this.map.hasOwnProperty(X)&&E.call(O,this.map[X],X,this)},B.prototype.keys=function(){var E=[];return this.forEach(function(O,X){E.push(X)}),G(E)},B.prototype.values=function(){var E=[];return this.forEach(function(O){E.push(O)}),G(E)},B.prototype.entries=function(){var E=[];return this.forEach(function(O,X){E.push([X,O])}),G(E)},f.iterable&&(B.prototype[Symbol.iterator]=B.prototype.entries);function z(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function ie(E){return new Promise(function(O,X){E.onload=function(){O(E.result)},E.onerror=function(){X(E.error)}})}function Te(E){var O=new FileReader,X=ie(O);return O.readAsArrayBuffer(E),X}function de(E){var O=new FileReader,X=ie(O);return O.readAsText(E),X}function fe(E){for(var O=new Uint8Array(E),X=new Array(O.length),ce=0;ce<O.length;ce++)X[ce]=String.fromCharCode(O[ce]);return X.join("")}function le(E){if(E.slice)return E.slice(0);var O=new Uint8Array(E.byteLength);return O.set(new Uint8Array(E)),O.buffer}function he(){return this.bodyUsed=!1,this._initBody=function(E){this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:f.blob&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:f.formData&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():f.arrayBuffer&&f.blob&&m(E)?(this._bodyArrayBuffer=le(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(E)||P(E))?this._bodyArrayBuffer=le(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var E=z(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Te)}),this.text=function(){var E=z(this);if(E)return E;if(this._bodyBlob)return de(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(fe(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(ge)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function H(E){var O=E.toUpperCase();return N.indexOf(O)>-1?O:E}function W(E,O){O=O||{};var X=O.body;if(E instanceof W){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,O.headers||(this.headers=new B(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,!X&&E._bodyInit!=null&&(X=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new B(O.headers)),this.method=H(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(X)}W.prototype.clone=function(){return new W(this,{body:this._bodyInit})};function ge(E){var O=new FormData;return E.trim().split("&").forEach(function(X){if(X){var ce=X.split("="),q=ce.shift().replace(/\+/g," "),U=ce.join("=").replace(/\+/g," ");O.append(decodeURIComponent(q),decodeURIComponent(U))}}),O}function re(E){var O=new B,X=E.replace(/\r?\n[\t ]+/g," ");return X.split(/\r?\n/).forEach(function(ce){var q=ce.split(":"),U=q.shift().trim();if(U){var k=q.join(":").trim();O.append(U,k)}}),O}he.call(W.prototype);function ue(E,O){O||(O={}),this.type="default",this.status=O.status===void 0?200:O.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in O?O.statusText:"OK",this.headers=new B(O.headers),this.url=O.url||"",this._initBody(E)}he.call(ue.prototype),ue.prototype.clone=function(){return new ue(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new B(this.headers),url:this.url})},ue.error=function(){var E=new ue(null,{status:0,statusText:""});return E.type="error",E};var xe=[301,302,303,307,308];ue.redirect=function(E,O){if(xe.indexOf(O)===-1)throw new RangeError("Invalid status code");return new ue(null,{status:O,headers:{location:E}})},h.DOMException=c.DOMException;try{new h.DOMException}catch{h.DOMException=function(O,X){this.message=O,this.name=X;var ce=Error(O);this.stack=ce.stack},h.DOMException.prototype=Object.create(Error.prototype),h.DOMException.prototype.constructor=h.DOMException}function Ve(E,O){return new Promise(function(X,ce){var q=new W(E,O);if(q.signal&&q.signal.aborted)return ce(new h.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function k(){U.abort()}U.onload=function(){var K={status:U.status,statusText:U.statusText,headers:re(U.getAllResponseHeaders()||"")};K.url="responseURL"in U?U.responseURL:K.headers.get("X-Request-URL");var Ye="response"in U?U.response:U.responseText;X(new ue(Ye,K))},U.onerror=function(){ce(new TypeError("Network request failed"))},U.ontimeout=function(){ce(new TypeError("Network request failed"))},U.onabort=function(){ce(new h.DOMException("Aborted","AbortError"))},U.open(q.method,q.url,!0),q.credentials==="include"?U.withCredentials=!0:q.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&f.blob&&(U.responseType="blob"),q.headers.forEach(function(K,Ye){U.setRequestHeader(Ye,K)}),q.signal&&(q.signal.addEventListener("abort",k),U.onreadystatechange=function(){U.readyState===4&&q.signal.removeEventListener("abort",k)}),U.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return Ve.polyfill=!0,c.fetch||(c.fetch=Ve,c.Headers=B,c.Request=W,c.Response=ue),h.Headers=B,h.Request=W,h.Response=ue,h.fetch=Ve,Object.defineProperty(h,"__esModule",{value:!0}),h})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;r=s.fetch,r.default=s.fetch,r.fetch=s.fetch,r.Headers=s.Headers,r.Request=s.Request,r.Response=s.Response,o.exports=r})(Cc,Cc.exports);var UO=Cc.exports;const Hh=r_(UO),$O={Accept:"application/json","Content-Type":"application/json"},kO="POST",Uh={headers:$O,method:kO},$h=10;class Vi{constructor(r,t=!1){if(this.url=r,this.disableProviderPing=t,this.events=new wr.EventEmitter,this.isAvailable=!1,this.registering=!1,!dh(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}off(r,t){this.events.off(r,t)}removeListener(r,t){this.events.removeListener(r,t)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(r,t){this.isAvailable||await this.register();try{const n=es(r),c=await(await Hh(this.url,Object.assign(Object.assign({},Uh),{body:n}))).json();this.onPayload({data:c})}catch(n){this.onError(r.id,n)}}async register(r=this.url){if(!dh(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,s)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),s(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){const t=es({id:1,jsonrpc:"2.0",method:"test",params:[]});await Hh(r,Object.assign(Object.assign({},Uh),{body:t}))}this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(typeof r.data>"u")return;const t=typeof r.data=="string"?Bc(r.data):r.data;this.events.emit("payload",t)}onError(r,t){const n=this.parseError(t),s=n.message||n.toString(),c=Ta(r,s);this.events.emit("payload",c)}parseError(r,t=this.url){return O_(r,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>$h&&this.events.setMaxListeners($h)}}const kh="error",qO="wss://relay.walletconnect.com",zO="wc",KO="universal_provider",qh=`${zO}@2:${KO}:`,WO="https://rpc.walletconnect.com/v1/",Ti={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ac={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(o,r){(function(){var t,n="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",f="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",g=500,P="__lodash_placeholder__",F=1,C=2,G=4,B=1,z=2,ie=1,Te=2,de=4,fe=8,le=16,he=32,N=64,H=128,W=256,ge=512,re=30,ue="...",xe=800,Ve=16,E=1,O=2,X=3,ce=1/0,q=9007199254740991,U=17976931348623157e292,k=0/0,K=4294967295,Ye=K-1,$e=K>>>1,Br=[["ary",H],["bind",ie],["bindKey",Te],["curry",fe],["curryRight",le],["flip",ge],["partial",he],["partialRight",N],["rearg",W]],Oe="[object Arguments]",Ot="[object Array]",D="[object AsyncFunction]",x="[object Boolean]",S="[object Date]",l="[object DOMException]",T="[object Error]",ee="[object Function]",_e="[object GeneratorFunction]",ve="[object Map]",De="[object Number]",Le="[object Null]",we="[object Object]",bt="[object Promise]",yt="[object Proxy]",st="[object RegExp]",Fe="[object Set]",Xe="[object String]",Ze="[object Symbol]",at="[object Undefined]",He="[object WeakMap]",Qe="[object WeakSet]",Ne="[object ArrayBuffer]",ke="[object DataView]",ut="[object Float32Array]",je="[object Float64Array]",It="[object Int8Array]",Lt="[object Int16Array]",Vt="[object Int32Array]",Ht="[object Uint8Array]",Mt="[object Uint8ClampedArray]",Kt="[object Uint16Array]",tr="[object Uint32Array]",Fr=/\b__p \+= '';/g,Wt=/\b(__p \+=) '' \+/g,kr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oi=/&(?:amp|lt|gt|quot|#39);/g,Oi=/[&<>"']/g,lt=RegExp(oi.source),rt=RegExp(Oi.source),ht=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,ot=/<%=([\s\S]+?)%>/g,it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ft=/[\\^$.*+?()[\]{}|]/g,St=RegExp(ft.source),pt=/^\s+/,Et=/\s/,dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Je=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,At=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wa=/[()=,{}\[\]\/\s]/,Pa=/\\(\\)?/g,Sa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gr=/\w*$/,Ca=/^[-+]0x[0-9a-f]+$/i,Aa=/^0b[01]+$/i,xa=/^\[object .+?Constructor\]$/,Da=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,qr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ui=/($^)/,La=/['\n\r\u2028\u2029\\]/g,$i="\\ud800-\\udfff",Ba="\\u0300-\\u036f",Fa="\\ufe20-\\ufe2f",ki="\\u20d0-\\u20ff",ss=Ba+Fa+ki,as="\\u2700-\\u27bf",Pr="a-z\\xdf-\\xf6\\xf8-\\xff",Ma="\\xac\\xb1\\xd7\\xf7",ja="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ga="\\u2000-\\u206f",Va=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",os="A-Z\\xc0-\\xd6\\xd8-\\xde",cs="\\ufe0e\\ufe0f",bi=Ma+ja+Ga+Va,yn="[']",Ii="["+$i+"]",En="["+bi+"]",wi="["+ss+"]",us="\\d+",Ha="["+as+"]",ls="["+Pr+"]",hs="[^"+$i+bi+us+as+Pr+os+"]",qi="\\ud83c[\\udffb-\\udfff]",Ua="(?:"+wi+"|"+qi+")",_s="[^"+$i+"]",zi="(?:\\ud83c[\\udde6-\\uddff]){2}",ci="[\\ud800-\\udbff][\\udc00-\\udfff]",lr="["+os+"]",fs="\\u200d",ps="(?:"+ls+"|"+hs+")",Mr="(?:"+lr+"|"+hs+")",ds="(?:"+yn+"(?:d|ll|m|re|s|t|ve))?",gs="(?:"+yn+"(?:D|LL|M|RE|S|T|VE))?",ys=Ua+"?",Es="["+cs+"]?",$a="(?:"+fs+"(?:"+[_s,zi,ci].join("|")+")"+Es+ys+")*",zr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ms="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vs=Es+ys+$a,Ki="(?:"+[Ha,zi,ci].join("|")+")"+vs,ka="(?:"+[_s+wi+"?",wi,zi,ci,Ii].join("|")+")",mn=RegExp(yn,"g"),qa=RegExp(wi,"g"),Wi=RegExp(qi+"(?="+qi+")|"+ka+vs,"g"),Rs=RegExp([lr+"?"+ls+"+"+ds+"(?="+[En,lr,"$"].join("|")+")",Mr+"+"+gs+"(?="+[En,lr+ps,"$"].join("|")+")",lr+"?"+ps+"+"+ds,lr+"+"+gs,ms,zr,us,Ki].join("|"),"g"),Ts=RegExp("["+fs+$i+ss+cs+"]"),Pi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Os=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],za=-1,qe={};qe[ut]=qe[je]=qe[It]=qe[Lt]=qe[Vt]=qe[Ht]=qe[Mt]=qe[Kt]=qe[tr]=!0,qe[Oe]=qe[Ot]=qe[Ne]=qe[x]=qe[ke]=qe[S]=qe[T]=qe[ee]=qe[ve]=qe[De]=qe[we]=qe[st]=qe[Fe]=qe[Xe]=qe[He]=!1;var Ue={};Ue[Oe]=Ue[Ot]=Ue[Ne]=Ue[ke]=Ue[x]=Ue[S]=Ue[ut]=Ue[je]=Ue[It]=Ue[Lt]=Ue[Vt]=Ue[ve]=Ue[De]=Ue[we]=Ue[st]=Ue[Fe]=Ue[Xe]=Ue[Ze]=Ue[Ht]=Ue[Mt]=Ue[Kt]=Ue[tr]=!0,Ue[T]=Ue[ee]=Ue[He]=!1;var y={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},V={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},J={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=parseFloat,ye=parseInt,et=typeof qn=="object"&&qn&&qn.Object===Object&&qn,xt=typeof self=="object"&&self&&self.Object===Object&&self,Se=et||xt||Function("return this")(),Ke=r&&!r.nodeType&&r,mt=Ke&&!0&&o&&!o.nodeType&&o,rr=mt&&mt.exports===Ke,Dt=rr&&et.process,tt=function(){try{var I=mt&&mt.require&&mt.require("util").types;return I||Dt&&Dt.binding&&Dt.binding("util")}catch{}}(),Yt=tt&&tt.isArrayBuffer,Sr=tt&&tt.isDate,yr=tt&&tt.isMap,jr=tt&&tt.isRegExp,vn=tt&&tt.isSet,Si=tt&&tt.isTypedArray;function jt(I,L,A){switch(A.length){case 0:return I.call(L);case 1:return I.call(L,A[0]);case 2:return I.call(L,A[0],A[1]);case 3:return I.call(L,A[0],A[1],A[2])}return I.apply(L,A)}function J_(I,L,A,Z){for(var pe=-1,Be=I==null?0:I.length;++pe<Be;){var Bt=I[pe];L(Z,Bt,A(Bt),I)}return Z}function Er(I,L){for(var A=-1,Z=I==null?0:I.length;++A<Z&&L(I[A],A,I)!==!1;);return I}function X_(I,L){for(var A=I==null?0:I.length;A--&&L(I[A],A,I)!==!1;);return I}function zc(I,L){for(var A=-1,Z=I==null?0:I.length;++A<Z;)if(!L(I[A],A,I))return!1;return!0}function ui(I,L){for(var A=-1,Z=I==null?0:I.length,pe=0,Be=[];++A<Z;){var Bt=I[A];L(Bt,A,I)&&(Be[pe++]=Bt)}return Be}function bs(I,L){var A=I==null?0:I.length;return!!A&&Yi(I,L,0)>-1}function Ka(I,L,A){for(var Z=-1,pe=I==null?0:I.length;++Z<pe;)if(A(L,I[Z]))return!0;return!1}function nt(I,L){for(var A=-1,Z=I==null?0:I.length,pe=Array(Z);++A<Z;)pe[A]=L(I[A],A,I);return pe}function li(I,L){for(var A=-1,Z=L.length,pe=I.length;++A<Z;)I[pe+A]=L[A];return I}function Wa(I,L,A,Z){var pe=-1,Be=I==null?0:I.length;for(Z&&Be&&(A=I[++pe]);++pe<Be;)A=L(A,I[pe],pe,I);return A}function Z_(I,L,A,Z){var pe=I==null?0:I.length;for(Z&&pe&&(A=I[--pe]);pe--;)A=L(A,I[pe],pe,I);return A}function Ya(I,L){for(var A=-1,Z=I==null?0:I.length;++A<Z;)if(L(I[A],A,I))return!0;return!1}var Q_=Ja("length");function ef(I){return I.split("")}function tf(I){return I.match(At)||[]}function Kc(I,L,A){var Z;return A(I,function(pe,Be,Bt){if(L(pe,Be,Bt))return Z=Be,!1}),Z}function Is(I,L,A,Z){for(var pe=I.length,Be=A+(Z?1:-1);Z?Be--:++Be<pe;)if(L(I[Be],Be,I))return Be;return-1}function Yi(I,L,A){return L===L?pf(I,L,A):Is(I,Wc,A)}function rf(I,L,A,Z){for(var pe=A-1,Be=I.length;++pe<Be;)if(Z(I[pe],L))return pe;return-1}function Wc(I){return I!==I}function Yc(I,L){var A=I==null?0:I.length;return A?Za(I,L)/A:k}function Ja(I){return function(L){return L==null?t:L[I]}}function Xa(I){return function(L){return I==null?t:I[L]}}function Jc(I,L,A,Z,pe){return pe(I,function(Be,Bt,We){A=Z?(Z=!1,Be):L(A,Be,Bt,We)}),A}function nf(I,L){var A=I.length;for(I.sort(L);A--;)I[A]=I[A].value;return I}function Za(I,L){for(var A,Z=-1,pe=I.length;++Z<pe;){var Be=L(I[Z]);Be!==t&&(A=A===t?Be:A+Be)}return A}function Qa(I,L){for(var A=-1,Z=Array(I);++A<I;)Z[A]=L(A);return Z}function sf(I,L){return nt(L,function(A){return[A,I[A]]})}function Xc(I){return I&&I.slice(0,tu(I)+1).replace(pt,"")}function hr(I){return function(L){return I(L)}}function eo(I,L){return nt(L,function(A){return I[A]})}function Rn(I,L){return I.has(L)}function Zc(I,L){for(var A=-1,Z=I.length;++A<Z&&Yi(L,I[A],0)>-1;);return A}function Qc(I,L){for(var A=I.length;A--&&Yi(L,I[A],0)>-1;);return A}function af(I,L){for(var A=I.length,Z=0;A--;)I[A]===L&&++Z;return Z}var of=Xa(y),cf=Xa(b);function uf(I){return"\\"+J[I]}function lf(I,L){return I==null?t:I[L]}function Ji(I){return Ts.test(I)}function hf(I){return Pi.test(I)}function _f(I){for(var L,A=[];!(L=I.next()).done;)A.push(L.value);return A}function to(I){var L=-1,A=Array(I.size);return I.forEach(function(Z,pe){A[++L]=[pe,Z]}),A}function eu(I,L){return function(A){return I(L(A))}}function hi(I,L){for(var A=-1,Z=I.length,pe=0,Be=[];++A<Z;){var Bt=I[A];(Bt===L||Bt===P)&&(I[A]=P,Be[pe++]=A)}return Be}function ws(I){var L=-1,A=Array(I.size);return I.forEach(function(Z){A[++L]=Z}),A}function ff(I){var L=-1,A=Array(I.size);return I.forEach(function(Z){A[++L]=[Z,Z]}),A}function pf(I,L,A){for(var Z=A-1,pe=I.length;++Z<pe;)if(I[Z]===L)return Z;return-1}function df(I,L,A){for(var Z=A+1;Z--;)if(I[Z]===L)return Z;return Z}function Xi(I){return Ji(I)?yf(I):Q_(I)}function Cr(I){return Ji(I)?Ef(I):ef(I)}function tu(I){for(var L=I.length;L--&&Et.test(I.charAt(L)););return L}var gf=Xa(V);function yf(I){for(var L=Wi.lastIndex=0;Wi.test(I);)++L;return L}function Ef(I){return I.match(Wi)||[]}function mf(I){return I.match(Rs)||[]}var vf=function I(L){L=L==null?Se:Zi.defaults(Se.Object(),L,Zi.pick(Se,Os));var A=L.Array,Z=L.Date,pe=L.Error,Be=L.Function,Bt=L.Math,We=L.Object,ro=L.RegExp,Rf=L.String,mr=L.TypeError,Ps=A.prototype,Tf=Be.prototype,Qi=We.prototype,Ss=L["__core-js_shared__"],Cs=Tf.toString,Ge=Qi.hasOwnProperty,Of=0,ru=function(){var e=/[^.]+$/.exec(Ss&&Ss.keys&&Ss.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),As=Qi.toString,bf=Cs.call(We),If=Se._,wf=ro("^"+Cs.call(Ge).replace(ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xs=rr?L.Buffer:t,_i=L.Symbol,Ds=L.Uint8Array,iu=xs?xs.allocUnsafe:t,Ns=eu(We.getPrototypeOf,We),nu=We.create,su=Qi.propertyIsEnumerable,Ls=Ps.splice,au=_i?_i.isConcatSpreadable:t,Tn=_i?_i.iterator:t,Ci=_i?_i.toStringTag:t,Bs=function(){try{var e=Li(We,"defineProperty");return e({},"",{}),e}catch{}}(),Pf=L.clearTimeout!==Se.clearTimeout&&L.clearTimeout,Sf=Z&&Z.now!==Se.Date.now&&Z.now,Cf=L.setTimeout!==Se.setTimeout&&L.setTimeout,Fs=Bt.ceil,Ms=Bt.floor,io=We.getOwnPropertySymbols,Af=xs?xs.isBuffer:t,ou=L.isFinite,xf=Ps.join,Df=eu(We.keys,We),Ft=Bt.max,kt=Bt.min,Nf=Z.now,Lf=L.parseInt,cu=Bt.random,Bf=Ps.reverse,no=Li(L,"DataView"),On=Li(L,"Map"),so=Li(L,"Promise"),en=Li(L,"Set"),bn=Li(L,"WeakMap"),In=Li(We,"create"),js=bn&&new bn,tn={},Ff=Bi(no),Mf=Bi(On),jf=Bi(so),Gf=Bi(en),Vf=Bi(bn),Gs=_i?_i.prototype:t,wn=Gs?Gs.valueOf:t,uu=Gs?Gs.toString:t;function p(e){if(gt(e)&&!Ee(e)&&!(e instanceof Pe)){if(e instanceof vr)return e;if(Ge.call(e,"__wrapped__"))return ll(e)}return new vr(e)}var rn=function(){function e(){}return function(i){if(!ct(i))return{};if(nu)return nu(i);e.prototype=i;var a=new e;return e.prototype=t,a}}();function Vs(){}function vr(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}p.templateSettings={escape:ht,evaluate:_t,interpolate:ot,variable:"",imports:{_:p}},p.prototype=Vs.prototype,p.prototype.constructor=p,vr.prototype=rn(Vs.prototype),vr.prototype.constructor=vr;function Pe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function Hf(){var e=new Pe(this.__wrapped__);return e.__actions__=ir(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ir(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ir(this.__views__),e}function Uf(){if(this.__filtered__){var e=new Pe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function $f(){var e=this.__wrapped__.value(),i=this.__dir__,a=Ee(e),u=i<0,_=a?e.length:0,d=td(0,_,this.__views__),v=d.start,R=d.end,w=R-v,M=u?R:v-1,j=this.__iteratees__,$=j.length,Y=0,te=kt(w,this.__takeCount__);if(!a||!u&&_==w&&te==w)return Nu(e,this.__actions__);var ae=[];e:for(;w--&&Y<te;){M+=i;for(var Re=-1,oe=e[M];++Re<$;){var Ie=j[Re],Ce=Ie.iteratee,pr=Ie.type,Zt=Ce(oe);if(pr==O)oe=Zt;else if(!Zt){if(pr==E)continue e;break e}}ae[Y++]=oe}return ae}Pe.prototype=rn(Vs.prototype),Pe.prototype.constructor=Pe;function Ai(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function kf(){this.__data__=In?In(null):{},this.size=0}function qf(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}function zf(e){var i=this.__data__;if(In){var a=i[e];return a===m?t:a}return Ge.call(i,e)?i[e]:t}function Kf(e){var i=this.__data__;return In?i[e]!==t:Ge.call(i,e)}function Wf(e,i){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=In&&i===t?m:i,this}Ai.prototype.clear=kf,Ai.prototype.delete=qf,Ai.prototype.get=zf,Ai.prototype.has=Kf,Ai.prototype.set=Wf;function Kr(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function Yf(){this.__data__=[],this.size=0}function Jf(e){var i=this.__data__,a=Hs(i,e);if(a<0)return!1;var u=i.length-1;return a==u?i.pop():Ls.call(i,a,1),--this.size,!0}function Xf(e){var i=this.__data__,a=Hs(i,e);return a<0?t:i[a][1]}function Zf(e){return Hs(this.__data__,e)>-1}function Qf(e,i){var a=this.__data__,u=Hs(a,e);return u<0?(++this.size,a.push([e,i])):a[u][1]=i,this}Kr.prototype.clear=Yf,Kr.prototype.delete=Jf,Kr.prototype.get=Xf,Kr.prototype.has=Zf,Kr.prototype.set=Qf;function Wr(e){var i=-1,a=e==null?0:e.length;for(this.clear();++i<a;){var u=e[i];this.set(u[0],u[1])}}function ep(){this.size=0,this.__data__={hash:new Ai,map:new(On||Kr),string:new Ai}}function tp(e){var i=Qs(this,e).delete(e);return this.size-=i?1:0,i}function rp(e){return Qs(this,e).get(e)}function ip(e){return Qs(this,e).has(e)}function np(e,i){var a=Qs(this,e),u=a.size;return a.set(e,i),this.size+=a.size==u?0:1,this}Wr.prototype.clear=ep,Wr.prototype.delete=tp,Wr.prototype.get=rp,Wr.prototype.has=ip,Wr.prototype.set=np;function xi(e){var i=-1,a=e==null?0:e.length;for(this.__data__=new Wr;++i<a;)this.add(e[i])}function sp(e){return this.__data__.set(e,m),this}function ap(e){return this.__data__.has(e)}xi.prototype.add=xi.prototype.push=sp,xi.prototype.has=ap;function Ar(e){var i=this.__data__=new Kr(e);this.size=i.size}function op(){this.__data__=new Kr,this.size=0}function cp(e){var i=this.__data__,a=i.delete(e);return this.size=i.size,a}function up(e){return this.__data__.get(e)}function lp(e){return this.__data__.has(e)}function hp(e,i){var a=this.__data__;if(a instanceof Kr){var u=a.__data__;if(!On||u.length<s-1)return u.push([e,i]),this.size=++a.size,this;a=this.__data__=new Wr(u)}return a.set(e,i),this.size=a.size,this}Ar.prototype.clear=op,Ar.prototype.delete=cp,Ar.prototype.get=up,Ar.prototype.has=lp,Ar.prototype.set=hp;function lu(e,i){var a=Ee(e),u=!a&&Fi(e),_=!a&&!u&&yi(e),d=!a&&!u&&!_&&on(e),v=a||u||_||d,R=v?Qa(e.length,Rf):[],w=R.length;for(var M in e)(i||Ge.call(e,M))&&!(v&&(M=="length"||_&&(M=="offset"||M=="parent")||d&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||Zr(M,w)))&&R.push(M);return R}function hu(e){var i=e.length;return i?e[yo(0,i-1)]:t}function _p(e,i){return ea(ir(e),Di(i,0,e.length))}function fp(e){return ea(ir(e))}function ao(e,i,a){(a!==t&&!xr(e[i],a)||a===t&&!(i in e))&&Yr(e,i,a)}function Pn(e,i,a){var u=e[i];(!(Ge.call(e,i)&&xr(u,a))||a===t&&!(i in e))&&Yr(e,i,a)}function Hs(e,i){for(var a=e.length;a--;)if(xr(e[a][0],i))return a;return-1}function pp(e,i,a,u){return fi(e,function(_,d,v){i(u,_,a(_),v)}),u}function _u(e,i){return e&&Vr(i,Gt(i),e)}function dp(e,i){return e&&Vr(i,sr(i),e)}function Yr(e,i,a){i=="__proto__"&&Bs?Bs(e,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[i]=a}function oo(e,i){for(var a=-1,u=i.length,_=A(u),d=e==null;++a<u;)_[a]=d?t:Uo(e,i[a]);return _}function Di(e,i,a){return e===e&&(a!==t&&(e=e<=a?e:a),i!==t&&(e=e>=i?e:i)),e}function Rr(e,i,a,u,_,d){var v,R=i&F,w=i&C,M=i&G;if(a&&(v=_?a(e,u,_,d):a(e)),v!==t)return v;if(!ct(e))return e;var j=Ee(e);if(j){if(v=id(e),!R)return ir(e,v)}else{var $=qt(e),Y=$==ee||$==_e;if(yi(e))return Fu(e,R);if($==we||$==Oe||Y&&!_){if(v=w||Y?{}:tl(e),!R)return w?zp(e,dp(v,e)):qp(e,_u(v,e))}else{if(!Ue[$])return _?e:{};v=nd(e,$,R)}}d||(d=new Ar);var te=d.get(e);if(te)return te;d.set(e,v),Al(e)?e.forEach(function(oe){v.add(Rr(oe,i,a,oe,e,d))}):Sl(e)&&e.forEach(function(oe,Ie){v.set(Ie,Rr(oe,i,a,Ie,e,d))});var ae=M?w?So:Po:w?sr:Gt,Re=j?t:ae(e);return Er(Re||e,function(oe,Ie){Re&&(Ie=oe,oe=e[Ie]),Pn(v,Ie,Rr(oe,i,a,Ie,e,d))}),v}function gp(e){var i=Gt(e);return function(a){return fu(a,e,i)}}function fu(e,i,a){var u=a.length;if(e==null)return!u;for(e=We(e);u--;){var _=a[u],d=i[_],v=e[_];if(v===t&&!(_ in e)||!d(v))return!1}return!0}function pu(e,i,a){if(typeof e!="function")throw new mr(h);return Ln(function(){e.apply(t,a)},i)}function Sn(e,i,a,u){var _=-1,d=bs,v=!0,R=e.length,w=[],M=i.length;if(!R)return w;a&&(i=nt(i,hr(a))),u?(d=Ka,v=!1):i.length>=s&&(d=Rn,v=!1,i=new xi(i));e:for(;++_<R;){var j=e[_],$=a==null?j:a(j);if(j=u||j!==0?j:0,v&&$===$){for(var Y=M;Y--;)if(i[Y]===$)continue e;w.push(j)}else d(i,$,u)||w.push(j)}return w}var fi=Hu(Gr),du=Hu(uo,!0);function yp(e,i){var a=!0;return fi(e,function(u,_,d){return a=!!i(u,_,d),a}),a}function Us(e,i,a){for(var u=-1,_=e.length;++u<_;){var d=e[u],v=i(d);if(v!=null&&(R===t?v===v&&!fr(v):a(v,R)))var R=v,w=d}return w}function Ep(e,i,a,u){var _=e.length;for(a=me(a),a<0&&(a=-a>_?0:_+a),u=u===t||u>_?_:me(u),u<0&&(u+=_),u=a>u?0:Dl(u);a<u;)e[a++]=i;return e}function gu(e,i){var a=[];return fi(e,function(u,_,d){i(u,_,d)&&a.push(u)}),a}function Ut(e,i,a,u,_){var d=-1,v=e.length;for(a||(a=ad),_||(_=[]);++d<v;){var R=e[d];i>0&&a(R)?i>1?Ut(R,i-1,a,u,_):li(_,R):u||(_[_.length]=R)}return _}var co=Uu(),yu=Uu(!0);function Gr(e,i){return e&&co(e,i,Gt)}function uo(e,i){return e&&yu(e,i,Gt)}function $s(e,i){return ui(i,function(a){return Qr(e[a])})}function Ni(e,i){i=di(i,e);for(var a=0,u=i.length;e!=null&&a<u;)e=e[Hr(i[a++])];return a&&a==u?e:t}function Eu(e,i,a){var u=i(e);return Ee(e)?u:li(u,a(e))}function Jt(e){return e==null?e===t?at:Le:Ci&&Ci in We(e)?ed(e):fd(e)}function lo(e,i){return e>i}function mp(e,i){return e!=null&&Ge.call(e,i)}function vp(e,i){return e!=null&&i in We(e)}function Rp(e,i,a){return e>=kt(i,a)&&e<Ft(i,a)}function ho(e,i,a){for(var u=a?Ka:bs,_=e[0].length,d=e.length,v=d,R=A(d),w=1/0,M=[];v--;){var j=e[v];v&&i&&(j=nt(j,hr(i))),w=kt(j.length,w),R[v]=!a&&(i||_>=120&&j.length>=120)?new xi(v&&j):t}j=e[0];var $=-1,Y=R[0];e:for(;++$<_&&M.length<w;){var te=j[$],ae=i?i(te):te;if(te=a||te!==0?te:0,!(Y?Rn(Y,ae):u(M,ae,a))){for(v=d;--v;){var Re=R[v];if(!(Re?Rn(Re,ae):u(e[v],ae,a)))continue e}Y&&Y.push(ae),M.push(te)}}return M}function Tp(e,i,a,u){return Gr(e,function(_,d,v){i(u,a(_),d,v)}),u}function Cn(e,i,a){i=di(i,e),e=sl(e,i);var u=e==null?e:e[Hr(Or(i))];return u==null?t:jt(u,e,a)}function mu(e){return gt(e)&&Jt(e)==Oe}function Op(e){return gt(e)&&Jt(e)==Ne}function bp(e){return gt(e)&&Jt(e)==S}function An(e,i,a,u,_){return e===i?!0:e==null||i==null||!gt(e)&&!gt(i)?e!==e&&i!==i:Ip(e,i,a,u,An,_)}function Ip(e,i,a,u,_,d){var v=Ee(e),R=Ee(i),w=v?Ot:qt(e),M=R?Ot:qt(i);w=w==Oe?we:w,M=M==Oe?we:M;var j=w==we,$=M==we,Y=w==M;if(Y&&yi(e)){if(!yi(i))return!1;v=!0,j=!1}if(Y&&!j)return d||(d=new Ar),v||on(e)?Zu(e,i,a,u,_,d):Zp(e,i,w,a,u,_,d);if(!(a&B)){var te=j&&Ge.call(e,"__wrapped__"),ae=$&&Ge.call(i,"__wrapped__");if(te||ae){var Re=te?e.value():e,oe=ae?i.value():i;return d||(d=new Ar),_(Re,oe,a,u,d)}}return Y?(d||(d=new Ar),Qp(e,i,a,u,_,d)):!1}function wp(e){return gt(e)&&qt(e)==ve}function _o(e,i,a,u){var _=a.length,d=_,v=!u;if(e==null)return!d;for(e=We(e);_--;){var R=a[_];if(v&&R[2]?R[1]!==e[R[0]]:!(R[0]in e))return!1}for(;++_<d;){R=a[_];var w=R[0],M=e[w],j=R[1];if(v&&R[2]){if(M===t&&!(w in e))return!1}else{var $=new Ar;if(u)var Y=u(M,j,w,e,i,$);if(!(Y===t?An(j,M,B|z,u,$):Y))return!1}}return!0}function vu(e){if(!ct(e)||cd(e))return!1;var i=Qr(e)?wf:xa;return i.test(Bi(e))}function Pp(e){return gt(e)&&Jt(e)==st}function Sp(e){return gt(e)&&qt(e)==Fe}function Cp(e){return gt(e)&&aa(e.length)&&!!qe[Jt(e)]}function Ru(e){return typeof e=="function"?e:e==null?ar:typeof e=="object"?Ee(e)?bu(e[0],e[1]):Ou(e):$l(e)}function fo(e){if(!Nn(e))return Df(e);var i=[];for(var a in We(e))Ge.call(e,a)&&a!="constructor"&&i.push(a);return i}function Ap(e){if(!ct(e))return _d(e);var i=Nn(e),a=[];for(var u in e)u=="constructor"&&(i||!Ge.call(e,u))||a.push(u);return a}function po(e,i){return e<i}function Tu(e,i){var a=-1,u=nr(e)?A(e.length):[];return fi(e,function(_,d,v){u[++a]=i(_,d,v)}),u}function Ou(e){var i=Ao(e);return i.length==1&&i[0][2]?il(i[0][0],i[0][1]):function(a){return a===e||_o(a,e,i)}}function bu(e,i){return Do(e)&&rl(i)?il(Hr(e),i):function(a){var u=Uo(a,e);return u===t&&u===i?$o(a,e):An(i,u,B|z)}}function ks(e,i,a,u,_){e!==i&&co(i,function(d,v){if(_||(_=new Ar),ct(d))xp(e,i,v,a,ks,u,_);else{var R=u?u(Lo(e,v),d,v+"",e,i,_):t;R===t&&(R=d),ao(e,v,R)}},sr)}function xp(e,i,a,u,_,d,v){var R=Lo(e,a),w=Lo(i,a),M=v.get(w);if(M){ao(e,a,M);return}var j=d?d(R,w,a+"",e,i,v):t,$=j===t;if($){var Y=Ee(w),te=!Y&&yi(w),ae=!Y&&!te&&on(w);j=w,Y||te||ae?Ee(R)?j=R:vt(R)?j=ir(R):te?($=!1,j=Fu(w,!0)):ae?($=!1,j=Mu(w,!0)):j=[]:Bn(w)||Fi(w)?(j=R,Fi(R)?j=Nl(R):(!ct(R)||Qr(R))&&(j=tl(w))):$=!1}$&&(v.set(w,j),_(j,w,u,d,v),v.delete(w)),ao(e,a,j)}function Iu(e,i){var a=e.length;if(a)return i+=i<0?a:0,Zr(i,a)?e[i]:t}function wu(e,i,a){i.length?i=nt(i,function(d){return Ee(d)?function(v){return Ni(v,d.length===1?d[0]:d)}:d}):i=[ar];var u=-1;i=nt(i,hr(se()));var _=Tu(e,function(d,v,R){var w=nt(i,function(M){return M(d)});return{criteria:w,index:++u,value:d}});return nf(_,function(d,v){return kp(d,v,a)})}function Dp(e,i){return Pu(e,i,function(a,u){return $o(e,u)})}function Pu(e,i,a){for(var u=-1,_=i.length,d={};++u<_;){var v=i[u],R=Ni(e,v);a(R,v)&&xn(d,di(v,e),R)}return d}function Np(e){return function(i){return Ni(i,e)}}function go(e,i,a,u){var _=u?rf:Yi,d=-1,v=i.length,R=e;for(e===i&&(i=ir(i)),a&&(R=nt(e,hr(a)));++d<v;)for(var w=0,M=i[d],j=a?a(M):M;(w=_(R,j,w,u))>-1;)R!==e&&Ls.call(R,w,1),Ls.call(e,w,1);return e}function Su(e,i){for(var a=e?i.length:0,u=a-1;a--;){var _=i[a];if(a==u||_!==d){var d=_;Zr(_)?Ls.call(e,_,1):vo(e,_)}}return e}function yo(e,i){return e+Ms(cu()*(i-e+1))}function Lp(e,i,a,u){for(var _=-1,d=Ft(Fs((i-e)/(a||1)),0),v=A(d);d--;)v[u?d:++_]=e,e+=a;return v}function Eo(e,i){var a="";if(!e||i<1||i>q)return a;do i%2&&(a+=e),i=Ms(i/2),i&&(e+=e);while(i);return a}function be(e,i){return Bo(nl(e,i,ar),e+"")}function Bp(e){return hu(cn(e))}function Fp(e,i){var a=cn(e);return ea(a,Di(i,0,a.length))}function xn(e,i,a,u){if(!ct(e))return e;i=di(i,e);for(var _=-1,d=i.length,v=d-1,R=e;R!=null&&++_<d;){var w=Hr(i[_]),M=a;if(w==="__proto__"||w==="constructor"||w==="prototype")return e;if(_!=v){var j=R[w];M=u?u(j,w,R):t,M===t&&(M=ct(j)?j:Zr(i[_+1])?[]:{})}Pn(R,w,M),R=R[w]}return e}var Cu=js?function(e,i){return js.set(e,i),e}:ar,Mp=Bs?function(e,i){return Bs(e,"toString",{configurable:!0,enumerable:!1,value:qo(i),writable:!0})}:ar;function jp(e){return ea(cn(e))}function Tr(e,i,a){var u=-1,_=e.length;i<0&&(i=-i>_?0:_+i),a=a>_?_:a,a<0&&(a+=_),_=i>a?0:a-i>>>0,i>>>=0;for(var d=A(_);++u<_;)d[u]=e[u+i];return d}function Gp(e,i){var a;return fi(e,function(u,_,d){return a=i(u,_,d),!a}),!!a}function qs(e,i,a){var u=0,_=e==null?u:e.length;if(typeof i=="number"&&i===i&&_<=$e){for(;u<_;){var d=u+_>>>1,v=e[d];v!==null&&!fr(v)&&(a?v<=i:v<i)?u=d+1:_=d}return _}return mo(e,i,ar,a)}function mo(e,i,a,u){var _=0,d=e==null?0:e.length;if(d===0)return 0;i=a(i);for(var v=i!==i,R=i===null,w=fr(i),M=i===t;_<d;){var j=Ms((_+d)/2),$=a(e[j]),Y=$!==t,te=$===null,ae=$===$,Re=fr($);if(v)var oe=u||ae;else M?oe=ae&&(u||Y):R?oe=ae&&Y&&(u||!te):w?oe=ae&&Y&&!te&&(u||!Re):te||Re?oe=!1:oe=u?$<=i:$<i;oe?_=j+1:d=j}return kt(d,Ye)}function Au(e,i){for(var a=-1,u=e.length,_=0,d=[];++a<u;){var v=e[a],R=i?i(v):v;if(!a||!xr(R,w)){var w=R;d[_++]=v===0?0:v}}return d}function xu(e){return typeof e=="number"?e:fr(e)?k:+e}function _r(e){if(typeof e=="string")return e;if(Ee(e))return nt(e,_r)+"";if(fr(e))return uu?uu.call(e):"";var i=e+"";return i=="0"&&1/e==-ce?"-0":i}function pi(e,i,a){var u=-1,_=bs,d=e.length,v=!0,R=[],w=R;if(a)v=!1,_=Ka;else if(d>=s){var M=i?null:Jp(e);if(M)return ws(M);v=!1,_=Rn,w=new xi}else w=i?[]:R;e:for(;++u<d;){var j=e[u],$=i?i(j):j;if(j=a||j!==0?j:0,v&&$===$){for(var Y=w.length;Y--;)if(w[Y]===$)continue e;i&&w.push($),R.push(j)}else _(w,$,a)||(w!==R&&w.push($),R.push(j))}return R}function vo(e,i){return i=di(i,e),e=sl(e,i),e==null||delete e[Hr(Or(i))]}function Du(e,i,a,u){return xn(e,i,a(Ni(e,i)),u)}function zs(e,i,a,u){for(var _=e.length,d=u?_:-1;(u?d--:++d<_)&&i(e[d],d,e););return a?Tr(e,u?0:d,u?d+1:_):Tr(e,u?d+1:0,u?_:d)}function Nu(e,i){var a=e;return a instanceof Pe&&(a=a.value()),Wa(i,function(u,_){return _.func.apply(_.thisArg,li([u],_.args))},a)}function Ro(e,i,a){var u=e.length;if(u<2)return u?pi(e[0]):[];for(var _=-1,d=A(u);++_<u;)for(var v=e[_],R=-1;++R<u;)R!=_&&(d[_]=Sn(d[_]||v,e[R],i,a));return pi(Ut(d,1),i,a)}function Lu(e,i,a){for(var u=-1,_=e.length,d=i.length,v={};++u<_;){var R=u<d?i[u]:t;a(v,e[u],R)}return v}function To(e){return vt(e)?e:[]}function Oo(e){return typeof e=="function"?e:ar}function di(e,i){return Ee(e)?e:Do(e,i)?[e]:ul(Me(e))}var Vp=be;function gi(e,i,a){var u=e.length;return a=a===t?u:a,!i&&a>=u?e:Tr(e,i,a)}var Bu=Pf||function(e){return Se.clearTimeout(e)};function Fu(e,i){if(i)return e.slice();var a=e.length,u=iu?iu(a):new e.constructor(a);return e.copy(u),u}function bo(e){var i=new e.constructor(e.byteLength);return new Ds(i).set(new Ds(e)),i}function Hp(e,i){var a=i?bo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function Up(e){var i=new e.constructor(e.source,gr.exec(e));return i.lastIndex=e.lastIndex,i}function $p(e){return wn?We(wn.call(e)):{}}function Mu(e,i){var a=i?bo(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function ju(e,i){if(e!==i){var a=e!==t,u=e===null,_=e===e,d=fr(e),v=i!==t,R=i===null,w=i===i,M=fr(i);if(!R&&!M&&!d&&e>i||d&&v&&w&&!R&&!M||u&&v&&w||!a&&w||!_)return 1;if(!u&&!d&&!M&&e<i||M&&a&&_&&!u&&!d||R&&a&&_||!v&&_||!w)return-1}return 0}function kp(e,i,a){for(var u=-1,_=e.criteria,d=i.criteria,v=_.length,R=a.length;++u<v;){var w=ju(_[u],d[u]);if(w){if(u>=R)return w;var M=a[u];return w*(M=="desc"?-1:1)}}return e.index-i.index}function Gu(e,i,a,u){for(var _=-1,d=e.length,v=a.length,R=-1,w=i.length,M=Ft(d-v,0),j=A(w+M),$=!u;++R<w;)j[R]=i[R];for(;++_<v;)($||_<d)&&(j[a[_]]=e[_]);for(;M--;)j[R++]=e[_++];return j}function Vu(e,i,a,u){for(var _=-1,d=e.length,v=-1,R=a.length,w=-1,M=i.length,j=Ft(d-R,0),$=A(j+M),Y=!u;++_<j;)$[_]=e[_];for(var te=_;++w<M;)$[te+w]=i[w];for(;++v<R;)(Y||_<d)&&($[te+a[v]]=e[_++]);return $}function ir(e,i){var a=-1,u=e.length;for(i||(i=A(u));++a<u;)i[a]=e[a];return i}function Vr(e,i,a,u){var _=!a;a||(a={});for(var d=-1,v=i.length;++d<v;){var R=i[d],w=u?u(a[R],e[R],R,a,e):t;w===t&&(w=e[R]),_?Yr(a,R,w):Pn(a,R,w)}return a}function qp(e,i){return Vr(e,xo(e),i)}function zp(e,i){return Vr(e,Qu(e),i)}function Ks(e,i){return function(a,u){var _=Ee(a)?J_:pp,d=i?i():{};return _(a,e,se(u,2),d)}}function nn(e){return be(function(i,a){var u=-1,_=a.length,d=_>1?a[_-1]:t,v=_>2?a[2]:t;for(d=e.length>3&&typeof d=="function"?(_--,d):t,v&&Xt(a[0],a[1],v)&&(d=_<3?t:d,_=1),i=We(i);++u<_;){var R=a[u];R&&e(i,R,u,d)}return i})}function Hu(e,i){return function(a,u){if(a==null)return a;if(!nr(a))return e(a,u);for(var _=a.length,d=i?_:-1,v=We(a);(i?d--:++d<_)&&u(v[d],d,v)!==!1;);return a}}function Uu(e){return function(i,a,u){for(var _=-1,d=We(i),v=u(i),R=v.length;R--;){var w=v[e?R:++_];if(a(d[w],w,d)===!1)break}return i}}function Kp(e,i,a){var u=i&ie,_=Dn(e);function d(){var v=this&&this!==Se&&this instanceof d?_:e;return v.apply(u?a:this,arguments)}return d}function $u(e){return function(i){i=Me(i);var a=Ji(i)?Cr(i):t,u=a?a[0]:i.charAt(0),_=a?gi(a,1).join(""):i.slice(1);return u[e]()+_}}function sn(e){return function(i){return Wa(Hl(Vl(i).replace(mn,"")),e,"")}}function Dn(e){return function(){var i=arguments;switch(i.length){case 0:return new e;case 1:return new e(i[0]);case 2:return new e(i[0],i[1]);case 3:return new e(i[0],i[1],i[2]);case 4:return new e(i[0],i[1],i[2],i[3]);case 5:return new e(i[0],i[1],i[2],i[3],i[4]);case 6:return new e(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new e(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=rn(e.prototype),u=e.apply(a,i);return ct(u)?u:a}}function Wp(e,i,a){var u=Dn(e);function _(){for(var d=arguments.length,v=A(d),R=d,w=an(_);R--;)v[R]=arguments[R];var M=d<3&&v[0]!==w&&v[d-1]!==w?[]:hi(v,w);if(d-=M.length,d<a)return Wu(e,i,Ws,_.placeholder,t,v,M,t,t,a-d);var j=this&&this!==Se&&this instanceof _?u:e;return jt(j,this,v)}return _}function ku(e){return function(i,a,u){var _=We(i);if(!nr(i)){var d=se(a,3);i=Gt(i),a=function(R){return d(_[R],R,_)}}var v=e(i,a,u);return v>-1?_[d?i[v]:v]:t}}function qu(e){return Xr(function(i){var a=i.length,u=a,_=vr.prototype.thru;for(e&&i.reverse();u--;){var d=i[u];if(typeof d!="function")throw new mr(h);if(_&&!v&&Zs(d)=="wrapper")var v=new vr([],!0)}for(u=v?u:a;++u<a;){d=i[u];var R=Zs(d),w=R=="wrapper"?Co(d):t;w&&No(w[0])&&w[1]==(H|fe|he|W)&&!w[4].length&&w[9]==1?v=v[Zs(w[0])].apply(v,w[3]):v=d.length==1&&No(d)?v[R]():v.thru(d)}return function(){var M=arguments,j=M[0];if(v&&M.length==1&&Ee(j))return v.plant(j).value();for(var $=0,Y=a?i[$].apply(this,M):j;++$<a;)Y=i[$].call(this,Y);return Y}})}function Ws(e,i,a,u,_,d,v,R,w,M){var j=i&H,$=i&ie,Y=i&Te,te=i&(fe|le),ae=i&ge,Re=Y?t:Dn(e);function oe(){for(var Ie=arguments.length,Ce=A(Ie),pr=Ie;pr--;)Ce[pr]=arguments[pr];if(te)var Zt=an(oe),dr=af(Ce,Zt);if(u&&(Ce=Gu(Ce,u,_,te)),d&&(Ce=Vu(Ce,d,v,te)),Ie-=dr,te&&Ie<M){var Rt=hi(Ce,Zt);return Wu(e,i,Ws,oe.placeholder,a,Ce,Rt,R,w,M-Ie)}var Dr=$?a:this,ti=Y?Dr[e]:e;return Ie=Ce.length,R?Ce=pd(Ce,R):ae&&Ie>1&&Ce.reverse(),j&&w<Ie&&(Ce.length=w),this&&this!==Se&&this instanceof oe&&(ti=Re||Dn(ti)),ti.apply(Dr,Ce)}return oe}function zu(e,i){return function(a,u){return Tp(a,e,i(u),{})}}function Ys(e,i){return function(a,u){var _;if(a===t&&u===t)return i;if(a!==t&&(_=a),u!==t){if(_===t)return u;typeof a=="string"||typeof u=="string"?(a=_r(a),u=_r(u)):(a=xu(a),u=xu(u)),_=e(a,u)}return _}}function Io(e){return Xr(function(i){return i=nt(i,hr(se())),be(function(a){var u=this;return e(i,function(_){return jt(_,u,a)})})})}function Js(e,i){i=i===t?" ":_r(i);var a=i.length;if(a<2)return a?Eo(i,e):i;var u=Eo(i,Fs(e/Xi(i)));return Ji(i)?gi(Cr(u),0,e).join(""):u.slice(0,e)}function Yp(e,i,a,u){var _=i&ie,d=Dn(e);function v(){for(var R=-1,w=arguments.length,M=-1,j=u.length,$=A(j+w),Y=this&&this!==Se&&this instanceof v?d:e;++M<j;)$[M]=u[M];for(;w--;)$[M++]=arguments[++R];return jt(Y,_?a:this,$)}return v}function Ku(e){return function(i,a,u){return u&&typeof u!="number"&&Xt(i,a,u)&&(a=u=t),i=ei(i),a===t?(a=i,i=0):a=ei(a),u=u===t?i<a?1:-1:ei(u),Lp(i,a,u,e)}}function Xs(e){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=br(i),a=br(a)),e(i,a)}}function Wu(e,i,a,u,_,d,v,R,w,M){var j=i&fe,$=j?v:t,Y=j?t:v,te=j?d:t,ae=j?t:d;i|=j?he:N,i&=~(j?N:he),i&de||(i&=~(ie|Te));var Re=[e,i,_,te,$,ae,Y,R,w,M],oe=a.apply(t,Re);return No(e)&&al(oe,Re),oe.placeholder=u,ol(oe,e,i)}function wo(e){var i=Bt[e];return function(a,u){if(a=br(a),u=u==null?0:kt(me(u),292),u&&ou(a)){var _=(Me(a)+"e").split("e"),d=i(_[0]+"e"+(+_[1]+u));return _=(Me(d)+"e").split("e"),+(_[0]+"e"+(+_[1]-u))}return i(a)}}var Jp=en&&1/ws(new en([,-0]))[1]==ce?function(e){return new en(e)}:Wo;function Yu(e){return function(i){var a=qt(i);return a==ve?to(i):a==Fe?ff(i):sf(i,e(i))}}function Jr(e,i,a,u,_,d,v,R){var w=i&Te;if(!w&&typeof e!="function")throw new mr(h);var M=u?u.length:0;if(M||(i&=~(he|N),u=_=t),v=v===t?v:Ft(me(v),0),R=R===t?R:me(R),M-=_?_.length:0,i&N){var j=u,$=_;u=_=t}var Y=w?t:Co(e),te=[e,i,a,u,_,j,$,d,v,R];if(Y&&hd(te,Y),e=te[0],i=te[1],a=te[2],u=te[3],_=te[4],R=te[9]=te[9]===t?w?0:e.length:Ft(te[9]-M,0),!R&&i&(fe|le)&&(i&=~(fe|le)),!i||i==ie)var ae=Kp(e,i,a);else i==fe||i==le?ae=Wp(e,i,R):(i==he||i==(ie|he))&&!_.length?ae=Yp(e,i,a,u):ae=Ws.apply(t,te);var Re=Y?Cu:al;return ol(Re(ae,te),e,i)}function Ju(e,i,a,u){return e===t||xr(e,Qi[a])&&!Ge.call(u,a)?i:e}function Xu(e,i,a,u,_,d){return ct(e)&&ct(i)&&(d.set(i,e),ks(e,i,t,Xu,d),d.delete(i)),e}function Xp(e){return Bn(e)?t:e}function Zu(e,i,a,u,_,d){var v=a&B,R=e.length,w=i.length;if(R!=w&&!(v&&w>R))return!1;var M=d.get(e),j=d.get(i);if(M&&j)return M==i&&j==e;var $=-1,Y=!0,te=a&z?new xi:t;for(d.set(e,i),d.set(i,e);++$<R;){var ae=e[$],Re=i[$];if(u)var oe=v?u(Re,ae,$,i,e,d):u(ae,Re,$,e,i,d);if(oe!==t){if(oe)continue;Y=!1;break}if(te){if(!Ya(i,function(Ie,Ce){if(!Rn(te,Ce)&&(ae===Ie||_(ae,Ie,a,u,d)))return te.push(Ce)})){Y=!1;break}}else if(!(ae===Re||_(ae,Re,a,u,d))){Y=!1;break}}return d.delete(e),d.delete(i),Y}function Zp(e,i,a,u,_,d,v){switch(a){case ke:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case Ne:return!(e.byteLength!=i.byteLength||!d(new Ds(e),new Ds(i)));case x:case S:case De:return xr(+e,+i);case T:return e.name==i.name&&e.message==i.message;case st:case Xe:return e==i+"";case ve:var R=to;case Fe:var w=u&B;if(R||(R=ws),e.size!=i.size&&!w)return!1;var M=v.get(e);if(M)return M==i;u|=z,v.set(e,i);var j=Zu(R(e),R(i),u,_,d,v);return v.delete(e),j;case Ze:if(wn)return wn.call(e)==wn.call(i)}return!1}function Qp(e,i,a,u,_,d){var v=a&B,R=Po(e),w=R.length,M=Po(i),j=M.length;if(w!=j&&!v)return!1;for(var $=w;$--;){var Y=R[$];if(!(v?Y in i:Ge.call(i,Y)))return!1}var te=d.get(e),ae=d.get(i);if(te&&ae)return te==i&&ae==e;var Re=!0;d.set(e,i),d.set(i,e);for(var oe=v;++$<w;){Y=R[$];var Ie=e[Y],Ce=i[Y];if(u)var pr=v?u(Ce,Ie,Y,i,e,d):u(Ie,Ce,Y,e,i,d);if(!(pr===t?Ie===Ce||_(Ie,Ce,a,u,d):pr)){Re=!1;break}oe||(oe=Y=="constructor")}if(Re&&!oe){var Zt=e.constructor,dr=i.constructor;Zt!=dr&&"constructor"in e&&"constructor"in i&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof dr=="function"&&dr instanceof dr)&&(Re=!1)}return d.delete(e),d.delete(i),Re}function Xr(e){return Bo(nl(e,t,fl),e+"")}function Po(e){return Eu(e,Gt,xo)}function So(e){return Eu(e,sr,Qu)}var Co=js?function(e){return js.get(e)}:Wo;function Zs(e){for(var i=e.name+"",a=tn[i],u=Ge.call(tn,i)?a.length:0;u--;){var _=a[u],d=_.func;if(d==null||d==e)return _.name}return i}function an(e){var i=Ge.call(p,"placeholder")?p:e;return i.placeholder}function se(){var e=p.iteratee||zo;return e=e===zo?Ru:e,arguments.length?e(arguments[0],arguments[1]):e}function Qs(e,i){var a=e.__data__;return od(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Ao(e){for(var i=Gt(e),a=i.length;a--;){var u=i[a],_=e[u];i[a]=[u,_,rl(_)]}return i}function Li(e,i){var a=lf(e,i);return vu(a)?a:t}function ed(e){var i=Ge.call(e,Ci),a=e[Ci];try{e[Ci]=t;var u=!0}catch{}var _=As.call(e);return u&&(i?e[Ci]=a:delete e[Ci]),_}var xo=io?function(e){return e==null?[]:(e=We(e),ui(io(e),function(i){return su.call(e,i)}))}:Yo,Qu=io?function(e){for(var i=[];e;)li(i,xo(e)),e=Ns(e);return i}:Yo,qt=Jt;(no&&qt(new no(new ArrayBuffer(1)))!=ke||On&&qt(new On)!=ve||so&&qt(so.resolve())!=bt||en&&qt(new en)!=Fe||bn&&qt(new bn)!=He)&&(qt=function(e){var i=Jt(e),a=i==we?e.constructor:t,u=a?Bi(a):"";if(u)switch(u){case Ff:return ke;case Mf:return ve;case jf:return bt;case Gf:return Fe;case Vf:return He}return i});function td(e,i,a){for(var u=-1,_=a.length;++u<_;){var d=a[u],v=d.size;switch(d.type){case"drop":e+=v;break;case"dropRight":i-=v;break;case"take":i=kt(i,e+v);break;case"takeRight":e=Ft(e,i-v);break}}return{start:e,end:i}}function rd(e){var i=e.match(Je);return i?i[1].split(Ct):[]}function el(e,i,a){i=di(i,e);for(var u=-1,_=i.length,d=!1;++u<_;){var v=Hr(i[u]);if(!(d=e!=null&&a(e,v)))break;e=e[v]}return d||++u!=_?d:(_=e==null?0:e.length,!!_&&aa(_)&&Zr(v,_)&&(Ee(e)||Fi(e)))}function id(e){var i=e.length,a=new e.constructor(i);return i&&typeof e[0]=="string"&&Ge.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function tl(e){return typeof e.constructor=="function"&&!Nn(e)?rn(Ns(e)):{}}function nd(e,i,a){var u=e.constructor;switch(i){case Ne:return bo(e);case x:case S:return new u(+e);case ke:return Hp(e,a);case ut:case je:case It:case Lt:case Vt:case Ht:case Mt:case Kt:case tr:return Mu(e,a);case ve:return new u;case De:case Xe:return new u(e);case st:return Up(e);case Fe:return new u;case Ze:return $p(e)}}function sd(e,i){var a=i.length;if(!a)return e;var u=a-1;return i[u]=(a>1?"& ":"")+i[u],i=i.join(a>2?", ":" "),e.replace(dt,`{
/* [wrapped with `+i+`] */
`)}function ad(e){return Ee(e)||Fi(e)||!!(au&&e&&e[au])}function Zr(e,i){var a=typeof e;return i=i??q,!!i&&(a=="number"||a!="symbol"&&Na.test(e))&&e>-1&&e%1==0&&e<i}function Xt(e,i,a){if(!ct(a))return!1;var u=typeof i;return(u=="number"?nr(a)&&Zr(i,a.length):u=="string"&&i in a)?xr(a[i],e):!1}function Do(e,i){if(Ee(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||fr(e)?!0:wt.test(e)||!it.test(e)||i!=null&&e in We(i)}function od(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}function No(e){var i=Zs(e),a=p[i];if(typeof a!="function"||!(i in Pe.prototype))return!1;if(e===a)return!0;var u=Co(a);return!!u&&e===u[0]}function cd(e){return!!ru&&ru in e}var ud=Ss?Qr:Jo;function Nn(e){var i=e&&e.constructor,a=typeof i=="function"&&i.prototype||Qi;return e===a}function rl(e){return e===e&&!ct(e)}function il(e,i){return function(a){return a==null?!1:a[e]===i&&(i!==t||e in We(a))}}function ld(e){var i=na(e,function(u){return a.size===g&&a.clear(),u}),a=i.cache;return i}function hd(e,i){var a=e[1],u=i[1],_=a|u,d=_<(ie|Te|H),v=u==H&&a==fe||u==H&&a==W&&e[7].length<=i[8]||u==(H|W)&&i[7].length<=i[8]&&a==fe;if(!(d||v))return e;u&ie&&(e[2]=i[2],_|=a&ie?0:de);var R=i[3];if(R){var w=e[3];e[3]=w?Gu(w,R,i[4]):R,e[4]=w?hi(e[3],P):i[4]}return R=i[5],R&&(w=e[5],e[5]=w?Vu(w,R,i[6]):R,e[6]=w?hi(e[5],P):i[6]),R=i[7],R&&(e[7]=R),u&H&&(e[8]=e[8]==null?i[8]:kt(e[8],i[8])),e[9]==null&&(e[9]=i[9]),e[0]=i[0],e[1]=_,e}function _d(e){var i=[];if(e!=null)for(var a in We(e))i.push(a);return i}function fd(e){return As.call(e)}function nl(e,i,a){return i=Ft(i===t?e.length-1:i,0),function(){for(var u=arguments,_=-1,d=Ft(u.length-i,0),v=A(d);++_<d;)v[_]=u[i+_];_=-1;for(var R=A(i+1);++_<i;)R[_]=u[_];return R[i]=a(v),jt(e,this,R)}}function sl(e,i){return i.length<2?e:Ni(e,Tr(i,0,-1))}function pd(e,i){for(var a=e.length,u=kt(i.length,a),_=ir(e);u--;){var d=i[u];e[u]=Zr(d,a)?_[d]:t}return e}function Lo(e,i){if(!(i==="constructor"&&typeof e[i]=="function")&&i!="__proto__")return e[i]}var al=cl(Cu),Ln=Cf||function(e,i){return Se.setTimeout(e,i)},Bo=cl(Mp);function ol(e,i,a){var u=i+"";return Bo(e,sd(u,dd(rd(u),a)))}function cl(e){var i=0,a=0;return function(){var u=Nf(),_=Ve-(u-a);if(a=u,_>0){if(++i>=xe)return arguments[0]}else i=0;return e.apply(t,arguments)}}function ea(e,i){var a=-1,u=e.length,_=u-1;for(i=i===t?u:i;++a<i;){var d=yo(a,_),v=e[d];e[d]=e[a],e[a]=v}return e.length=i,e}var ul=ld(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(Pt,function(a,u,_,d){i.push(_?d.replace(Pa,"$1"):u||a)}),i});function Hr(e){if(typeof e=="string"||fr(e))return e;var i=e+"";return i=="0"&&1/e==-ce?"-0":i}function Bi(e){if(e!=null){try{return Cs.call(e)}catch{}try{return e+""}catch{}}return""}function dd(e,i){return Er(Br,function(a){var u="_."+a[0];i&a[1]&&!bs(e,u)&&e.push(u)}),e.sort()}function ll(e){if(e instanceof Pe)return e.clone();var i=new vr(e.__wrapped__,e.__chain__);return i.__actions__=ir(e.__actions__),i.__index__=e.__index__,i.__values__=e.__values__,i}function gd(e,i,a){(a?Xt(e,i,a):i===t)?i=1:i=Ft(me(i),0);var u=e==null?0:e.length;if(!u||i<1)return[];for(var _=0,d=0,v=A(Fs(u/i));_<u;)v[d++]=Tr(e,_,_+=i);return v}function yd(e){for(var i=-1,a=e==null?0:e.length,u=0,_=[];++i<a;){var d=e[i];d&&(_[u++]=d)}return _}function Ed(){var e=arguments.length;if(!e)return[];for(var i=A(e-1),a=arguments[0],u=e;u--;)i[u-1]=arguments[u];return li(Ee(a)?ir(a):[a],Ut(i,1))}var md=be(function(e,i){return vt(e)?Sn(e,Ut(i,1,vt,!0)):[]}),vd=be(function(e,i){var a=Or(i);return vt(a)&&(a=t),vt(e)?Sn(e,Ut(i,1,vt,!0),se(a,2)):[]}),Rd=be(function(e,i){var a=Or(i);return vt(a)&&(a=t),vt(e)?Sn(e,Ut(i,1,vt,!0),t,a):[]});function Td(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===t?1:me(i),Tr(e,i<0?0:i,u)):[]}function Od(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===t?1:me(i),i=u-i,Tr(e,0,i<0?0:i)):[]}function bd(e,i){return e&&e.length?zs(e,se(i,3),!0,!0):[]}function Id(e,i){return e&&e.length?zs(e,se(i,3),!0):[]}function wd(e,i,a,u){var _=e==null?0:e.length;return _?(a&&typeof a!="number"&&Xt(e,i,a)&&(a=0,u=_),Ep(e,i,a,u)):[]}function hl(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=a==null?0:me(a);return _<0&&(_=Ft(u+_,0)),Is(e,se(i,3),_)}function _l(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=u-1;return a!==t&&(_=me(a),_=a<0?Ft(u+_,0):kt(_,u-1)),Is(e,se(i,3),_,!0)}function fl(e){var i=e==null?0:e.length;return i?Ut(e,1):[]}function Pd(e){var i=e==null?0:e.length;return i?Ut(e,ce):[]}function Sd(e,i){var a=e==null?0:e.length;return a?(i=i===t?1:me(i),Ut(e,i)):[]}function Cd(e){for(var i=-1,a=e==null?0:e.length,u={};++i<a;){var _=e[i];u[_[0]]=_[1]}return u}function pl(e){return e&&e.length?e[0]:t}function Ad(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=a==null?0:me(a);return _<0&&(_=Ft(u+_,0)),Yi(e,i,_)}function xd(e){var i=e==null?0:e.length;return i?Tr(e,0,-1):[]}var Dd=be(function(e){var i=nt(e,To);return i.length&&i[0]===e[0]?ho(i):[]}),Nd=be(function(e){var i=Or(e),a=nt(e,To);return i===Or(a)?i=t:a.pop(),a.length&&a[0]===e[0]?ho(a,se(i,2)):[]}),Ld=be(function(e){var i=Or(e),a=nt(e,To);return i=typeof i=="function"?i:t,i&&a.pop(),a.length&&a[0]===e[0]?ho(a,t,i):[]});function Bd(e,i){return e==null?"":xf.call(e,i)}function Or(e){var i=e==null?0:e.length;return i?e[i-1]:t}function Fd(e,i,a){var u=e==null?0:e.length;if(!u)return-1;var _=u;return a!==t&&(_=me(a),_=_<0?Ft(u+_,0):kt(_,u-1)),i===i?df(e,i,_):Is(e,Wc,_,!0)}function Md(e,i){return e&&e.length?Iu(e,me(i)):t}var jd=be(dl);function dl(e,i){return e&&e.length&&i&&i.length?go(e,i):e}function Gd(e,i,a){return e&&e.length&&i&&i.length?go(e,i,se(a,2)):e}function Vd(e,i,a){return e&&e.length&&i&&i.length?go(e,i,t,a):e}var Hd=Xr(function(e,i){var a=e==null?0:e.length,u=oo(e,i);return Su(e,nt(i,function(_){return Zr(_,a)?+_:_}).sort(ju)),u});function Ud(e,i){var a=[];if(!(e&&e.length))return a;var u=-1,_=[],d=e.length;for(i=se(i,3);++u<d;){var v=e[u];i(v,u,e)&&(a.push(v),_.push(u))}return Su(e,_),a}function Fo(e){return e==null?e:Bf.call(e)}function $d(e,i,a){var u=e==null?0:e.length;return u?(a&&typeof a!="number"&&Xt(e,i,a)?(i=0,a=u):(i=i==null?0:me(i),a=a===t?u:me(a)),Tr(e,i,a)):[]}function kd(e,i){return qs(e,i)}function qd(e,i,a){return mo(e,i,se(a,2))}function zd(e,i){var a=e==null?0:e.length;if(a){var u=qs(e,i);if(u<a&&xr(e[u],i))return u}return-1}function Kd(e,i){return qs(e,i,!0)}function Wd(e,i,a){return mo(e,i,se(a,2),!0)}function Yd(e,i){var a=e==null?0:e.length;if(a){var u=qs(e,i,!0)-1;if(xr(e[u],i))return u}return-1}function Jd(e){return e&&e.length?Au(e):[]}function Xd(e,i){return e&&e.length?Au(e,se(i,2)):[]}function Zd(e){var i=e==null?0:e.length;return i?Tr(e,1,i):[]}function Qd(e,i,a){return e&&e.length?(i=a||i===t?1:me(i),Tr(e,0,i<0?0:i)):[]}function eg(e,i,a){var u=e==null?0:e.length;return u?(i=a||i===t?1:me(i),i=u-i,Tr(e,i<0?0:i,u)):[]}function tg(e,i){return e&&e.length?zs(e,se(i,3),!1,!0):[]}function rg(e,i){return e&&e.length?zs(e,se(i,3)):[]}var ig=be(function(e){return pi(Ut(e,1,vt,!0))}),ng=be(function(e){var i=Or(e);return vt(i)&&(i=t),pi(Ut(e,1,vt,!0),se(i,2))}),sg=be(function(e){var i=Or(e);return i=typeof i=="function"?i:t,pi(Ut(e,1,vt,!0),t,i)});function ag(e){return e&&e.length?pi(e):[]}function og(e,i){return e&&e.length?pi(e,se(i,2)):[]}function cg(e,i){return i=typeof i=="function"?i:t,e&&e.length?pi(e,t,i):[]}function Mo(e){if(!(e&&e.length))return[];var i=0;return e=ui(e,function(a){if(vt(a))return i=Ft(a.length,i),!0}),Qa(i,function(a){return nt(e,Ja(a))})}function gl(e,i){if(!(e&&e.length))return[];var a=Mo(e);return i==null?a:nt(a,function(u){return jt(i,t,u)})}var ug=be(function(e,i){return vt(e)?Sn(e,i):[]}),lg=be(function(e){return Ro(ui(e,vt))}),hg=be(function(e){var i=Or(e);return vt(i)&&(i=t),Ro(ui(e,vt),se(i,2))}),_g=be(function(e){var i=Or(e);return i=typeof i=="function"?i:t,Ro(ui(e,vt),t,i)}),fg=be(Mo);function pg(e,i){return Lu(e||[],i||[],Pn)}function dg(e,i){return Lu(e||[],i||[],xn)}var gg=be(function(e){var i=e.length,a=i>1?e[i-1]:t;return a=typeof a=="function"?(e.pop(),a):t,gl(e,a)});function yl(e){var i=p(e);return i.__chain__=!0,i}function yg(e,i){return i(e),e}function ta(e,i){return i(e)}var Eg=Xr(function(e){var i=e.length,a=i?e[0]:0,u=this.__wrapped__,_=function(d){return oo(d,e)};return i>1||this.__actions__.length||!(u instanceof Pe)||!Zr(a)?this.thru(_):(u=u.slice(a,+a+(i?1:0)),u.__actions__.push({func:ta,args:[_],thisArg:t}),new vr(u,this.__chain__).thru(function(d){return i&&!d.length&&d.push(t),d}))});function mg(){return yl(this)}function vg(){return new vr(this.value(),this.__chain__)}function Rg(){this.__values__===t&&(this.__values__=xl(this.value()));var e=this.__index__>=this.__values__.length,i=e?t:this.__values__[this.__index__++];return{done:e,value:i}}function Tg(){return this}function Og(e){for(var i,a=this;a instanceof Vs;){var u=ll(a);u.__index__=0,u.__values__=t,i?_.__wrapped__=u:i=u;var _=u;a=a.__wrapped__}return _.__wrapped__=e,i}function bg(){var e=this.__wrapped__;if(e instanceof Pe){var i=e;return this.__actions__.length&&(i=new Pe(this)),i=i.reverse(),i.__actions__.push({func:ta,args:[Fo],thisArg:t}),new vr(i,this.__chain__)}return this.thru(Fo)}function Ig(){return Nu(this.__wrapped__,this.__actions__)}var wg=Ks(function(e,i,a){Ge.call(e,a)?++e[a]:Yr(e,a,1)});function Pg(e,i,a){var u=Ee(e)?zc:yp;return a&&Xt(e,i,a)&&(i=t),u(e,se(i,3))}function Sg(e,i){var a=Ee(e)?ui:gu;return a(e,se(i,3))}var Cg=ku(hl),Ag=ku(_l);function xg(e,i){return Ut(ra(e,i),1)}function Dg(e,i){return Ut(ra(e,i),ce)}function Ng(e,i,a){return a=a===t?1:me(a),Ut(ra(e,i),a)}function El(e,i){var a=Ee(e)?Er:fi;return a(e,se(i,3))}function ml(e,i){var a=Ee(e)?X_:du;return a(e,se(i,3))}var Lg=Ks(function(e,i,a){Ge.call(e,a)?e[a].push(i):Yr(e,a,[i])});function Bg(e,i,a,u){e=nr(e)?e:cn(e),a=a&&!u?me(a):0;var _=e.length;return a<0&&(a=Ft(_+a,0)),oa(e)?a<=_&&e.indexOf(i,a)>-1:!!_&&Yi(e,i,a)>-1}var Fg=be(function(e,i,a){var u=-1,_=typeof i=="function",d=nr(e)?A(e.length):[];return fi(e,function(v){d[++u]=_?jt(i,v,a):Cn(v,i,a)}),d}),Mg=Ks(function(e,i,a){Yr(e,a,i)});function ra(e,i){var a=Ee(e)?nt:Tu;return a(e,se(i,3))}function jg(e,i,a,u){return e==null?[]:(Ee(i)||(i=i==null?[]:[i]),a=u?t:a,Ee(a)||(a=a==null?[]:[a]),wu(e,i,a))}var Gg=Ks(function(e,i,a){e[a?0:1].push(i)},function(){return[[],[]]});function Vg(e,i,a){var u=Ee(e)?Wa:Jc,_=arguments.length<3;return u(e,se(i,4),a,_,fi)}function Hg(e,i,a){var u=Ee(e)?Z_:Jc,_=arguments.length<3;return u(e,se(i,4),a,_,du)}function Ug(e,i){var a=Ee(e)?ui:gu;return a(e,sa(se(i,3)))}function $g(e){var i=Ee(e)?hu:Bp;return i(e)}function kg(e,i,a){(a?Xt(e,i,a):i===t)?i=1:i=me(i);var u=Ee(e)?_p:Fp;return u(e,i)}function qg(e){var i=Ee(e)?fp:jp;return i(e)}function zg(e){if(e==null)return 0;if(nr(e))return oa(e)?Xi(e):e.length;var i=qt(e);return i==ve||i==Fe?e.size:fo(e).length}function Kg(e,i,a){var u=Ee(e)?Ya:Gp;return a&&Xt(e,i,a)&&(i=t),u(e,se(i,3))}var Wg=be(function(e,i){if(e==null)return[];var a=i.length;return a>1&&Xt(e,i[0],i[1])?i=[]:a>2&&Xt(i[0],i[1],i[2])&&(i=[i[0]]),wu(e,Ut(i,1),[])}),ia=Sf||function(){return Se.Date.now()};function Yg(e,i){if(typeof i!="function")throw new mr(h);return e=me(e),function(){if(--e<1)return i.apply(this,arguments)}}function vl(e,i,a){return i=a?t:i,i=e&&i==null?e.length:i,Jr(e,H,t,t,t,t,i)}function Rl(e,i){var a;if(typeof i!="function")throw new mr(h);return e=me(e),function(){return--e>0&&(a=i.apply(this,arguments)),e<=1&&(i=t),a}}var jo=be(function(e,i,a){var u=ie;if(a.length){var _=hi(a,an(jo));u|=he}return Jr(e,u,i,a,_)}),Tl=be(function(e,i,a){var u=ie|Te;if(a.length){var _=hi(a,an(Tl));u|=he}return Jr(i,u,e,a,_)});function Ol(e,i,a){i=a?t:i;var u=Jr(e,fe,t,t,t,t,t,i);return u.placeholder=Ol.placeholder,u}function bl(e,i,a){i=a?t:i;var u=Jr(e,le,t,t,t,t,t,i);return u.placeholder=bl.placeholder,u}function Il(e,i,a){var u,_,d,v,R,w,M=0,j=!1,$=!1,Y=!0;if(typeof e!="function")throw new mr(h);i=br(i)||0,ct(a)&&(j=!!a.leading,$="maxWait"in a,d=$?Ft(br(a.maxWait)||0,i):d,Y="trailing"in a?!!a.trailing:Y);function te(Rt){var Dr=u,ti=_;return u=_=t,M=Rt,v=e.apply(ti,Dr),v}function ae(Rt){return M=Rt,R=Ln(Ie,i),j?te(Rt):v}function Re(Rt){var Dr=Rt-w,ti=Rt-M,kl=i-Dr;return $?kt(kl,d-ti):kl}function oe(Rt){var Dr=Rt-w,ti=Rt-M;return w===t||Dr>=i||Dr<0||$&&ti>=d}function Ie(){var Rt=ia();if(oe(Rt))return Ce(Rt);R=Ln(Ie,Re(Rt))}function Ce(Rt){return R=t,Y&&u?te(Rt):(u=_=t,v)}function pr(){R!==t&&Bu(R),M=0,u=w=_=R=t}function Zt(){return R===t?v:Ce(ia())}function dr(){var Rt=ia(),Dr=oe(Rt);if(u=arguments,_=this,w=Rt,Dr){if(R===t)return ae(w);if($)return Bu(R),R=Ln(Ie,i),te(w)}return R===t&&(R=Ln(Ie,i)),v}return dr.cancel=pr,dr.flush=Zt,dr}var Jg=be(function(e,i){return pu(e,1,i)}),Xg=be(function(e,i,a){return pu(e,br(i)||0,a)});function Zg(e){return Jr(e,ge)}function na(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new mr(h);var a=function(){var u=arguments,_=i?i.apply(this,u):u[0],d=a.cache;if(d.has(_))return d.get(_);var v=e.apply(this,u);return a.cache=d.set(_,v)||d,v};return a.cache=new(na.Cache||Wr),a}na.Cache=Wr;function sa(e){if(typeof e!="function")throw new mr(h);return function(){var i=arguments;switch(i.length){case 0:return!e.call(this);case 1:return!e.call(this,i[0]);case 2:return!e.call(this,i[0],i[1]);case 3:return!e.call(this,i[0],i[1],i[2])}return!e.apply(this,i)}}function Qg(e){return Rl(2,e)}var e0=Vp(function(e,i){i=i.length==1&&Ee(i[0])?nt(i[0],hr(se())):nt(Ut(i,1),hr(se()));var a=i.length;return be(function(u){for(var _=-1,d=kt(u.length,a);++_<d;)u[_]=i[_].call(this,u[_]);return jt(e,this,u)})}),Go=be(function(e,i){var a=hi(i,an(Go));return Jr(e,he,t,i,a)}),wl=be(function(e,i){var a=hi(i,an(wl));return Jr(e,N,t,i,a)}),t0=Xr(function(e,i){return Jr(e,W,t,t,t,i)});function r0(e,i){if(typeof e!="function")throw new mr(h);return i=i===t?i:me(i),be(e,i)}function i0(e,i){if(typeof e!="function")throw new mr(h);return i=i==null?0:Ft(me(i),0),be(function(a){var u=a[i],_=gi(a,0,i);return u&&li(_,u),jt(e,this,_)})}function n0(e,i,a){var u=!0,_=!0;if(typeof e!="function")throw new mr(h);return ct(a)&&(u="leading"in a?!!a.leading:u,_="trailing"in a?!!a.trailing:_),Il(e,i,{leading:u,maxWait:i,trailing:_})}function s0(e){return vl(e,1)}function a0(e,i){return Go(Oo(i),e)}function o0(){if(!arguments.length)return[];var e=arguments[0];return Ee(e)?e:[e]}function c0(e){return Rr(e,G)}function u0(e,i){return i=typeof i=="function"?i:t,Rr(e,G,i)}function l0(e){return Rr(e,F|G)}function h0(e,i){return i=typeof i=="function"?i:t,Rr(e,F|G,i)}function _0(e,i){return i==null||fu(e,i,Gt(i))}function xr(e,i){return e===i||e!==e&&i!==i}var f0=Xs(lo),p0=Xs(function(e,i){return e>=i}),Fi=mu(function(){return arguments}())?mu:function(e){return gt(e)&&Ge.call(e,"callee")&&!su.call(e,"callee")},Ee=A.isArray,d0=Yt?hr(Yt):Op;function nr(e){return e!=null&&aa(e.length)&&!Qr(e)}function vt(e){return gt(e)&&nr(e)}function g0(e){return e===!0||e===!1||gt(e)&&Jt(e)==x}var yi=Af||Jo,y0=Sr?hr(Sr):bp;function E0(e){return gt(e)&&e.nodeType===1&&!Bn(e)}function m0(e){if(e==null)return!0;if(nr(e)&&(Ee(e)||typeof e=="string"||typeof e.splice=="function"||yi(e)||on(e)||Fi(e)))return!e.length;var i=qt(e);if(i==ve||i==Fe)return!e.size;if(Nn(e))return!fo(e).length;for(var a in e)if(Ge.call(e,a))return!1;return!0}function v0(e,i){return An(e,i)}function R0(e,i,a){a=typeof a=="function"?a:t;var u=a?a(e,i):t;return u===t?An(e,i,t,a):!!u}function Vo(e){if(!gt(e))return!1;var i=Jt(e);return i==T||i==l||typeof e.message=="string"&&typeof e.name=="string"&&!Bn(e)}function T0(e){return typeof e=="number"&&ou(e)}function Qr(e){if(!ct(e))return!1;var i=Jt(e);return i==ee||i==_e||i==D||i==yt}function Pl(e){return typeof e=="number"&&e==me(e)}function aa(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=q}function ct(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}function gt(e){return e!=null&&typeof e=="object"}var Sl=yr?hr(yr):wp;function O0(e,i){return e===i||_o(e,i,Ao(i))}function b0(e,i,a){return a=typeof a=="function"?a:t,_o(e,i,Ao(i),a)}function I0(e){return Cl(e)&&e!=+e}function w0(e){if(ud(e))throw new pe(c);return vu(e)}function P0(e){return e===null}function S0(e){return e==null}function Cl(e){return typeof e=="number"||gt(e)&&Jt(e)==De}function Bn(e){if(!gt(e)||Jt(e)!=we)return!1;var i=Ns(e);if(i===null)return!0;var a=Ge.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Cs.call(a)==bf}var Ho=jr?hr(jr):Pp;function C0(e){return Pl(e)&&e>=-q&&e<=q}var Al=vn?hr(vn):Sp;function oa(e){return typeof e=="string"||!Ee(e)&&gt(e)&&Jt(e)==Xe}function fr(e){return typeof e=="symbol"||gt(e)&&Jt(e)==Ze}var on=Si?hr(Si):Cp;function A0(e){return e===t}function x0(e){return gt(e)&&qt(e)==He}function D0(e){return gt(e)&&Jt(e)==Qe}var N0=Xs(po),L0=Xs(function(e,i){return e<=i});function xl(e){if(!e)return[];if(nr(e))return oa(e)?Cr(e):ir(e);if(Tn&&e[Tn])return _f(e[Tn]());var i=qt(e),a=i==ve?to:i==Fe?ws:cn;return a(e)}function ei(e){if(!e)return e===0?e:0;if(e=br(e),e===ce||e===-ce){var i=e<0?-1:1;return i*U}return e===e?e:0}function me(e){var i=ei(e),a=i%1;return i===i?a?i-a:i:0}function Dl(e){return e?Di(me(e),0,K):0}function br(e){if(typeof e=="number")return e;if(fr(e))return k;if(ct(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=ct(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=Xc(e);var a=Aa.test(e);return a||Da.test(e)?ye(e.slice(2),a?2:8):Ca.test(e)?k:+e}function Nl(e){return Vr(e,sr(e))}function B0(e){return e?Di(me(e),-q,q):e===0?e:0}function Me(e){return e==null?"":_r(e)}var F0=nn(function(e,i){if(Nn(i)||nr(i)){Vr(i,Gt(i),e);return}for(var a in i)Ge.call(i,a)&&Pn(e,a,i[a])}),Ll=nn(function(e,i){Vr(i,sr(i),e)}),ca=nn(function(e,i,a,u){Vr(i,sr(i),e,u)}),M0=nn(function(e,i,a,u){Vr(i,Gt(i),e,u)}),j0=Xr(oo);function G0(e,i){var a=rn(e);return i==null?a:_u(a,i)}var V0=be(function(e,i){e=We(e);var a=-1,u=i.length,_=u>2?i[2]:t;for(_&&Xt(i[0],i[1],_)&&(u=1);++a<u;)for(var d=i[a],v=sr(d),R=-1,w=v.length;++R<w;){var M=v[R],j=e[M];(j===t||xr(j,Qi[M])&&!Ge.call(e,M))&&(e[M]=d[M])}return e}),H0=be(function(e){return e.push(t,Xu),jt(Bl,t,e)});function U0(e,i){return Kc(e,se(i,3),Gr)}function $0(e,i){return Kc(e,se(i,3),uo)}function k0(e,i){return e==null?e:co(e,se(i,3),sr)}function q0(e,i){return e==null?e:yu(e,se(i,3),sr)}function z0(e,i){return e&&Gr(e,se(i,3))}function K0(e,i){return e&&uo(e,se(i,3))}function W0(e){return e==null?[]:$s(e,Gt(e))}function Y0(e){return e==null?[]:$s(e,sr(e))}function Uo(e,i,a){var u=e==null?t:Ni(e,i);return u===t?a:u}function J0(e,i){return e!=null&&el(e,i,mp)}function $o(e,i){return e!=null&&el(e,i,vp)}var X0=zu(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=As.call(i)),e[i]=a},qo(ar)),Z0=zu(function(e,i,a){i!=null&&typeof i.toString!="function"&&(i=As.call(i)),Ge.call(e,i)?e[i].push(a):e[i]=[a]},se),Q0=be(Cn);function Gt(e){return nr(e)?lu(e):fo(e)}function sr(e){return nr(e)?lu(e,!0):Ap(e)}function e1(e,i){var a={};return i=se(i,3),Gr(e,function(u,_,d){Yr(a,i(u,_,d),u)}),a}function t1(e,i){var a={};return i=se(i,3),Gr(e,function(u,_,d){Yr(a,_,i(u,_,d))}),a}var r1=nn(function(e,i,a){ks(e,i,a)}),Bl=nn(function(e,i,a,u){ks(e,i,a,u)}),i1=Xr(function(e,i){var a={};if(e==null)return a;var u=!1;i=nt(i,function(d){return d=di(d,e),u||(u=d.length>1),d}),Vr(e,So(e),a),u&&(a=Rr(a,F|C|G,Xp));for(var _=i.length;_--;)vo(a,i[_]);return a});function n1(e,i){return Fl(e,sa(se(i)))}var s1=Xr(function(e,i){return e==null?{}:Dp(e,i)});function Fl(e,i){if(e==null)return{};var a=nt(So(e),function(u){return[u]});return i=se(i),Pu(e,a,function(u,_){return i(u,_[0])})}function a1(e,i,a){i=di(i,e);var u=-1,_=i.length;for(_||(_=1,e=t);++u<_;){var d=e==null?t:e[Hr(i[u])];d===t&&(u=_,d=a),e=Qr(d)?d.call(e):d}return e}function o1(e,i,a){return e==null?e:xn(e,i,a)}function c1(e,i,a,u){return u=typeof u=="function"?u:t,e==null?e:xn(e,i,a,u)}var Ml=Yu(Gt),jl=Yu(sr);function u1(e,i,a){var u=Ee(e),_=u||yi(e)||on(e);if(i=se(i,4),a==null){var d=e&&e.constructor;_?a=u?new d:[]:ct(e)?a=Qr(d)?rn(Ns(e)):{}:a={}}return(_?Er:Gr)(e,function(v,R,w){return i(a,v,R,w)}),a}function l1(e,i){return e==null?!0:vo(e,i)}function h1(e,i,a){return e==null?e:Du(e,i,Oo(a))}function _1(e,i,a,u){return u=typeof u=="function"?u:t,e==null?e:Du(e,i,Oo(a),u)}function cn(e){return e==null?[]:eo(e,Gt(e))}function f1(e){return e==null?[]:eo(e,sr(e))}function p1(e,i,a){return a===t&&(a=i,i=t),a!==t&&(a=br(a),a=a===a?a:0),i!==t&&(i=br(i),i=i===i?i:0),Di(br(e),i,a)}function d1(e,i,a){return i=ei(i),a===t?(a=i,i=0):a=ei(a),e=br(e),Rp(e,i,a)}function g1(e,i,a){if(a&&typeof a!="boolean"&&Xt(e,i,a)&&(i=a=t),a===t&&(typeof i=="boolean"?(a=i,i=t):typeof e=="boolean"&&(a=e,e=t)),e===t&&i===t?(e=0,i=1):(e=ei(e),i===t?(i=e,e=0):i=ei(i)),e>i){var u=e;e=i,i=u}if(a||e%1||i%1){var _=cu();return kt(e+_*(i-e+ze("1e-"+((_+"").length-1))),i)}return yo(e,i)}var y1=sn(function(e,i,a){return i=i.toLowerCase(),e+(a?Gl(i):i)});function Gl(e){return ko(Me(e).toLowerCase())}function Vl(e){return e=Me(e),e&&e.replace(qr,of).replace(qa,"")}function E1(e,i,a){e=Me(e),i=_r(i);var u=e.length;a=a===t?u:Di(me(a),0,u);var _=a;return a-=i.length,a>=0&&e.slice(a,_)==i}function m1(e){return e=Me(e),e&&rt.test(e)?e.replace(Oi,cf):e}function v1(e){return e=Me(e),e&&St.test(e)?e.replace(ft,"\\$&"):e}var R1=sn(function(e,i,a){return e+(a?"-":"")+i.toLowerCase()}),T1=sn(function(e,i,a){return e+(a?" ":"")+i.toLowerCase()}),O1=$u("toLowerCase");function b1(e,i,a){e=Me(e),i=me(i);var u=i?Xi(e):0;if(!i||u>=i)return e;var _=(i-u)/2;return Js(Ms(_),a)+e+Js(Fs(_),a)}function I1(e,i,a){e=Me(e),i=me(i);var u=i?Xi(e):0;return i&&u<i?e+Js(i-u,a):e}function w1(e,i,a){e=Me(e),i=me(i);var u=i?Xi(e):0;return i&&u<i?Js(i-u,a)+e:e}function P1(e,i,a){return a||i==null?i=0:i&&(i=+i),Lf(Me(e).replace(pt,""),i||0)}function S1(e,i,a){return(a?Xt(e,i,a):i===t)?i=1:i=me(i),Eo(Me(e),i)}function C1(){var e=arguments,i=Me(e[0]);return e.length<3?i:i.replace(e[1],e[2])}var A1=sn(function(e,i,a){return e+(a?"_":"")+i.toLowerCase()});function x1(e,i,a){return a&&typeof a!="number"&&Xt(e,i,a)&&(i=a=t),a=a===t?K:a>>>0,a?(e=Me(e),e&&(typeof i=="string"||i!=null&&!Ho(i))&&(i=_r(i),!i&&Ji(e))?gi(Cr(e),0,a):e.split(i,a)):[]}var D1=sn(function(e,i,a){return e+(a?" ":"")+ko(i)});function N1(e,i,a){return e=Me(e),a=a==null?0:Di(me(a),0,e.length),i=_r(i),e.slice(a,a+i.length)==i}function L1(e,i,a){var u=p.templateSettings;a&&Xt(e,i,a)&&(i=t),e=Me(e),i=ca({},i,u,Ju);var _=ca({},i.imports,u.imports,Ju),d=Gt(_),v=eo(_,d),R,w,M=0,j=i.interpolate||Ui,$="__p += '",Y=ro((i.escape||Ui).source+"|"+j.source+"|"+(j===ot?Sa:Ui).source+"|"+(i.evaluate||Ui).source+"|$","g"),te="//# sourceURL="+(Ge.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++za+"]")+`
`;e.replace(Y,function(oe,Ie,Ce,pr,Zt,dr){return Ce||(Ce=pr),$+=e.slice(M,dr).replace(La,uf),Ie&&(R=!0,$+=`' +
__e(`+Ie+`) +
'`),Zt&&(w=!0,$+=`';
`+Zt+`;
__p += '`),Ce&&($+=`' +
((__t = (`+Ce+`)) == null ? '' : __t) +
'`),M=dr+oe.length,oe}),$+=`';
`;var ae=Ge.call(i,"variable")&&i.variable;if(!ae)$=`with (obj) {
`+$+`
}
`;else if(wa.test(ae))throw new pe(f);$=(w?$.replace(Fr,""):$).replace(Wt,"$1").replace(kr,"$1;"),$="function("+(ae||"obj")+`) {
`+(ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$+`return __p
}`;var Re=Ul(function(){return Be(d,te+"return "+$).apply(t,v)});if(Re.source=$,Vo(Re))throw Re;return Re}function B1(e){return Me(e).toLowerCase()}function F1(e){return Me(e).toUpperCase()}function M1(e,i,a){if(e=Me(e),e&&(a||i===t))return Xc(e);if(!e||!(i=_r(i)))return e;var u=Cr(e),_=Cr(i),d=Zc(u,_),v=Qc(u,_)+1;return gi(u,d,v).join("")}function j1(e,i,a){if(e=Me(e),e&&(a||i===t))return e.slice(0,tu(e)+1);if(!e||!(i=_r(i)))return e;var u=Cr(e),_=Qc(u,Cr(i))+1;return gi(u,0,_).join("")}function G1(e,i,a){if(e=Me(e),e&&(a||i===t))return e.replace(pt,"");if(!e||!(i=_r(i)))return e;var u=Cr(e),_=Zc(u,Cr(i));return gi(u,_).join("")}function V1(e,i){var a=re,u=ue;if(ct(i)){var _="separator"in i?i.separator:_;a="length"in i?me(i.length):a,u="omission"in i?_r(i.omission):u}e=Me(e);var d=e.length;if(Ji(e)){var v=Cr(e);d=v.length}if(a>=d)return e;var R=a-Xi(u);if(R<1)return u;var w=v?gi(v,0,R).join(""):e.slice(0,R);if(_===t)return w+u;if(v&&(R+=w.length-R),Ho(_)){if(e.slice(R).search(_)){var M,j=w;for(_.global||(_=ro(_.source,Me(gr.exec(_))+"g")),_.lastIndex=0;M=_.exec(j);)var $=M.index;w=w.slice(0,$===t?R:$)}}else if(e.indexOf(_r(_),R)!=R){var Y=w.lastIndexOf(_);Y>-1&&(w=w.slice(0,Y))}return w+u}function H1(e){return e=Me(e),e&&lt.test(e)?e.replace(oi,gf):e}var U1=sn(function(e,i,a){return e+(a?" ":"")+i.toUpperCase()}),ko=$u("toUpperCase");function Hl(e,i,a){return e=Me(e),i=a?t:i,i===t?hf(e)?mf(e):tf(e):e.match(i)||[]}var Ul=be(function(e,i){try{return jt(e,t,i)}catch(a){return Vo(a)?a:new pe(a)}}),$1=Xr(function(e,i){return Er(i,function(a){a=Hr(a),Yr(e,a,jo(e[a],e))}),e});function k1(e){var i=e==null?0:e.length,a=se();return e=i?nt(e,function(u){if(typeof u[1]!="function")throw new mr(h);return[a(u[0]),u[1]]}):[],be(function(u){for(var _=-1;++_<i;){var d=e[_];if(jt(d[0],this,u))return jt(d[1],this,u)}})}function q1(e){return gp(Rr(e,F))}function qo(e){return function(){return e}}function z1(e,i){return e==null||e!==e?i:e}var K1=qu(),W1=qu(!0);function ar(e){return e}function zo(e){return Ru(typeof e=="function"?e:Rr(e,F))}function Y1(e){return Ou(Rr(e,F))}function J1(e,i){return bu(e,Rr(i,F))}var X1=be(function(e,i){return function(a){return Cn(a,e,i)}}),Z1=be(function(e,i){return function(a){return Cn(e,a,i)}});function Ko(e,i,a){var u=Gt(i),_=$s(i,u);a==null&&!(ct(i)&&(_.length||!u.length))&&(a=i,i=e,e=this,_=$s(i,Gt(i)));var d=!(ct(a)&&"chain"in a)||!!a.chain,v=Qr(e);return Er(_,function(R){var w=i[R];e[R]=w,v&&(e.prototype[R]=function(){var M=this.__chain__;if(d||M){var j=e(this.__wrapped__),$=j.__actions__=ir(this.__actions__);return $.push({func:w,args:arguments,thisArg:e}),j.__chain__=M,j}return w.apply(e,li([this.value()],arguments))})}),e}function Q1(){return Se._===this&&(Se._=If),this}function Wo(){}function ey(e){return e=me(e),be(function(i){return Iu(i,e)})}var ty=Io(nt),ry=Io(zc),iy=Io(Ya);function $l(e){return Do(e)?Ja(Hr(e)):Np(e)}function ny(e){return function(i){return e==null?t:Ni(e,i)}}var sy=Ku(),ay=Ku(!0);function Yo(){return[]}function Jo(){return!1}function oy(){return{}}function cy(){return""}function uy(){return!0}function ly(e,i){if(e=me(e),e<1||e>q)return[];var a=K,u=kt(e,K);i=se(i),e-=K;for(var _=Qa(u,i);++a<e;)i(a);return _}function hy(e){return Ee(e)?nt(e,Hr):fr(e)?[e]:ir(ul(Me(e)))}function _y(e){var i=++Of;return Me(e)+i}var fy=Ys(function(e,i){return e+i},0),py=wo("ceil"),dy=Ys(function(e,i){return e/i},1),gy=wo("floor");function yy(e){return e&&e.length?Us(e,ar,lo):t}function Ey(e,i){return e&&e.length?Us(e,se(i,2),lo):t}function my(e){return Yc(e,ar)}function vy(e,i){return Yc(e,se(i,2))}function Ry(e){return e&&e.length?Us(e,ar,po):t}function Ty(e,i){return e&&e.length?Us(e,se(i,2),po):t}var Oy=Ys(function(e,i){return e*i},1),by=wo("round"),Iy=Ys(function(e,i){return e-i},0);function wy(e){return e&&e.length?Za(e,ar):0}function Py(e,i){return e&&e.length?Za(e,se(i,2)):0}return p.after=Yg,p.ary=vl,p.assign=F0,p.assignIn=Ll,p.assignInWith=ca,p.assignWith=M0,p.at=j0,p.before=Rl,p.bind=jo,p.bindAll=$1,p.bindKey=Tl,p.castArray=o0,p.chain=yl,p.chunk=gd,p.compact=yd,p.concat=Ed,p.cond=k1,p.conforms=q1,p.constant=qo,p.countBy=wg,p.create=G0,p.curry=Ol,p.curryRight=bl,p.debounce=Il,p.defaults=V0,p.defaultsDeep=H0,p.defer=Jg,p.delay=Xg,p.difference=md,p.differenceBy=vd,p.differenceWith=Rd,p.drop=Td,p.dropRight=Od,p.dropRightWhile=bd,p.dropWhile=Id,p.fill=wd,p.filter=Sg,p.flatMap=xg,p.flatMapDeep=Dg,p.flatMapDepth=Ng,p.flatten=fl,p.flattenDeep=Pd,p.flattenDepth=Sd,p.flip=Zg,p.flow=K1,p.flowRight=W1,p.fromPairs=Cd,p.functions=W0,p.functionsIn=Y0,p.groupBy=Lg,p.initial=xd,p.intersection=Dd,p.intersectionBy=Nd,p.intersectionWith=Ld,p.invert=X0,p.invertBy=Z0,p.invokeMap=Fg,p.iteratee=zo,p.keyBy=Mg,p.keys=Gt,p.keysIn=sr,p.map=ra,p.mapKeys=e1,p.mapValues=t1,p.matches=Y1,p.matchesProperty=J1,p.memoize=na,p.merge=r1,p.mergeWith=Bl,p.method=X1,p.methodOf=Z1,p.mixin=Ko,p.negate=sa,p.nthArg=ey,p.omit=i1,p.omitBy=n1,p.once=Qg,p.orderBy=jg,p.over=ty,p.overArgs=e0,p.overEvery=ry,p.overSome=iy,p.partial=Go,p.partialRight=wl,p.partition=Gg,p.pick=s1,p.pickBy=Fl,p.property=$l,p.propertyOf=ny,p.pull=jd,p.pullAll=dl,p.pullAllBy=Gd,p.pullAllWith=Vd,p.pullAt=Hd,p.range=sy,p.rangeRight=ay,p.rearg=t0,p.reject=Ug,p.remove=Ud,p.rest=r0,p.reverse=Fo,p.sampleSize=kg,p.set=o1,p.setWith=c1,p.shuffle=qg,p.slice=$d,p.sortBy=Wg,p.sortedUniq=Jd,p.sortedUniqBy=Xd,p.split=x1,p.spread=i0,p.tail=Zd,p.take=Qd,p.takeRight=eg,p.takeRightWhile=tg,p.takeWhile=rg,p.tap=yg,p.throttle=n0,p.thru=ta,p.toArray=xl,p.toPairs=Ml,p.toPairsIn=jl,p.toPath=hy,p.toPlainObject=Nl,p.transform=u1,p.unary=s0,p.union=ig,p.unionBy=ng,p.unionWith=sg,p.uniq=ag,p.uniqBy=og,p.uniqWith=cg,p.unset=l1,p.unzip=Mo,p.unzipWith=gl,p.update=h1,p.updateWith=_1,p.values=cn,p.valuesIn=f1,p.without=ug,p.words=Hl,p.wrap=a0,p.xor=lg,p.xorBy=hg,p.xorWith=_g,p.zip=fg,p.zipObject=pg,p.zipObjectDeep=dg,p.zipWith=gg,p.entries=Ml,p.entriesIn=jl,p.extend=Ll,p.extendWith=ca,Ko(p,p),p.add=fy,p.attempt=Ul,p.camelCase=y1,p.capitalize=Gl,p.ceil=py,p.clamp=p1,p.clone=c0,p.cloneDeep=l0,p.cloneDeepWith=h0,p.cloneWith=u0,p.conformsTo=_0,p.deburr=Vl,p.defaultTo=z1,p.divide=dy,p.endsWith=E1,p.eq=xr,p.escape=m1,p.escapeRegExp=v1,p.every=Pg,p.find=Cg,p.findIndex=hl,p.findKey=U0,p.findLast=Ag,p.findLastIndex=_l,p.findLastKey=$0,p.floor=gy,p.forEach=El,p.forEachRight=ml,p.forIn=k0,p.forInRight=q0,p.forOwn=z0,p.forOwnRight=K0,p.get=Uo,p.gt=f0,p.gte=p0,p.has=J0,p.hasIn=$o,p.head=pl,p.identity=ar,p.includes=Bg,p.indexOf=Ad,p.inRange=d1,p.invoke=Q0,p.isArguments=Fi,p.isArray=Ee,p.isArrayBuffer=d0,p.isArrayLike=nr,p.isArrayLikeObject=vt,p.isBoolean=g0,p.isBuffer=yi,p.isDate=y0,p.isElement=E0,p.isEmpty=m0,p.isEqual=v0,p.isEqualWith=R0,p.isError=Vo,p.isFinite=T0,p.isFunction=Qr,p.isInteger=Pl,p.isLength=aa,p.isMap=Sl,p.isMatch=O0,p.isMatchWith=b0,p.isNaN=I0,p.isNative=w0,p.isNil=S0,p.isNull=P0,p.isNumber=Cl,p.isObject=ct,p.isObjectLike=gt,p.isPlainObject=Bn,p.isRegExp=Ho,p.isSafeInteger=C0,p.isSet=Al,p.isString=oa,p.isSymbol=fr,p.isTypedArray=on,p.isUndefined=A0,p.isWeakMap=x0,p.isWeakSet=D0,p.join=Bd,p.kebabCase=R1,p.last=Or,p.lastIndexOf=Fd,p.lowerCase=T1,p.lowerFirst=O1,p.lt=N0,p.lte=L0,p.max=yy,p.maxBy=Ey,p.mean=my,p.meanBy=vy,p.min=Ry,p.minBy=Ty,p.stubArray=Yo,p.stubFalse=Jo,p.stubObject=oy,p.stubString=cy,p.stubTrue=uy,p.multiply=Oy,p.nth=Md,p.noConflict=Q1,p.noop=Wo,p.now=ia,p.pad=b1,p.padEnd=I1,p.padStart=w1,p.parseInt=P1,p.random=g1,p.reduce=Vg,p.reduceRight=Hg,p.repeat=S1,p.replace=C1,p.result=a1,p.round=by,p.runInContext=I,p.sample=$g,p.size=zg,p.snakeCase=A1,p.some=Kg,p.sortedIndex=kd,p.sortedIndexBy=qd,p.sortedIndexOf=zd,p.sortedLastIndex=Kd,p.sortedLastIndexBy=Wd,p.sortedLastIndexOf=Yd,p.startCase=D1,p.startsWith=N1,p.subtract=Iy,p.sum=wy,p.sumBy=Py,p.template=L1,p.times=ly,p.toFinite=ei,p.toInteger=me,p.toLength=Dl,p.toLower=B1,p.toNumber=br,p.toSafeInteger=B0,p.toString=Me,p.toUpper=F1,p.trim=M1,p.trimEnd=j1,p.trimStart=G1,p.truncate=V1,p.unescape=H1,p.uniqueId=_y,p.upperCase=U1,p.upperFirst=ko,p.each=El,p.eachRight=ml,p.first=pl,Ko(p,function(){var e={};return Gr(p,function(i,a){Ge.call(p.prototype,a)||(e[a]=i)}),e}(),{chain:!1}),p.VERSION=n,Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Er(["drop","take"],function(e,i){Pe.prototype[e]=function(a){a=a===t?1:Ft(me(a),0);var u=this.__filtered__&&!i?new Pe(this):this.clone();return u.__filtered__?u.__takeCount__=kt(a,u.__takeCount__):u.__views__.push({size:kt(a,K),type:e+(u.__dir__<0?"Right":"")}),u},Pe.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Er(["filter","map","takeWhile"],function(e,i){var a=i+1,u=a==E||a==X;Pe.prototype[e]=function(_){var d=this.clone();return d.__iteratees__.push({iteratee:se(_,3),type:a}),d.__filtered__=d.__filtered__||u,d}}),Er(["head","last"],function(e,i){var a="take"+(i?"Right":"");Pe.prototype[e]=function(){return this[a](1).value()[0]}}),Er(["initial","tail"],function(e,i){var a="drop"+(i?"":"Right");Pe.prototype[e]=function(){return this.__filtered__?new Pe(this):this[a](1)}}),Pe.prototype.compact=function(){return this.filter(ar)},Pe.prototype.find=function(e){return this.filter(e).head()},Pe.prototype.findLast=function(e){return this.reverse().find(e)},Pe.prototype.invokeMap=be(function(e,i){return typeof e=="function"?new Pe(this):this.map(function(a){return Cn(a,e,i)})}),Pe.prototype.reject=function(e){return this.filter(sa(se(e)))},Pe.prototype.slice=function(e,i){e=me(e);var a=this;return a.__filtered__&&(e>0||i<0)?new Pe(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),i!==t&&(i=me(i),a=i<0?a.dropRight(-i):a.take(i-e)),a)},Pe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pe.prototype.toArray=function(){return this.take(K)},Gr(Pe.prototype,function(e,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),u=/^(?:head|last)$/.test(i),_=p[u?"take"+(i=="last"?"Right":""):i],d=u||/^find/.test(i);_&&(p.prototype[i]=function(){var v=this.__wrapped__,R=u?[1]:arguments,w=v instanceof Pe,M=R[0],j=w||Ee(v),$=function(Ie){var Ce=_.apply(p,li([Ie],R));return u&&Y?Ce[0]:Ce};j&&a&&typeof M=="function"&&M.length!=1&&(w=j=!1);var Y=this.__chain__,te=!!this.__actions__.length,ae=d&&!Y,Re=w&&!te;if(!d&&j){v=Re?v:new Pe(this);var oe=e.apply(v,R);return oe.__actions__.push({func:ta,args:[$],thisArg:t}),new vr(oe,Y)}return ae&&Re?e.apply(this,R):(oe=this.thru($),ae?u?oe.value()[0]:oe.value():oe)})}),Er(["pop","push","shift","sort","splice","unshift"],function(e){var i=Ps[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var _=arguments;if(u&&!this.__chain__){var d=this.value();return i.apply(Ee(d)?d:[],_)}return this[a](function(v){return i.apply(Ee(v)?v:[],_)})}}),Gr(Pe.prototype,function(e,i){var a=p[i];if(a){var u=a.name+"";Ge.call(tn,u)||(tn[u]=[]),tn[u].push({name:i,func:a})}}),tn[Ws(t,Te).name]=[{name:"wrapper",func:t}],Pe.prototype.clone=Hf,Pe.prototype.reverse=Uf,Pe.prototype.value=$f,p.prototype.at=Eg,p.prototype.chain=mg,p.prototype.commit=vg,p.prototype.next=Rg,p.prototype.plant=Og,p.prototype.reverse=bg,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Ig,p.prototype.first=p.prototype.head,Tn&&(p.prototype[Tn]=Tg),p},Zi=vf();mt?((mt.exports=Zi)._=Zi,Ke._=Zi):Se._=Zi}).call(qn)})(Ac,Ac.exports);var YO=Object.defineProperty,JO=Object.defineProperties,XO=Object.getOwnPropertyDescriptors,zh=Object.getOwnPropertySymbols,ZO=Object.prototype.hasOwnProperty,QO=Object.prototype.propertyIsEnumerable,Kh=(o,r,t)=>r in o?YO(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,ha=(o,r)=>{for(var t in r||(r={}))ZO.call(r,t)&&Kh(o,t,r[t]);if(zh)for(var t of zh(r))QO.call(r,t)&&Kh(o,t,r[t]);return o},eb=(o,r)=>JO(o,XO(r));function gn(o,r,t){var n;const s=_E(o);return((n=r.rpcMap)==null?void 0:n[s.reference])||`${WO}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function Hi(o){return o.includes(":")?o.split(":")[1]:o}function W_(o){return o.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function tb(o,r){const t=Object.keys(r.namespaces).filter(s=>s.includes(o));if(!t.length)return[];const n=[];return t.forEach(s=>{const c=r.namespaces[s].accounts;n.push(...c)}),n}function rb(o={},r={}){const t=Wh(o),n=Wh(r);return Ac.exports.merge(t,n)}function Wh(o){var r,t,n,s;const c={};if(!pa(o))return c;for(const[h,f]of Object.entries(o)){const m=c_(h)?[h]:f.chains,g=f.methods||[],P=f.events||[],F=f.rpcMap||{},C=zn(h);c[C]=eb(ha(ha({},c[C]),f),{chains:Zo(m,(r=c[C])==null?void 0:r.chains),methods:Zo(g,(t=c[C])==null?void 0:t.methods),events:Zo(P,(n=c[C])==null?void 0:n.events),rpcMap:ha(ha({},F),(s=c[C])==null?void 0:s.rpcMap)})}return c}function ib(o){return o.includes(":")?o.split(":")[2]:o}function nb(o){const r={};for(const[t,n]of Object.entries(o)){const s=n.methods||[],c=n.events||[],h=n.accounts||[],f=c_(t)?[t]:n.chains?n.chains:W_(n.accounts);r[t]={chains:f,methods:s,events:c,accounts:h}}return r}function uc(o){return typeof o=="number"?o:o.includes("0x")?parseInt(o,16):o.includes(":")?Number(o.split(":")[1]):Number(o)}const Y_={},Tt=o=>Y_[o],lc=(o,r)=>{Y_[o]=r};class sb{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Hi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||gn(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}}class ab{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(parseInt(r),t),this.chainId=parseInt(r),this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,t){const n=t||gn(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=parseInt(Hi(t));r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const r=this.chainId,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}async handleSwitchChain(r){var t,n;let s=r.request.params?(t=r.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const c=parseInt(s,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}}class ob{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Hi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||gn(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}}class cb{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Hi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||gn(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}}class ub{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{const n=this.getCardanoRPCUrl(t),s=Hi(t);r[s]=this.createHttpProvider(s,n)}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}getCardanoRPCUrl(r){const t=this.namespace.rpcMap;if(t)return t[r]}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||this.getCardanoRPCUrl(r);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}}class lb{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Hi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||gn(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}}class hb{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,t){this.httpProviders[r]||this.setHttpProvider(r,t),this.chainId=r,this.events.emit(Ti.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(t=>{var n;const s=Hi(t);r[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[t])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,t=this.httpProviders[r];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return t}setHttpProvider(r,t){const n=this.createHttpProvider(r,t);n&&(this.httpProviders[r]=n)}createHttpProvider(r,t){const n=t||gn(r,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${r}`);return new Ri(new Vi(n,Tt("disableProviderPing")))}}var _b=Object.defineProperty,fb=Object.defineProperties,pb=Object.getOwnPropertyDescriptors,Yh=Object.getOwnPropertySymbols,db=Object.prototype.hasOwnProperty,gb=Object.prototype.propertyIsEnumerable,Jh=(o,r,t)=>r in o?_b(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,_a=(o,r)=>{for(var t in r||(r={}))db.call(r,t)&&Jh(o,t,r[t]);if(Yh)for(var t of Yh(r))gb.call(r,t)&&Jh(o,t,r[t]);return o},hc=(o,r)=>fb(o,pb(r));class kc{constructor(r){this.events=new Lc,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:Ae.pino(Ae.getDefaultLoggerOptions({level:(r==null?void 0:r.logger)||kh})),this.disableProviderPing=(r==null?void 0:r.disableProviderPing)||!1}static async init(r){const t=new kc(r);return await t.initialize(),t}async request(r,t){const[n,s]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:_a({},r),chainId:`${n}:${s}`,topic:this.session.topic})}sendAsync(r,t,n){this.request(r,n).then(s=>t(null,s)).catch(s=>t(s,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(r=this.session)==null?void 0:r.topic,reason:er("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,t){this.events.on(r,t)}once(r,t){this.events.once(r,t)}removeListener(r,t){this.events.removeListener(r,t)}off(r,t){this.events.off(r,t)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:s}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await s().then(c=>{this.session=c,this.namespaces||(this.namespaces=nb(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==z_)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,t){try{if(!this.session)return;const[n,s]=this.validateChain(r);this.getProvider(n).setDefaultChain(s,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(pn(t)){for(const n of t)r.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await HO.init({logger:this.providerOpts.logger||kh,relayUrl:this.providerOpts.relayUrl||qO,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const r=[...new Set(Object.keys(this.session.namespaces).map(t=>zn(t)))];lc("client",this.client),lc("events",this.events),lc("disableProviderPing",this.disableProviderPing),r.forEach(t=>{if(!this.session)return;const n=tb(t,this.session),s=W_(n),c=rb(this.namespaces,this.optionalNamespaces),h=hc(_a({},c[t]),{accounts:n,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new ab({namespace:h});break;case"solana":this.rpcProviders[t]=new ob({namespace:h});break;case"cosmos":this.rpcProviders[t]=new cb({namespace:h});break;case"polkadot":this.rpcProviders[t]=new sb({namespace:h});break;case"cip34":this.rpcProviders[t]=new ub({namespace:h});break;case"elrond":this.rpcProviders[t]=new lb({namespace:h});break;case"multiversx":this.rpcProviders[t]=new hb({namespace:h});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:t}=r,{event:n}=t;if(n.name==="accountsChanged"){const s=n.data;s&&pn(s)&&this.events.emit("accountsChanged",s.map(ib))}else if(n.name==="chainChanged"){const s=t.chainId,c=t.event.data,h=zn(s),f=uc(s)!==uc(c)?`${h}:${uc(c)}`:s;this.onChainChanged(f)}else this.events.emit(n.name,n.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:t})=>{var n;const{namespaces:s}=t,c=(n=this.client)==null?void 0:n.session.get(r);this.session=hc(_a({},c),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:t})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",hc(_a({},er("USER_DISCONNECTED")),{data:r.topic}))}),this.on(Ti.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw new Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var t;this.getProvider(r).updateNamespace((t=this.session)==null?void 0:t.namespaces[r])})}setNamespaces(r){const{namespaces:t,optionalNamespaces:n,sessionProperties:s}=r;t&&Object.keys(t).length&&(this.namespaces=t),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",n)}validateChain(r){const[t,n]=(r==null?void 0:r.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(h=>zn(h)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const s=zn(Object.keys(this.namespaces)[0]),c=this.rpcProviders[s].getDefaultChain();return[s,c]}async requestAccounts(){const[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,t=!1){var n;if(!this.namespaces)return;const[s,c]=this.validateChain(r);t||this.getProvider(s).setDefaultChain(c),((n=this.namespaces[s])!=null?n:this.namespaces[`${s}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,t){this.client.core.storage.setItem(`${qh}/${r}`,t)}async getFromStore(r){return await this.client.core.storage.getItem(`${qh}/${r}`)}}const yb=kc,Eb="wc",mb="ethereum_provider",vb=`${Eb}@2:${mb}:`,Rb="https://rpc.walletconnect.com/v1/",xc=["eth_sendTransaction","personal_sign"],Tb=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Dc=["chainChanged","accountsChanged"],Ob=["chainChanged","accountsChanged","message","disconnect","connect"];var bb=Object.defineProperty,Ib=Object.defineProperties,wb=Object.getOwnPropertyDescriptors,Xh=Object.getOwnPropertySymbols,Pb=Object.prototype.hasOwnProperty,Sb=Object.prototype.propertyIsEnumerable,Zh=(o,r,t)=>r in o?bb(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,Wn=(o,r)=>{for(var t in r||(r={}))Pb.call(r,t)&&Zh(o,t,r[t]);if(Xh)for(var t of Xh(r))Sb.call(r,t)&&Zh(o,t,r[t]);return o},Qh=(o,r)=>Ib(o,wb(r));function Ea(o){return Number(o[0].split(":")[1])}function _c(o){return`0x${o.toString(16)}`}function Cb(o){const{chains:r,optionalChains:t,methods:n,optionalMethods:s,events:c,optionalEvents:h,rpcMap:f}=o;if(!pn(r))throw new Error("Invalid chains");const m={chains:r,methods:n||xc,events:c||Dc,rpcMap:Wn({},r.length?{[Ea(r)]:f[Ea(r)]}:{})},g=c==null?void 0:c.filter(G=>!Dc.includes(G)),P=n==null?void 0:n.filter(G=>!xc.includes(G));if(!t&&!h&&!s&&!(g!=null&&g.length)&&!(P!=null&&P.length))return{required:r.length?m:void 0};const F=(g==null?void 0:g.length)&&(P==null?void 0:P.length)||!t,C={chains:[...new Set(F?m.chains.concat(t||[]):t)],methods:[...new Set(m.methods.concat(s!=null&&s.length?s:Tb))],events:[...new Set(m.events.concat(h!=null&&h.length?h:Ob))],rpcMap:f};return{required:r.length?m:void 0,optional:t.length?C:void 0}}class qc{constructor(){this.events=new wr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=vb,this.on=(r,t)=>(this.events.on(r,t),this),this.once=(r,t)=>(this.events.once(r,t),this),this.removeListener=(r,t)=>(this.events.removeListener(r,t),this),this.off=(r,t)=>(this.events.off(r,t),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){const t=new qc;return await t.initialize(r),t}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,t){this.signer.sendAsync(r,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);const{required:t,optional:n}=Cb(this.rpc);try{const s=await new Promise(async(h,f)=>{var m;this.rpc.showQrModal&&((m=this.modal)==null||m.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Qh(Wn({namespaces:Wn({},t&&{[this.namespace]:t})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:r==null?void 0:r.pairingTopic})).then(g=>{h(g)}).catch(g=>{f(new Error(g.message))})});if(!s)return;const c=fE(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:_c(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{const{params:t}=r,{event:n}=t;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{const t=parseInt(r);this.chainId=t,this.events.emit("chainChanged",_c(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",Qh(Wn({},er("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var t,n;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(n=this.modal)==null||n.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return typeof r=="string"?r.startsWith(`${this.namespace}:`):!1}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){const t=r.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",_c(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){const t=this.parseChainId(r);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(r){const[t,n,s]=r.split(":");return{chainId:`${t}:${n}`,address:s}}setAccounts(r){this.accounts=r.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var t,n;const s=(t=r==null?void 0:r.chains)!=null?t:[],c=(n=r==null?void 0:r.optionalChains)!=null?n:[],h=s.concat(c);if(!h.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=s.length?(r==null?void 0:r.methods)||xc:[],m=s.length?(r==null?void 0:r.events)||Dc:[],g=(r==null?void 0:r.optionalMethods)||[],P=(r==null?void 0:r.optionalEvents)||[],F=(r==null?void 0:r.rpcMap)||this.buildRpcMap(h,r.projectId),C=(r==null?void 0:r.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(G=>this.formatChainId(G)),optionalChains:c.map(G=>this.formatChainId(G)),methods:f,events:m,optionalMethods:g,optionalEvents:P,rpcMap:F,showQrModal:!!(r!=null&&r.showQrModal),qrModalOptions:C,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,t){const n={};return r.forEach(s=>{n[s]=this.getRpcUrl(s,t)}),n}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?Ea(this.rpc.chains):Ea(this.rpc.optionalChains),this.signer=await yb.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:n}=await pE(()=>import("./index-b6037812.js").then(s=>s.i),["assets/index-b6037812.js","assets/main-33163c51.js","assets/index-a070b0aa.css"]);t=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Wn({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;const{chains:t,optionalChains:n,rpcMap:s}=r;t&&pn(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(s==null?void 0:s[c])||this.getRpcUrl(c)})),n&&pn(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(c=>this.formatChainId(c)),n.forEach(c=>{this.rpc.rpcMap[c]=(s==null?void 0:s[c])||this.getRpcUrl(c)}))}getRpcUrl(r,t){var n;return((n=this.rpc.rpcMap)==null?void 0:n[r])||`${Rb}?chainId=eip155:${r}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return typeof r=="string"||r instanceof String?[this.parseAccount(r)]:r.map(t=>this.parseAccount(t))}}const Vb=qc;export{Vb as EthereumProvider,Ob as OPTIONAL_EVENTS,Tb as OPTIONAL_METHODS,Dc as REQUIRED_EVENTS,xc as REQUIRED_METHODS,qc as default};
//# sourceMappingURL=index.es-e53c296a.js.map
